00:00:25.010 - 00:01:16.902, Speaker A: Mind, sorry, that I could be there in person with you. All I'm talking about ned across Crypto in 2021. I tried to keep this anchored in what's happening on the ground in the real world, across the actual abstraction strategies that are being used, the negative effects or negative externalities that are caused by those extraction strategies, and then the efforts being taken to reduce those negative externalities. So those are sort of the three broad categories that I'm looking at of Mev activity across Crypto, extraction, externalities, and Mitigation. And again, this is really focusing on what we've seen happen actually on chain in the last year. So we'll start this by looking at some numbers. I tried to put together an estimate of how much Mev was extracted on each layer, one in 2021.
00:01:16.902 - 00:02:30.702, Speaker A: So, beginning with Flushbot's Public Metrics, which is Mud Explorer, about $475,000,000 of Med was extracted with just ARBs in liquidation in 2021. So this number doesn't include sandwiches, it doesn't include things like NFC Mev, some liquidations like Maker Token, Siping, et cetera, 475,000,000 just from Arbitrage and some liquidation. There is a Community Sandwich profit estimate that builds off of some of the work Mebs for did, which was $379,000,000. If you put these two together, 475, 379, you get about 815,000,000, and that's a lower bound. But this doesn't include some really important categories that I've listed out in the bottom here, which I really don't have great numbers for. And this is just a finger in the air kind of estimate. You can tweak them as you see fit, whether you think I'm over or underestimating here, but NFT Mev, given the size of the market, is probably somewhere around 100 million, 50 million, 75 million, something like that.
00:02:30.702 - 00:03:10.994, Speaker A: Maker Liquidations, probably around that other kind of long tail things like Liquidity, Sniping, maybe 50 million, something like that. So change sort of the last three categories according to your intuitions as well. But if you just take the top two, that's 850,000,000. We're leaving some on the table, certainly. So the amount is somewhere between 900 million and 1 billion, I think is depending on your assumptions. And what this doesn't also look at is centralized to decentralized Exchange Farms too, and a bunch of other Mev categories. And of course, E layer One isn't the only market that matters anymore.
00:03:10.994 - 00:04:00.010, Speaker A: There are a bunch of other chains with a lot of MUV activities. I went around, asked a bunch of different people in the community for their estimates on other chains, got some good data, which is incomplete. A lot of these have data sources which are halfway through the year. So the Marlin Protocol team on their Explorer couple dashboard estimated $43 million in R for Captured. I'm calling on in 2021. This is Jan first to December, BSc, the Eigenfy team gave me June 1 to December 31 $55 million. Will shehan gave me an estimate of 19 million on Avalanche from August to December and zero xusaka estimated $8 million in salana arms.
00:04:00.010 - 00:04:53.350, Speaker A: So you add all that together, you get about 100 and $2,500.6 million in arms extracted over these ecosystems as a lower bound because of the time frame. Again, depending on your assumptions here, you can go up much higher. Maybe you want to be a little bit more conservative, but the lower bound is about a billion dollars. Now, how are people actually capturing this value? What are the strategies being used and what are the effects from that? That's what we'll dive into for the rest of the presentation. So, of course, we need to begin with priority guess auctions, where the flashpoint paper began this film. So priority guess auctions have iterative game where bots are competitively bidding each other up in an effort to receive priority at the top of the block by having the highest gas price, right? You send out a transaction.
00:04:53.350 - 00:05:19.842, Speaker A: You watch to see that nobody else's transactions had higher gas price. You bid above them if they do. And this was a game that really competed on networking. Latency view of the mem pool. But the externality of that was wasted block space. So here's a block on Ethereum. It's an old one where one PGA bot, one bot actually complex bot, bot operator captured an ARB of $70,000.
00:05:19.842 - 00:05:55.178, Speaker A: And then a bunch of PGA bots had failed transactions after that. So all of these 20 plus failed transactions don't end up doing anything. They waste block space. So there's less supply of block space for regular users and ends up raising costs for everybody else. So, in response to PGAs and some other things, spotsbots released mevgas. This is our first mitigation that we're talking about today. Mevgas created a sealed bid auction where you submitted your bids, and they were adjudicated off chain.
00:05:55.178 - 00:06:53.678, Speaker A: So only the winner of the auction ended up landing on chain, and all of the losers had their bids discarded, put to the side. So you didn't have any wasted block space if you made a sales bid. And that's one important mitigation here. The other important mitigation was that we mitigated the risk that miners enter into proprietary deals or develop their own mev strategies instead of participating on an open market. So in Flatbots, any miner, small or large, can listen to the system to produce the most profitable block and in such a way that is competitive with even the top miners that run their own searchers. So a small miner can make as much mev as a large miner can on flashbot, and we mitigated that centralization risk. In turn, this created a new extraction strategy, flashbots auction, where you are optimizing your code for gas price.
00:06:53.678 - 00:07:59.320, Speaker A: So the flashpots auction uses gas price to decide who gets included on chain. And since mev opportunities have a limited amount of mev that you can extract, that is a numerator that's called constant. The only thing that you can alter is your denominator your gas used. So to get a higher gas price, you need to lower your gas used, which means that searchers are constantly trying to lower their gas used and make their enemy extraction as efficient as possible. And as a result, with less gas being used by enemy extraction, there's more space for users. You can see on this graph here down into the right of the average percentage of full Ethereum block space that thoughtshwat's bundles are using as searchers became more gas efficient over time. And the other important thing to note about this extraction strategy thought about auction is that structurally common strategies are going to get bid off to the point where miners are being paid the majority of mev to keep that property that small miners get as much mev as large miners would or any miner is able to get the most profitable block rather.
00:07:59.320 - 00:08:58.738, Speaker A: Lastly, because of the structural sort of paying most MV to miners where there's competition, you're incentivized to find novel forms of alpha where there's less competition too. The externality of this was it became less risky to do sandwiches on Ethereum because you had atomic execution across multiple transactions. So you can look at about January to May as Blackbot's adoption ramped up over time, sandwiches increased, but in May 2021, Uniswap V Three was launched and brought more capital efficiency as well as a general downturn in the market. And so sandwiches decreased. Also in the fall we launched flashbox Protect, which is our mitigation that gives users an easy way to submit their transactions directly to miners. So you can do this by adding RPC flashbox net to your MetaMask. All of your transactions then will be ferried directly to the miners.
00:08:58.738 - 00:09:58.854, Speaker A: They're not seen through the public mem pool. You also don't lose any gas when you have a failed transaction. So add this to your wallet. We're going to move away from Eplayer One and flashbox and talk about some other extraction strategies which maybe get a little bit less traction on crypto Twitter. So this will be fun. A really interesting one that we started to see happen more on chain this year is on chain search spam. Kind of a mouthful, but basically if block space is super cheap and there are extremely fast blocks with first come, first serve, then the dominant strategy is to just send transactions repeatedly, hoping that one of them lands right behind an mev extraction creation opportunity and do the searching for mev on chain instead of off chain.
00:09:58.854 - 00:11:10.034, Speaker A: So your program on Solana or your smart contract on ETH or whatever, chain would actually be looking for ARBs within that smart contract. And you just hit the smart contract constantly, thousands of times, every hour, trying to probabilistically land in a place where you would capture an ARB and reverting when you don't. And you can do this because your reverts are so cheap that it's almost costless for you to constantly do this and you make a bunch of money when probabilistically, you actually capture some med. So you see on the right here, there's somebody that's doing the strategy on Salana calculating ARBs on chain. They made $15,000 in one ARB draw. There's a bunch of negative externalities here, but one of them was that Salana was being hit with so many transactions that validators didn't have the resources to process transactions of regular users. So you needed to be sending thousands, hundreds of thousands of transactions in the same way that liquidation bots were to be able to get your transaction processed before there were some updates to have.
00:11:10.034 - 00:12:23.702, Speaker A: Transactions were included that helped address this, but the chain was essentially down if you were a user and unable to spam the network in the same way that liquidation bots there are a bunch of chains that have some element of randomness to their block space markets too. And if there is randomness in your block space market, then you are incentivized to spam to ensure that your transaction gets where you want it to go. So within Polygon this has to do with network propagation and which transactions go to the validator and the negative externality of that is spam. So you can see here three different Tweets, the three different Janes, BSc, Aurora and Polygon, where Me in two cases and then Carnation in another are talking about people that are spamming huge amounts of transactions that end up wasting block space. They lower the supply for other users, so it raises costs for other people. It adds a ton of load to the peer to peer layer, so it becomes much more difficult to run a full node, which is a cost that we don't talk about very much. And it loads the safe space of your chain.
00:12:23.702 - 00:13:40.260, Speaker A: Over time, it also can bring your chain down. So there's a case where there was a very hot token drop on Solana to the point where a couple bucks sent huge amounts of transactions, hundreds of thousands, to get into this token drop as fast as possible and it ended up bringing the chain down for a small period of time. So pretty clear negative externality there your blockchain being brought totally down and the mitigation for this, as I understand it, is fee markets and some optimizations to how transactions are processed by block producers. I think we have two more instruction strategies here and then I'll try to take questions on avalanche before snowman. Plus plus the strategy was to maximize the stake weight and then gossip blocks as fast as possible. So by having as large as possible of a stake weight you can hear about unconfirmed blocks really quickly and by doing so you can shoot off new blocks of your own as fast as possible. And so that was one like dimension of competition and the other was running as many full nodes as you can to be able to gossip as many blocks as you can.
00:13:40.260 - 00:14:47.560, Speaker A: And this meant that you had a ton of competing blocks happening on Snowman Plus block that's increasing over time. And since the consensus mechanism of avalanche needs to process these competing blocks and come to some consensus on which one is the canonical block, the final one that's included on Chain, that meant that over time, the time densality on avalanche was increasing pre Snowman Plus Plus. So there was a bunch of changes that were made in Snowman Plus Plus. I think they introduced a single leader to mitigate this. There was also the externality that people running a ton of full nodes and bringing them up really suddenly ends up bringing a ton of latency and load to the peer to peer network. So there's this famous case where a single mev bot launched thousands of full nodes at one time in like a space of 15 minutes. And so all of a sudden everyone's full nodes are syncing with this new party, they're sending them data.
00:14:47.560 - 00:15:31.558, Speaker A: And it was such a strain on the network that I think the avalanche team thought that they were being attacked when really it was just some party trying to capture some MEB and that was indistinguishable from an attack at this case. And the reason why they did this was I think at least you could propagate locks with full nodes at that time and gossip more of them. So you had more of a chance of proposing the final lock if you ran more full node. Like I said before, the mitigation to this was snowman. Plus plus. Changing how the consensus mechanism of avalanche works to make the process less conflictual. I think that there's actually a leader in this process.
00:15:31.558 - 00:16:19.670, Speaker A: Now the last extraction strategy latency optimization. You have a first come, first serve chain where you have fast lock times but you have medium to high fees. It doesn't make sense for you to spam on chain. Instead it makes sense for you to get as close to the chain as possible and try to be as fast as possible to land your transactions in the places that you want without incurring transaction fees that would make it prohibitively expensive or unprofitable to you. So this makes all sorts of weird games happen. There's one full node that as of a few months ago, one rollout that as of a few months ago, didn't have a guide for how to run their full node. But Searchers figured out how to do this.
00:16:19.670 - 00:17:04.370, Speaker A: So there was an underground guide to running a full node for this rollout that's being passed around on discord. And it's like kind of a secretive thing among Searchers because it would help you, I think, optimize for your latency. I know people who have launched hundreds, thousands of different AWF servers to try to find the one that's closest to the sequencer. Surprisingly, this isn't talked about that much, but there's an Oracle team on a first come first serve chain that runs their own liquidation bot. And so you post the Oracle update at the same time as liquidation. And since it's first come, first serve, since you're launching these from the same server, nobody else has an opportunity to even launch any liquidation transactions. So the Oracle team wins all the liquidations.
00:17:04.370 - 00:17:54.690, Speaker A: And the externality of this is that you have block producer centralization. Obviously, we talked about this two different talks ago, so it's much more difficult to optimize for low latency than it is medium latency, right? So 13 seconds or 14 seconds on E, that's a fair amount of time for you to find and be optimized for a semitransaction, something like 100 milliseconds is much less democratic. The dominant strategy here is eventually to colocate with, validators, or just become one. These kinds of deals are much more difficult to make transparent. Not clear to me how you would democratize this too. And even if you could offer access to multiple people, how do you audit they could actually have equal access. So my intuition is that chains that have latency optimization as their dominant strategy trends towards block producer centralization.
00:17:54.690 - 00:18:20.682, Speaker A: And I would also question that this is really the kind of games that we want to incentivize. So we already have latency Star Wars in trash buy. We can build new, maybe more pro social games within crypto. My take. Maybe spicy. And there are a bunch of Mitigations on the horizon too. So things that haven't been implemented now, but will be in 2022, hopefully, or maybe early 2023.
00:18:20.682 - 00:18:29.546, Speaker A: So Osmosis got trolled to encryption. We'll probably see repair sequencing services from Arbitrum Shutter rolling out maybe on layer.
00:18:29.578 - 00:19:08.562, Speaker B: Two, and Flashbot style markets on other chains like Judo. So to summarize, in 2021, we saw a professionalized class of Mev extractors that captured and paid out to miners over a billion dollars as a lower bound in Mev protocol design was stressed under hugely adversarial conditions with a ton of money on the line, networks buckled under stress, even failed at times from Mev searchers. And we saw a bunch of Mitigations being implemented and pursued. So thanks for listening. That's my talk. I think I have a single minute.
00:19:08.626 - 00:19:11.420, Speaker A: For questions if anybody has any.
