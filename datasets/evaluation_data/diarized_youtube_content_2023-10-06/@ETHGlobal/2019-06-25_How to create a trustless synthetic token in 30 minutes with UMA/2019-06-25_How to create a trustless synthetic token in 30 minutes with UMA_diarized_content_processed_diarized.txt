00:00:00.490 - 00:00:00.798, Speaker A: It.
00:00:00.884 - 00:00:04.640, Speaker B: If you've written solidity before, could you just raise your hand?
00:00:05.810 - 00:00:06.880, Speaker A: Okay, cool.
00:00:07.330 - 00:00:14.160, Speaker B: And if you are familiar with synthetic tokens or what they are, could you raise your hand?
00:00:15.410 - 00:00:16.062, Speaker A: Cool.
00:00:16.196 - 00:00:24.960, Speaker B: And if you think you could explain what a swap is, as in, like a type of derivative, raise your hand.
00:00:25.370 - 00:00:27.670, Speaker A: It okay. Cool.
00:00:27.820 - 00:01:26.760, Speaker B: That's pretty good then. So the title of this workshop is how to Create a Synthetic Token with, um in 30 Minutes. So originally I was going to have this be like a workshop style talk where I would go through the actual process. But one of my colleagues updated the README, and it's pretty comprehensive in terms of how to start up one of our smart contracts, how to deploy it on a testnet, and how to interact with it through our DAP. So instead I wanted to focus more on kind of like high level what we're doing, why we're doing it, and then also the mechanics of the derivative. And I think that would be a lot more enlightening in terms of figuring out how to use it. And then afterwards, if you have any questions, I'll leave plenty of time and I'll also be here throughout the day, so you can always ask me any questions.
00:01:27.790 - 00:01:28.540, Speaker A: Cool.
00:01:29.470 - 00:01:50.320, Speaker B: So, yeah, going back to what I said earlier, you can go to our repository, go through the README. We also have a public Slack, and then I'll be here all day. You can reach me out on Slack or you can just find me on Twitter or find me here. I also have a colleague, Roz, who will be here as well.
00:01:52.210 - 00:01:52.960, Speaker A: Cool.
00:01:54.450 - 00:02:34.254, Speaker B: Yeah. So first of all, what is synthetic token? It seems like most of you are fairly familiar with it, but I'll just go through it really quickly, at least for our definitions of synthetic tokens, we mean any kind of token, typically an ERC 20 token, where the value is pegged to a real world asset. Strictly speaking, it doesn't necessarily have to be an asset, but that's probably the easiest way to understand it. So an example would be an S and P 500 synthetic token, which just means that it tracks the S and P 500 index. Right. So we already have synthetic tokens according to this definition. Dai and Tether, probably the two most famous ones, and they're all pegged to the US.
00:02:34.254 - 00:03:19.914, Speaker B: Dollar. Another way of looking at it is that these are called stablecoins, of course, and I would consider stablecoins as a subset of synthetic tokens where it's pegged to some relatively stable asset, which is useful, obviously, as a medium exchange or a unit of account. No, they're not. So right now, we just deployed an S and P 500 token about two or three months ago, and we're still ramping out our product to figure out product market fit.
00:03:20.112 - 00:03:20.860, Speaker A: Yeah.
00:03:22.850 - 00:03:35.380, Speaker B: Dai uses their own smart contract system, Tether. I think they have multiple versions. Tether. But the one that is primarily used is built on top of Bitcoin, which is kind of interesting.
00:03:39.270 - 00:03:51.814, Speaker C: Differentiate between Dai uses a system of collateral and price versus Tether, which is just kind of centralized asset. Differentiate between those kind of further subset them.
00:03:51.932 - 00:04:47.430, Speaker B: Yeah, definitely. There are all kinds of different ways to structure a synthetic token and one is what you just described, right? Tether is backed by a central counterparty, supposedly, and there's less transparency, let's just call it that. And Dai is backed by a smart contract. You can see the collateralization ratio and the rules for liquidation are all on the smart contract, so you can kind of audit it yourself. And if you have any questions partway through, feel free to ask. No worries. So why do we think synthetic tokens are important? We think it's important because it'll give owners of cryptocurrencies exposures to real world assets.
00:04:47.430 - 00:05:57.440, Speaker B: So if you own ETH over the past few months you've been doing fine, but in a bear market not so much. Maybe you want to hedge your exposure to something that's less correlated to ETH, which seems fairly reasonable even if you're a holdler. Maybe you're the owner of a treasury and you have to manage your funds according to some roadmap. So you may want to have some exposure to things other than ETH or non ERC 20 tokens. And we also think it's a fairly important primitive for DFI. So synthetic tokens could use Dai as collateralization, so it can end up being used as a Dai sync and it could also be used to create different kinds of tokens that weren't possible before. So how does that actually work? So our synthetic token structure, fundamentally it uses a swap, which is a kind of derivative and I'll just try and explain what a swap is very quickly.
00:05:57.440 - 00:06:52.880, Speaker B: So swaps are used in a traditional finance world, fairly commonly. Generally speaking, it has two counterparties and you're trying to evaluate price movements between two assets. So one example you could use is the S and P 500 on one side and US dollars on the other side. So you have one counterparty that wants to bet for the price increase of the S and P 500 relative to the US dollar and the other counterparty would do the opposite. And generally speaking, they agree on a margin currency. In this case, we can choose to use the US dollar and then both parties agree on an expiry date. So let's just say that this swap lasts for a month.
00:06:52.880 - 00:07:40.560, Speaker B: There are special cases where there are no expiry dates. The well known one, of course, is BitMEX, which isn't built on top of ethereum, it's on a centralized exchange in Hong Kong. But they have perpetual swaps and all that means is that you enter into an agreement for a swap. For them, it would be something like Bitcoin to US dollars and there is no expiry date. But underneath the hood there are expiries and there are expiries, but then it just rolls over and you're not exposed to it. You can just hold on to a swap where you're exposed to bitcoin on the long side, US dollars on the short side and get out of it. I believe whenever you.
00:07:42.530 - 00:07:43.494, Speaker A: Yep.
00:07:43.642 - 00:08:04.200, Speaker B: So generally speaking, the two counterparties, they put up collateral and then once the contract starts, you process how the price moves and then depending on how the price moves, the balance for each counterparty shifts. So does that roughly make sense?
00:08:08.140 - 00:08:08.744, Speaker A: Cool.
00:08:08.862 - 00:08:11.736, Speaker D: How does the price get oracled on chain?
00:08:11.848 - 00:08:28.960, Speaker B: Yeah, so I'll definitely get into that later. But generally speaking there's going to be so there are different setups. Right, but generally speaking, you'll have a third party or a set of third parties that are going to publish the price feed from some external source.
00:08:32.100 - 00:08:32.416, Speaker A: And.
00:08:32.438 - 00:09:25.510, Speaker B: Then generally speaking, there's going to be an expiry date and then at the end of the expiry date, each counterparty is able to redeem whatever they earned. Yeah. So I'll give like a very simple example. I'll give a very simple example. So roughly speaking, you have two parties, A and B. They want to swap foreign asset against US dollars which means that if the price of the asset goes up you'll have one counterparty A, who is long position who has the long position which means that as the price goes up, they gain money and the other position counterparty B, has a short position as the price goes up, they'll lose money right? Fairly simple to understand.
00:09:27.880 - 00:09:28.996, Speaker D: Can I see a question?
00:09:29.098 - 00:09:29.860, Speaker B: Yeah, definitely.
00:09:30.010 - 00:09:46.980, Speaker D: So if a party A was exposed to the asset and it went from ten dollars to thirty dollars in a real exposure to the asset, they'd have $30 in this, they're only limited to what the other party happens and other party stakes.
00:09:47.060 - 00:10:57.410, Speaker B: Does that yes, that's a great question. So there's definitely a potential that the price moves past what's been collateralized, at which point, say party A, if the price goes above $20, they won't be able to you can't rebalance anymore because there's not enough collateral on party B side, which means that the contract would have to be stopped out, which means the contract would have to be frozen. So generally speaking, there are different ways to solve this. One way to do it is to force each party to over collateralize and then if you get close enough to the stop out point, then the contract is frozen and then the other party has to pay a default penalty which comes out of what was collateralized initially. Generally speaking, that's how it's done. Whether it be on BitMEX or MakerDAO, there's some kind of penalty that you have to pay and you get stopped out.
00:10:58.900 - 00:10:59.650, Speaker A: Yes.
00:11:04.180 - 00:11:40.936, Speaker B: So yeah, now that we kind of understand how swaps work, what are the pieces for creating synthetic tokens? So the first part is a price feed that you mentioned. Someone has to supply price feed. It could be a third party, it could be a set of third parties. We have an on chain swap, that's a smart contract. And then we want to tokenize one side. So what does that exactly mean? Let's say we'll go back to the previous example. We have party A who has $10 of exposure.
00:11:40.936 - 00:12:40.320, Speaker B: All that means is they have exposure to the long side of the asset. But instead of having $10 exposure, what if party A splits up that $10 exposure to ten separate pieces, creates tokens for them and then sells them to whoever is interested in having that same exposure? So I could just take these ten tokens, say that I'm party A, take these ten tokens and then sell them to you. Each token will be worth one dollars. And then if the price of the asset goes up by one dollars, then each token will gain ten cents. And in that sense, of course, with ERC, 20 tokens you have a lot of precision, ten to 18. So you can cut it up fairly. Granularly.
00:12:46.980 - 00:12:47.344, Speaker A: Yeah.
00:12:47.382 - 00:12:48.530, Speaker B: Does that make sense?
00:12:49.380 - 00:12:50.130, Speaker A: Cool.
00:12:52.820 - 00:13:32.910, Speaker B: Yeah. And then also yesterday Vitalik mentioned collusion and that's definitely an issue with what we're trying to solve as well. So the price feed, right, the Price feed has a lot of control. What if the real asset was $10, but then the third party colluded with one of the counterparties and then claimed that it was $20. So in reality it's $10. 3rd party Price Feed claims that it's $20 and then partier can run out with $10 extra. Right.
00:13:32.910 - 00:14:19.900, Speaker B: So with the current iteration, we uma, control the Oracle, which is similar to the setup that say Makerdal has. But our general plan is to relinquish or at least give some of the control to other third parties. And that's kind of where the decentralized Oracle idea comes from. And there are a few challenges and a few benefits from going with this approach. This is something that I can definitely talk about after this talk. But for now the price feed is controlled by uma.
00:14:26.610 - 00:14:27.360, Speaker A: Yeah.
00:14:29.590 - 00:15:36.838, Speaker B: But then there is also a possibility that the price feed is controlled by a third party. And what happens if it's corrupted? So there is also dispute resolution protocol within our smart contract. Generally speaking, what that means is if one of the counterparty disagrees with a price that was published by the price feed, they can dispute it and then go to an Oracle which will resolve the price. Generally speaking, what happens is if there's a dispute, then the contract is frozen and then the Oracle will come in and resolve a correct price. And then at that point the contract is finished and the counterparties are able to redeem whatever they owe, similar to as if the contract went through expiry. Yeah, go ahead. Yeah, definitely.
00:15:36.838 - 00:16:26.290, Speaker B: So you're talking about as opposed to party A and the third party price feed colluding. What if the party A and the oracle colluded against party B? Yeah. So this is like going back to kind of, roughly speaking, what Vitalik is talking about. If there's no way to guarantee that there is inclusion between, say, the two counterparties and the Oracle, it's hard to guarantee that there won't be collusion or there won't be an opportunity to profit from collusion. So our current iteration uses we control the Oracle, the dispute resolution Oracle.
00:16:26.370 - 00:16:27.000, Speaker A: Yeah.
00:16:28.730 - 00:16:43.980, Speaker B: And there has to be an element of trust there definitely. So let me answer that more fully in the decentralized version at the end of this talk. But that's definitely an important point.
00:16:44.670 - 00:17:00.866, Speaker E: And in theory you might also need like a watch cover right, to make sure that you don't get frozen at it or the contract doesn't get busted before you yeah, that might add a little bit of friction or just additional cost.
00:17:01.048 - 00:17:12.274, Speaker B: Right? Yeah. You can't own the tokens and forget about the price feed. There's always a possibility that it corrupts.
00:17:12.402 - 00:17:18.390, Speaker A: Yeah, definitely. Yeah.
00:17:18.460 - 00:17:36.006, Speaker B: So I'll just give an example of something interesting that you could do with our synthetic tokens instead of something boring like the S and P 500. Let's just say that you want to create a synthetic token that tracks Andrew Yang's polling numbers. Right. We'll call it Math coin.
00:17:36.198 - 00:17:36.554, Speaker A: Yeah.
00:17:36.592 - 00:18:04.070, Speaker B: Thank you. It could be anything else, too. It could be like De Blasio, if you're a fan of De Blasio. So what would it look like? So first you have to figure out what the source of the price feed is. Let's just say that we'll take 538. If they aggregate the polling numbers and they update it every single day or once a week, we can use that. And then we'll just say that it expires at the Democratic Iowa Caucus next year in February.
00:18:04.070 - 00:18:44.978, Speaker B: And then we'll say that the synthetic token will increase in value one dollars for every basis point movement, which is just like 100th of a percentage point. And currently I heard that he was tracking at around 3%. So let's just say that initially it's 3% and every .1% that it moves, a synthetic token will increase in value by a dollar. Synthetic token. When I meant token, I meant just the overall position will increase in value by a dollar. So Party A will take a long position.
00:18:44.978 - 00:19:15.258, Speaker B: They have to provide $300 in collateral because the most that it can go down is by is 3%. And then Party B can take the short position. And let's just say that they have to provide $5,000 in collateral in case his numbers go up to 53%. So this just sets a ceiling in terms of how much they can lose. Does that roughly make sense how you.
00:19:15.264 - 00:19:17.514, Speaker D: Got to that number matter, or is that just arbitrary?
00:19:17.562 - 00:19:17.822, Speaker A: Yeah.
00:19:17.876 - 00:19:39.890, Speaker B: Anyone? It's arbitrary. So I just picked it as in you mentioned earlier. Right. Let's just say that the provided collateral was $1,000, but then his polling numbers went up to 15%, then there isn't enough collateral to pay out the other side. So yeah, definitely arbitrary.
00:19:41.910 - 00:19:50.934, Speaker E: Cardi B in theory is saying I open up 5000 in collateral and my max gain is 300.
00:19:51.052 - 00:19:51.382, Speaker A: Right.
00:19:51.436 - 00:19:54.662, Speaker E: Because short position that his key goes to zero.
00:19:54.716 - 00:19:55.174, Speaker A: Right? Yes.
00:19:55.212 - 00:20:03.958, Speaker E: So in theory, like, party B only puts up that 5000 if they think that the return on that 5000 is on a risk adjusted basis.
00:20:04.054 - 00:20:04.922, Speaker A: Makes sense.
00:20:04.976 - 00:20:09.198, Speaker E: And in this case, maybe they do think that it's going to zero and there's like a 90% chance.
00:20:09.284 - 00:20:10.206, Speaker B: Yeah, definitely.
00:20:10.308 - 00:20:11.946, Speaker E: They wouldn't put up that 5000 collateral.
00:20:11.978 - 00:20:12.702, Speaker A: They just use it.
00:20:12.756 - 00:20:13.920, Speaker B: Yeah, definitely.
00:20:15.250 - 00:20:22.130, Speaker D: Could you force party A to also lock up 4700 just to be annoying?
00:20:23.270 - 00:20:25.426, Speaker E: No, because the max that they could.
00:20:25.448 - 00:20:42.710, Speaker D: Lose, they just also have to escrow or stake that much capital, the max that they could lose. Yeah, but they also could stake the 4700 if both parties are uncomfortable with the asymmetry.
00:20:43.470 - 00:20:48.730, Speaker B: One thing you could do if you're because you definitely bring up a good point where there is an asymmetry.
00:20:52.350 - 00:20:52.714, Speaker A: In.
00:20:52.752 - 00:21:13.826, Speaker B: A more realistic example, maybe. So right now these are just like linear returns, right. One dollars for every basis point. But maybe we want to make it a little more fair where every percentage let's see, we could probably do something like if Andrew Yang goes down to.
00:21:13.848 - 00:21:19.406, Speaker E: 2%, party B gets party A's. Losses are magnified.
00:21:19.598 - 00:21:20.338, Speaker B: Yes.
00:21:20.504 - 00:21:27.622, Speaker E: So party A saying not only is he going to go up, there's like a very small chance it's going to go down.
00:21:27.676 - 00:21:29.026, Speaker B: Right. Take that risk.
00:21:29.058 - 00:21:31.590, Speaker E: And that's such a huge amount.
00:21:32.440 - 00:21:34.950, Speaker B: So it could be like go ahead.
00:21:35.260 - 00:22:08.610, Speaker F: Just to call on that idea of you can imagine that if Party B is willing to somehow off chain or somehow otherwise agree with party A, I'll always remerge in this contract every three minutes, they might only have to put in like $5 of collateral. Right. Because every three minutes they're going to put in, oh, I need to put in another five, another five, another five. Or they can take profit. Right. So that amount, that $5,000 in collateral for party B really is a function of a lot of other off chain variables too.
00:22:09.140 - 00:22:28.532, Speaker B: Yeah. So as an example, I guess we can make it like linear if it's above 3%, but quadratic if it's below 3%. And then we could probably do some kind of we can probably figure something out where both the long and the short will provide similar amounts of collateral. Yeah, go ahead.
00:22:28.586 - 00:22:38.360, Speaker G: This may be later, but I'm just wondering, in, uma, system perhaps nominal, how does party A and B combine?
00:22:40.400 - 00:22:46.190, Speaker B: Yeah, so I can get into that right after this, but that's a good question too.
00:22:47.680 - 00:22:47.996, Speaker A: Yeah.
00:22:48.018 - 00:23:00.400, Speaker B: And then finally we can say that party A sells 100 pieces and then tries to find other people that are interested in taking alongside of this math coin.
00:23:04.340 - 00:23:04.704, Speaker A: Yeah.
00:23:04.742 - 00:23:32.156, Speaker B: So I mean this is just the last slide. Just thought up of some interesting things that you could potentially build. Do you like source price feeds from the Bloomberg terminals? Say that again? Can you source price feeds from the Bloomberg terminals? Globate can you source pride speeds from Bloomberg terminals? Oh, bloomberg. Yeah, definitely. Well so I mean I can't because I don't pay for Bloomberg terminals and they're pretty expensive. But if you own them, if you have access to it, definitely you need.
00:23:32.178 - 00:23:35.676, Speaker C: Somebody to put that data on chainlink yes. And then trust that that person is.
00:23:35.698 - 00:23:37.736, Speaker B: Not lying about that chainlink tells.
00:23:37.768 - 00:23:38.590, Speaker A: That right.
00:23:39.280 - 00:24:31.124, Speaker B: If chain link provides mean the source can be from anything as long as you have access to it. Generally speaking, if it's a Bloomberg terminal, those are fairly expensive so you could probably charge some rates for it. But you can do a price feed for bitcoin hash rate. You can do a price feed for the Fed's target interest rate. You can do a price feed for the maker CDP collateralization ratio. Something else that's interesting is creating perpetual swaps. That's one thing that I mentioned earlier and then outside of price feeds, something that could be interesting is just analytics for the synthetic tokens you could do things like trading activity or collateralization ratio.
00:24:31.272 - 00:24:46.804, Speaker D: So would like a tokenized bitcoin perpetual swap sort of be like an ERC 20 that's bitcoinish. And is that on your roadmap? Is that something you're interested in?
00:24:46.842 - 00:24:48.484, Speaker B: That's definitely something that we're interested in.
00:24:48.522 - 00:24:49.110, Speaker A: Yeah.
00:24:52.760 - 00:25:38.436, Speaker B: There is like a minute and a half. I'll try and go through the questions. I think one of them was one of them is trustless Oracles. How would they work? Generally speaking, our position is that trustless Oracles are definitely hard compared to if you consider say like proof of work consensus or proof of stake consensus. As a type of Oracle problem, the one that we're trying to solve is definitely harder for various reasons. And at least I think that part of the solution is like controlling how token distribution works. I think if it's truly permissionless, it would be very hard.
00:25:38.436 - 00:25:55.370, Speaker B: Another thing is requiring some kind of stake. If you want to participate as a price feed, you have to put up some kind of stake and you have to be at risk of losing it. And then what was the question that you mentioned?
00:25:57.120 - 00:26:23.060, Speaker G: You create the structure for the instrument, but how do the parties meet and make a trade to create the instrument? Because I guess it could also trade secondarily after it's created. I guess there's two fundamental kinds of trades. There's like the creation of sort of the unwrapping of it and then there's like the secondary trading of it, I guess. How do the parties actually meet for the creation of it?
00:26:23.130 - 00:27:02.770, Speaker B: Yeah, finding the counterparty and token distribution are definitely two challenges. So finding the counterparty there is a way to modify the swap example that I created, where instead of having two initial counterparties, you can just have one counterparty that provides all the collateral tokenizes the other side, and then finds people that are willing to buy those tokens. So that partially solves the problem, but you still have to find people that are looking for these tokens with specific exposure to them. And that's almost like I call it like a meat space problem, which is.
00:27:05.620 - 00:27:10.028, Speaker G: Like a market maker, where they actually create instrument by taking both sides.
00:27:10.124 - 00:27:10.432, Speaker B: Yes.
00:27:10.486 - 00:27:18.320, Speaker G: And then they would list it somewhere and create some kind of spread to incentivize them for taking the risk on both sides.
00:27:18.400 - 00:27:19.732, Speaker B: Yes, definitely.
00:27:19.866 - 00:27:36.488, Speaker C: I know it's totally different use cases, but Zero X uses that maker taker model to solve the problem of finding counterparties. Would it be possible to have the initial, uma, participant create some sort of maker order and then they have to find a counterparty to create the taker? I don't know if you're familiar with.
00:27:36.494 - 00:27:39.416, Speaker B: How Zero X works. Not super familiar.
00:27:39.608 - 00:28:05.304, Speaker C: The maker creates basically just assigned data gram, which is essentially just a JSON message. And then the taker places that message on chain, which executes the trade. The first participant in the Uma swap creates some sort of off chain message indicating their intent to participate. And then some other party takes that message and puts it on chain to actually initiate the swap.
00:28:05.452 - 00:28:11.700, Speaker B: Yeah, I can see that. Honestly, that wasn't something that we've considered.
00:28:14.680 - 00:28:15.430, Speaker A: Cool.
00:28:20.540 - 00:28:28.120, Speaker G: I see there's like, a structure to create these instruments, but what is the actual protocol itself needed for? What does it bring to the table?
00:28:29.420 - 00:28:30.170, Speaker B: Yes.
00:28:33.260 - 00:28:44.700, Speaker G: Could just create a one off instrument, deploy it to the chain, and just trade it between two parties and have another mediator. And what is like, uma, as a protocol bring to the table?
00:28:46.160 - 00:29:17.790, Speaker B: Did, um, I didn't really go over the corner cases that have to be dealt with, but there are a decent amount of corner cases to deal with. There's dispeat resolution, there's also how to upload prices. Just frankly speaking, I wouldn't really recommend trying to create a one off synthetic token unless it's something that's like fairly centralized, kind of like Tether, I think, to be fine, but it would also be reasonable to just fork our source code and do it yourself.
00:29:18.320 - 00:29:37.788, Speaker G: Yeah, that's kind of my question. Just working it and doing it yourself lacks maybe the network that you envision. I'm just trying to understand, like, if you envision this network starting to take off. Okay, what's the value?
00:29:37.874 - 00:29:43.156, Speaker B: I can definitely answer this offline. I think we're like three minutes over, but I can definitely answer that for you.
00:29:43.258 - 00:29:44.870, Speaker G: Thank you very much. Yeah.
