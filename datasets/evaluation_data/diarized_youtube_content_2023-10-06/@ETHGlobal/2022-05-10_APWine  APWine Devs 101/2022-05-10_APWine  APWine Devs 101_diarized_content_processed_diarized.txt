00:00:00.250 - 00:00:02.480, Speaker A: US while we get the live stream set up.
00:00:25.250 - 00:00:26.000, Speaker B: Perfect.
00:00:26.370 - 00:00:37.550, Speaker A: Yes. As you can see, we have Eulus here from the APY team and he's going to give you a session on your first future yield strategy. So I'll let you take the stage.
00:00:38.170 - 00:01:10.458, Speaker B: Cool, thank you very much. All right, nice to be here with you all today. Very happy to be presenting you APY and how we're going to build together our own yield strategy using future yield tokenization. So, first, let me give you an intro on what is AP wine, what it can do. And then we're going to go through the workshop and you're going to be able to follow along very simply through your computer or even just looking at the video if you're on your mobile phone. Cool. So, APY, we're building derivatives on yield.
00:01:10.458 - 00:02:04.110, Speaker B: Now, hang on with me. This is not as difficult as it seems. We're building a suit of derivatives of tools on yield that allow you to build complex strategies on yield farming. The first tool that we have available and that we released back in December 2021 is yield tokenization. So essentially allowing you to tokenize future yield and be able to trade it, sell it in advance, or even buy it. If you think that the APY is going to go up now, why did we do that? If you've been in the DFI summer of 2020, you've noticed that DFI is full of extremely volatile yield, full of risks. And we just noticed that there was no tool that was designed to hedge your risk on this volatility, or on the other hand, take advantage of it by speculating on the APY.
00:02:04.110 - 00:02:40.374, Speaker B: So there is a very high potential for strategies and DeFi composability. So this is where we saw the opportunity and we build it for actually one and a half years now. And we came up with this concept of future yield tokenization back in August 2020. So this is new yield tokenization. It's a new primitive in DFI. It allows you to buy, sell and hedge your risk and trade the future yield that one of your assets can generate. So when you say yield bearing assets, it can be something as simple as depositing Dai on Ave.
00:02:40.374 - 00:03:09.834, Speaker B: And that gives you Adai. And Adai is what we call an interest bearing token because it generates yield compared to Dai. Dai. If you just hold it in your wallet, you're not getting yield. But if you get Adai, you're actually increasing in value and this is what makes it an interest bearing token. Now, how does this work? Let's take the example of Adai again, because it's very simple to understand. Let's say you have your Adai in your wallet and you want to tokenize the future yield of your Adai.
00:03:09.834 - 00:03:43.566, Speaker B: Over a few months, you're going to deposit this on AP One, and AP One are going to give you two different types of tokens. It's basically going to split your ada into principal tokens. So this is the value of your deposit at the time where you deposit. So if you deposit $100 worth of Adai, so 100 Adai, you're going to get a PT principal token that is always equal to $100. And then on the other hand, this is the interesting part. This is the future yield token. The other part that you're going to get.
00:03:43.566 - 00:04:18.854, Speaker B: And this part is going to be worth zero at the beginning, but as long as yield is being generated, it's going to go into this future yield token. So the principal, your initial deposit is going to generate yield, and the yield is going to be split and going into the other token. So the future yield token. And this is where it gets very interesting because once you have this future yield token, you can do whatever you want with it. Since it represents the future yield, you can sell it to get it ahead of time. And this is where the magic happens. So you can mint PT and FYT.
00:04:18.854 - 00:04:59.400, Speaker B: I'm just going to use PT and FYT throughout the workshop because it's simpler to say principal token, future yield token, so you can mint with your IBT Adai, for example. And then you can burn in the same way, PT and FYT to get your IBT back at any time. So you're not locked in APY. It's really a deposit and withdrawal. Now, another big part of our project is we have the protocol on the one hand that does this yield splitting yield tokenization, and then we have the AP one AMM. So this is something that we've been working on for six months. And we iterated over multiple functionalities and over the design.
00:04:59.400 - 00:05:39.582, Speaker B: We came up with a design for the automated market maker that allows you to trade between PT, FYT, but also underlying, which means that you can sell your FYT for underlying. Now, let me just clear up a few things underlying here. We mean the underlying asset of your IBT. So if you're depositing Adai, you're going to get underlying is die. It's the underlying. It's the base asset. Also, another point that I want to clarify is that why do we need an AMM for APY? When we started our beta in February 2021, we did this with an order book exchange.
00:05:39.582 - 00:06:22.430, Speaker B: Now, there are many reasons why an order book exchange on a layer one, such as ethereum, is not a good idea. So we quickly pivoted to making our own AMM, just like uniswap SushiSwap balancer. All of these are AMMS. And we built our AMM so that it accounts for the specific mechanisms of the FYT. Because you can't just go on SushiSwap and make a pool with Ptfyt, for example, because the FYT actually has a special mechanism. It's worth zero at the beginning and at the end of the period, it's worth all the yield that was generated. So you would have a big impermanent loss what we call impermanent loss is the loss of value for liquidity providers.
00:06:22.430 - 00:06:50.090, Speaker B: If you just put this on a regular AMM. So this is what we did with our special AMM. You can check out the docs on Docs APY and there's very detailed docs on how this works, all the mechanics behind it. So if you want to get more in detail into how this works, please feel free to do so. Right now, a few examples of what we can do with APY. The first thing is we can buy PT. So principal token at a discount.
00:06:50.090 - 00:07:18.690, Speaker B: Why? Because there is the time factor to be included inside. Basically, PT is going to have a discount. So it's going to be undervalued compared to what it's really worth. You need to remember that at the end of each period, one PT is always going to mint new Fyts for the new period. Right now with AP one, we work with 90 days periods. So three months for each period. Which means that if you buy PT at 0.5,
00:07:18.690 - 00:07:56.254, Speaker B: for example, and then it needs to go to one at the end of the period, you're essentially buying PT at the discount and making a profit off of that. So this is one of the strategies that you can do. This is called a fixed rate because you can essentially guarantee accept smart contract hacks. But it is guaranteed by the smart contracts of APY that if you buy PT at a price that is less than one. So one underlying, for example, if I buy Adai PT for 0.5 die, I know for sure that I'm going to get 100% return on that. I'm going to double my investment because my 0.5
00:07:56.254 - 00:08:16.338, Speaker B: PT is going to be worth one die at the end. So that's one of the strategies. The other one is yieldception. Future yield tokenization allows you to get your yield ahead of time. And if you get your yield ahead of time, you can reinvest it into yield farming. And this is where it gets pretty crazy. You can do kind of a loop, an inception, and this is why we called it yieldception.
00:08:16.338 - 00:08:50.370, Speaker B: So essentially get your yield ahead of time, reinvest it, and then leverage this position to get it as long as it's profitable. Let's not spend too much time on this. We have the workshop to do. So today's workshop is going to be fixed rate by selling future yield. I've described the PT strategy, buying PT at a discount. It is very good and we're going to see how it works. But in this workshop, we're going to do a little bit, something a little bit different that can achieve the same result, but with much higher capital efficiency and with much higher volumes.
00:08:50.370 - 00:09:18.518, Speaker B: So we're going to leverage both the protocol and the AMM parts to do this strategy. And I'm going to show you how. Right, so if you're following this on a computer, you are very welcome to follow along. You will need to have node JS and yarn for this workshop. So the first step that we want to do is just clone the AP One workshop repository here. So let me do this right now. This is the GitHub repository.
00:09:18.518 - 00:09:44.706, Speaker B: So you just want to copy this, go to your terminal. I'm going to go to my desktop. All right. And then git clone this and workshop. Now that this is done, let's go inside the folder. And the first thing you want to do, of course, is install the dependencies. So you're just going to put yarn, and yarn is going to install everything.
00:09:44.706 - 00:10:16.362, Speaker B: So the APY and SDK, we're going to use SDK for this strategy. And when this is done, this is what you will want to do. First thing is this workshop is going to be targeting ethereum mainnet, but we're not going to test in prod. We're going to be forking mainnet so that we can try on a fork of mainnet. So for free. Basically, it's a simulation of mainnet, so it's easier to understand, but at the same time it's free. So I set up a very simple script.
00:10:16.362 - 00:10:45.560, Speaker B: You can just yarn, start node and boom, you're done. There's a few accounts. This is using hard hat. And then you want to open a new terminal and just go again to the workshop. And for each step, there are going to be five steps. In this workshop, you just want to do yarn step one, yarn step two. So for example, if I want to run the first step, I'm going to do yarn step one.
00:10:45.560 - 00:11:11.646, Speaker B: And this is going to load the step. All right. Yeah, I missed one step, actually. If you want to follow this, you're going to want to copy first the environment file into your own file. So copy environment example into environment. So this is so that the RPCs are correctly configured. So this is what you want to do.
00:11:11.646 - 00:11:35.798, Speaker B: And once this is done, you should have it in your folder. So here right now we're ready. We can just start our node again and navigate to the workshop and then yarn step one. All right, let's go to the workshop. First is going to be the SDK creation. So creating the SDK is very simple. We've made it very easy.
00:11:35.798 - 00:12:01.680, Speaker B: So if you're using TypeScript, all the typings are here. You can just start a project and install the SDK package and just start building with APY. So the first thing you want to do is initialize the SDK. You're going to need to provide a provider, a signer and a network. So let me go here. And if I go to this, I hope you can see my screen. I'm going to zoom a little bit.
00:12:01.680 - 00:12:23.682, Speaker B: And so here, all the scripts are going to be in the source scripts. And then step one, step two, step three, step four, step five. Step one is going to be initializing the SDK. So this is how we initialize it. We take a provider, a signer. We actually put a private key here and then a network. This is going to be Mainnet, of course, for the purpose of this workshop.
00:12:23.682 - 00:12:54.480, Speaker B: And if we run the step, we can see that the APY SDK was correctly initialized. Now we can go on the next step. Second step is going to be retrieving all the futures. By the way, I think I can see the chat through Zoom. So if you have any questions at any time, I'm super happy to answer. And this is of course a workshop, but it should be also kind of a synchronous communication channel. So I'm happy to stop at any time and answer all of your questions.
00:12:54.480 - 00:13:34.682, Speaker B: Okay, let's go back to our step. First thing is we're going to get all the information of all the futures. So a future is basically what I explained before. A future is an asset, a duration and a platform. So, for example, we have I'm just going to show you on the Apyine website how it looks like. If you go to app APY Phi, this is on Mainnet and we have yep, absolutely. Okay, let me share maybe somebody from the ETH global team can share this on YouTube or Zoom.
00:13:34.682 - 00:14:04.630, Speaker B: I'm going to share the link of the repo. And on the repo, you actually have the presentation slides here so you can follow along. And then this also is going to be very nice. If you want to check how API looks like in real life, this is what you get. So here we can see that, for example, we have the lido finance wrapped ETH future. And so, like I said before, every future is 90 days. You can see here when it starts and when it ends.
00:14:04.630 - 00:14:34.954, Speaker B: And this future wrapped ETH is what we're going to use for this workshop. So essentially this means that you can tokenize your yield on ETH and you will see why it's very interesting to do it. We support a lot of assets. We actually go through a governance process to enable listing new assets through the community. So we have 20 different assets on Main net, and we have nine assets on polygon. So we're also cross chain. All right, cool.
00:14:34.954 - 00:15:12.090, Speaker B: So let's get all the addresses of all the futures and then we're going to get all the detailed information. You can do this through SDK, fetchall future aggregates. This is going to give you the period index, the expiry time, the token addresses and so on. So if we try on our step so this time we're going to do yarn step two. And if we run this, it's going to load a little bit. You can see here that Hard Hat is doing a lot of stuff on the background. And this is going to fetch all the futures.
00:15:12.090 - 00:15:37.454, Speaker B: By the way, this block, we are forking main net, at a block. That was a few months ago. So there were only ten futures at the time. So this is totally normal. All right, we can see here that we have a lot of assets that we can use, and one of them is staked ETH. And this is the one that we're going to use. Now that we have all the futures, we can get the basic Apr.
00:15:37.454 - 00:16:06.170, Speaker B: And the basic Apr is going to be the PT trading. So buying PT at a discount and then waiting till the period expiry to make a guaranteed quote quote profit. So let's get the spot price on the AMM this time so that we can see what is the price of a PT. We can do SDK fetch spot price. It's that simple. Then you put in the vault. So this is going to be a staked ETH vault and then the from token and the two token.
00:16:06.170 - 00:16:37.314, Speaker B: So the from token. Let's go here. So this was step two. It's just getting the fetch future aggregate from address. It's going to get all the info. And then the step three that we are actually right now is going to be we first find from all the futures that we loaded before we find the one that has staked ETH. Once we found it, we want to get the spot price between PT and underlying.
00:16:37.314 - 00:17:20.840, Speaker B: So in this case, underlying is going to be what? It's going to be the ETH, of course. So once we do this, we can actually compute the Apr. So to compute the Apr, you basically need to extrapolate the profit that you can make over 20 days. For example, if the period expires in 20 days, and then you multiply by the time left over an entire year, so you extrapolate. And this is what this formula is doing. I invite you to join the repo and check by yourself, but it's just very simple math. So if we run this, let's check, how much can we get on our ETH right now on APY? I mean, a few months ago, let's do it.
00:17:20.840 - 00:17:47.294, Speaker B: Oh, we can get 35.72% on our ETH. That is pretty insane. That means that if you buy PT at a discount with your ETH, you're going to get an amount of PT that is higher than what you put. If you wait till the period expiry, you can redeem ETH at a one one ratio from your PT. So if you buy 1.5 PT from one ETH at the end of the period, you're going to get to 1.5
00:17:47.294 - 00:18:22.650, Speaker B: E. This is guaranteed by the contracts, right? That's pretty good. The only issue with this is that we are leveraging only a part of the liquidity available in APY. Remember that the spot price is not the final price. There is always slippage in AMMS. So how can we improve our efficiency realistically? If you want to put like 100 E through this strategy, it's not going to work because there's not enough liquidity. And this is where it gets very interesting because we're going to leverage the Ptfyt liquidity on APY so that we can also do much bigger trades.
00:18:22.650 - 00:19:00.870, Speaker B: So with lower resources, we want to achieve the same or a better result. The fourth step is going to be using APY to deposit our staked ETH and then selling FYT for PT. So what this is going to do basically is we're going to tokenize our future yield and then get our yield in advance and then reinvest it into PT. It's pretty crazy when you think about it, but it's going to be very simple through the SDK. So first step is going to deposit on Lido and then on APY to get PT and FYT. Let's do that. Step four, tokenize.
00:19:00.870 - 00:19:30.794, Speaker B: So here I put a helper. It's a utility function that is very simple. It basically sends a transaction to the staked ETH address. And the staked ETH address has a mechanism that if you send ETH to it, it's going to give you staked ETH back. So this is just a wrapping mechanism, deposit. Once we have our staked ETH, we can just use the AMM. No, sorry, we can just use the APY protocol and we're going to use the AMM later to deposit our staked ETH.
00:19:30.794 - 00:19:54.610, Speaker B: So this is what this is going to do. SDK deposit and then we put the staked future for staked ETH. And then we just put the amount that we want, tokenize. In our case, this is going to be ten ETH. So ten staked ETH. And then there is a little nice neat little utility which is auto approve. So you don't need to approve manually.
00:19:54.610 - 00:20:38.660, Speaker B: This is going to automatically approve your tokens for you. Now if we run this step so Yarn, step four, if you want to follow along, we're going to deposit ten ETH on Lido Finance and then deposit our ten staked ETH on APY. And if we do that, we see that we get 9.93 PT and FYT. Why do we get less? That's simply because the period has already started, so it's already generated some yield. But if you withdraw exactly this amount of PT and FYT, you're going to get exactly your yield, I mean your initial deposit back. This is because some yield has already been generated, so your FYT has already some value.
00:20:38.660 - 00:20:57.850, Speaker B: Nice. So now we got this. Now the mechanism that we're going to use is we're going to sell our FYT for PT and at the end we're going to be seeing how much PT we have and this is going to be our profit. So this is going to be step five. The last step. We're almost there. We're going to use a simple swap in.
00:20:57.850 - 00:21:30.322, Speaker B: So we want to swap all of our FYT into PT. So SDK swap in, we pass the AMM and then from FYT to PT, you can just put the string like this. It's very easy. And then the amount this is going to give a similar result as we're going to see right now. But it's going to yield much better results with a higher capital. So essentially, you can do ten times bigger trades through this specific strategy. Nice.
00:21:30.322 - 00:22:14.980, Speaker B: Okay, so let's do this. What happened here? We just did the step one, step two, all the way to step five, and then we swap our FYT for PT. This is going to yield us ten point 36 PT. So essentially through this strategy we just secured zero point 36 ETH. If we just wait till the expiry of the period, this is equivalent to a 34% Apr, which is very good. As you can see, it's almost the same as our first strategy with the PT, except this one again, can support much bigger trades. And this is where it gets interesting, right? So this is how we use the AMM and the protocol deposit and then you can swap from anything to anything.
00:22:14.980 - 00:23:00.962, Speaker B: The composability has been also a challenge for us and this is why we came up with this AMM that has a design where you can swap between any of the three assets PT, FYT and underlying. So that essentially you are never stuck in your position on API. We really value composability and this is where it gets interesting. DeFi is all about composability. Right now is your turn. Of course, if you have any questions, please feel free to but now it's your turn to get rewarded through creative strategies, whether it be through Arbitrage trading, bots, leveraged yield, also with Gearbox, we actually have many prizes for this hackathon for hack money. But there is one special prize that I want to mention.
00:23:00.962 - 00:23:53.170, Speaker B: It's that we partnered with Superfluid who are doing money payment streaming to get a co sponsored price of $2,000 both on the Superfluid and APW side. So essentially, if you find an integration that can be interesting for both projects. So one of the few ideas I had around this concept was you could get your money streams ahead of time. So essentially, if you are being paid by superfluid through your company, you could tokenize this stream and then get it ahead of time. The other thing would be maybe streaming yield through streaming Fyts because Fyts represent yield. So all of these can be very interesting to explore. And this is why I'm excited to be partnering with East Global for this hackathon.
00:23:53.170 - 00:24:19.882, Speaker B: Get crazy with ideas and you will 100% be rewarded for that. Also, very happy to brainstorm with you. If you're listening to this, please reach out on the discord channels. We are always here to answer your questions and we're very happy to discuss. And yeah, that's basically it for this demonstration, for this workshop. That was awesome to be with you all. I hope that was clear.
00:24:19.882 - 00:24:42.226, Speaker B: Happy to answer any questions on the chat right now. If you have any questions, please feel free to ask. We're also hiring. If that's something you want to explore, we'd be happy to discuss about it. But first, let's get back to hacking and I wish you guys an amazing hackathon. I'm sure it will be great. Let's go with the questions if you have any.
00:24:42.226 - 00:24:49.870, Speaker B: Thank you very much. Thanks.
00:24:49.940 - 00:24:56.240, Speaker A: Eulis. A few seconds to see if there's any questions. If not, we can follow up. Over.
00:24:57.970 - 00:25:25.640, Speaker B: Happy to happy to do so. If you have any issues with following the workshop, I think this will be recorded so you can follow along also later on. But if there's anything that you need any clarification on, feel free to reach out on Discord. We're here to help, so don't get stuck on anything. Just as soon as you encounter any issue, we're here to help you work on your project.
00:25:28.810 - 00:25:39.882, Speaker A: Great, thanks. I think you covered everything and I've also shared your slides in the Discord channel. So yeah, hopefully you guys can connect there. And thanks again for the workshop.
00:25:40.026 - 00:25:44.940, Speaker B: Amazing. Thank you very much. Thank you to all who listened. I hope you have a great.
