00:00:00.330 - 00:00:52.110, Speaker A: Cool. Yeah. Thank you very much. I'm very excited to talk about Cowswap to you guys today. Cowswap is kind of the first application, the first trading interface that we have built on top of Gnosis Protocol version two, which is the underlying trading mechanism. And Gnosis Protocol is trying to prevent mev by employing batch auctions and uniform clearing prices as a kind of separate trading mechanism compared to what we know from Ethereum today. So let's take a look at you can basically take any random block on Ethereum today and you're very likely to going to find a couple of trades on the same token pair potentially even on the same protocol, different indices which will have sometimes slightly but sometimes also significantly different prices.
00:00:52.110 - 00:02:00.718, Speaker A: And this just comes from the fact how the underlying protocols work, that they basically give a price time priority and the ordering at which transactions are executed even within a block matter. And this kind of concept makes sense in traditional finance where we have continuous markets and where we can actually execute trades kind of all the time. And we want to incentivize traders to act as fast as possible and kind of incorporate new information as fast as possible into the market price so that the market is very efficient and kind of resembles all the real world information that is out there as efficiently as possible. And even in the traditional space there's people arguing that kind of this arm's race nanoseconds milliseconds to incorporate new information might not be actually that useful compared to the externalities that it costs and are even advertising for batch auction in kind of that sense. But then that is kind of this continuous market, traditional finance. If we go back to the Ethereum space, we really only get new information every 12 seconds when a new block is mined. And then we get a bunch of new information in the form of multiple transactions.
00:02:00.718 - 00:02:54.206, Speaker A: But if you look at these transactions, they are all really just mined at the exact same time. So kind of this notion of employing a price time priority within a single block to us is not really meaningful. And I mean, frankly, this is the reason why Mev exists in the first place and why we are here. And so in Gnosis Protocol well, version two, but also nosis Protocol version one, kind of our vision is that at least within a single block, trades that happen on the same token pair should, regardless of their index, regardless of their ordering, all receive the same uniform clearing price. There shouldn't be a difference if you're first or second or third. Everyone, every trade that happens in one block or for the matter of batch auctions in one batch receives the same uniform clearing price. So how do we get there? There's two main ideas that we need to incorporate.
00:02:54.206 - 00:03:59.450, Speaker A: The first thing is we need to stop people from giving their trade execution in form of raw ethereum transactions directly to the miners. Because we've seen miners are not acting in your best interest if you don't use technologies like MEB. Guess they're just going to take your transaction and trying to extract as much value from it as they possibly can. So they're not acting in our best interest. What we should do instead. And what Gnosis protocol does is instead of signing a directly executable transaction, the user just signs kind of Intent to trade, basically saying, I'm willing to buy Token A for Token B at a certain limit price, maybe with a certain deadline, and it then hands off this abstract intent to trade to a third party, which maybe in the traditional sense would have been called relayer. In Gnosis Protocol V Two, this party is called Solver and that is basically it's a professional player which can execute the transaction of the user much better than the average MetaMask user would be able to.
00:03:59.450 - 00:05:02.830, Speaker A: The solver can employ kind of professional price estimation for what gas price to pick. It can even use tools like flashboards mev guests to make sure that it is in itself mev resistant. It can look on chain for the best path at execution time. If this path is no longer available because there's race conditions, it can reroute the trade. And so overall, this kind of professional party can just do trade execution much better than the average user can. Now you might ask why would the solver have an interest to actually act on behalf of the user in their best interest? The first answer is kind of well, there's a longer lasting relationship between the user and kind of this network of solvers. But also at least in Protocol V Two, each solver is bonded financially inside the protocol and if it extracts value from a user which is most often provable after the fact, the protocol can penalize the solver and could actually refund the user from the penalty that is taken.
00:05:02.830 - 00:06:11.490, Speaker A: So we have bonded solvers which can do trade execution much better than the user. Another aspect of kind of this extra layer of indirection is that now not only can we settle each intent to trade individually, we can also start aggregating multiple trade intents together and settle them all in a single on chain transaction. And that allows us to actually be even more efficient than if every user was going to settle their trade individually. Because if we batch five or six trades into a single Ethereum transaction, that costs less gas than settling these five or six trades as individual transactions on chain. The other cool thing that comes from this aggregation is that the solver can now apply certain rules to the settlement. So for example, the solver can make sure that if two trades are happening on the same token pair, both of these trades get executed at the exact same clearing price. So the solver can employ kind of uniform clearing prices to a settlement for all the orders that it settles in one batch.
00:06:11.490 - 00:07:09.554, Speaker A: And this brings us to kind of the second core idea of Gnosis Protocol or cowswap also where the name comes from, which is coincidences of wants. And coincidences of wants. Well, the general idea is that we want to reduce the amount of volume that we trade against external market makers because those charge a fee for their service. And if we kind of minimize the amount of volume that we have to match against these we can actually get a better price for users. And so coincidence of wants is basically the phenomenon where somebody wants to sell a token for another token and another person wants to buy the token that the first party is selling exactly for the token that the first party is buying. And so today on Ethereum, what would happen? Let's take uniswap as an example. If you had one party selling $2,000 for ETH and another person that would be willing to buy one ETH for US dollar, they would both hit the uniswap pool, they would both pay the liquidity provider a fee.
00:07:09.554 - 00:07:55.922, Speaker A: It might be 0.5% now, but it is kind of a significant fee. And at the end of the block the Uniswap pool would actually be in exactly the same state. It would have not provided a real change or value other than kind of just being a sponge to within that block. Kind of absorb the liquidity temporarily on Gnosis protocol. Because we have these solvers that are batching trades together, they can first perform kind of a peer to peer matching within all the orders that are in a block or in one of those Gnosis protocol batches and then they only have to match whatever they cannot settle peer to peer with external on chain liquidity. And so in this specific example where we have a perfect coincidence of ones we actually don't need any external liquidity at all.
00:07:55.922 - 00:09:04.038, Speaker A: We can match the two traders directly, peer to peer. Now of course, more often than not one order will be larger than the other, in which case we could still match the small order completely via a coincidence of want and only have to take the access and try to find the best on chain opportunity to settle that extra part. And for every dollar that we don't settle against external market makers, we save fee and we can pass that on to the user to get a better price. And now you might say well, but how often does it really happen that two people really want to trade the exact opposite? Tokens markets are directional and so either tokens are going up or down, but it's not like you have a lot of times that people are trying to buy the exact opposites. But that's also not really necessary because if you look at the trades that happen within a block today, you really need to dissect kind of what are the individual hops that are happening on the underlying protocols. And so, for example, if you're buying a project token like curve for US. Dollar today, what would happen most often is that you actually do a two hop trade on uniswap where you first convert your curve into WETH and then you make a weth against USDC trade.
00:09:04.038 - 00:09:50.950, Speaker A: And kind of similarly, if you were to buy GNO with US. Dollar, you would first convert your US. Dollar into WETH and then trade that WETH against GNO. And you might see that there is now actually a coincidence of want in this WETH USDC part. And so even though there's not a perfect coincidence of want, there's still some aspect of these trades that can be matched peer to peer and where we can reduce the amount that we have to trade with external market makers that are charging a fee. So to summarize, kind of the mev protection that Gnosis protocol or Kaoswap specifically offers is basically twofold. The first part is everything that we can match peer to peer via coincidence of wants is fully mev protected.
00:09:50.950 - 00:10:36.290, Speaker A: It's somewhat similar to the RFQ system that we've seen in the talk before. The prices are agreed to off chain, only the Gnosis protocol settlement contract is allowed to execute this trade. And it doesn't matter in which position within the block the actual settlement transaction is mined, because the only entity that can actually do this trade is Gnosis Protocol settlement contract itself. So the coincidence of once are fully MEB protected. They are maximal gas efficient because they just trade tokens, kind of transfer tokens back and forth, and they save the LP free from external market makers. Then we have the part that is kind of the excess that cannot be matched peer to peer directly. For this part, we have to hit kind of the best available on chain liquidity source.
00:10:36.290 - 00:11:14.554, Speaker A: And so that part theoretically is prone to mev. But here kind of the mev protection comes from the fact that we have a professional solver executing transactions for us. And so they can set extremely tight slippage bounds, basically zero slippage for any external liquidity source they tap into. They can use mev, Geth or Flashbots to even bribe the miner to make sure they get the best price available. They can watch the mem pool to avoid race conditions. And just generally, they can protect the user from mev much better than the average MetaMask user could. And so, yeah, that's the overview.
00:11:14.554 - 00:11:21.140, Speaker A: Thank you very much. Thank you for a great presentation. Thank.
