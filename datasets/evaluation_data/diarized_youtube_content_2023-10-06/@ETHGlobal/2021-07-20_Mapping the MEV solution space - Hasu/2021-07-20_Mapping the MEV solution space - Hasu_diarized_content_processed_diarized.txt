00:00:00.490 - 00:00:40.380, Speaker A: I think this should do it. Can you see my yes. Ah, perfect. OK, yeah. My presentation is called Mapping the Mev Solution Space, mostly for Dex trading because I feel like that's what most people care about and also because it makes up for huge amount of activity on Ethereum. Right now, as we will get to I'm Hasu, you might know me as the host of the Uncommon Core podcast collaborate on research with Paradigm and I'm also the general editor of Derivative Insights. So what is mev? This is the slide that we will get in every single presentation today.
00:00:40.380 - 00:01:50.526, Speaker A: Mev is permissionless, incentives and blockchains and it's usually extractable on a first come basis. In some cases, this is very good. It's purely additive to the ecosystem. For example, if you think about liquidations without all lending markets, whether it's compound or maker or Aave, they all rely on the assumption that for a sufficient incentive, there's someone available who will recapitalize positions that are close to being underwater and put sort of the lending protocol solvency at risk. And the same goes for Arbitrage, the most popular AMMS today. They don't rebalance their reserves automatically, they never change their price unless someone trades against a pool. So if you have a price on, say, unisop, and in the same market, the price on binance moves up, then you need someone to also trade against the market on uniswap to create a common price that market participants can rely on.
00:01:50.526 - 00:02:31.598, Speaker A: However, users can also unintentionally create mev, often without knowing. And this then leads to front running and sandwich attacks and those are purely harmful to users. So we can summarize mev has risks. The biggest one I'd say being financial loss to users. It can also lead to consensus instability. We have heard about that in Charlie's presentation, I think it was the first of the day and can lead to BP Centralization. I think that goes into what Phil said in his presentation and we will also talk about the latter one in more detail later.
00:02:31.598 - 00:03:35.890, Speaker A: But mev also has great benefits. So as we just said, it makes up some of the core functionality of DFI that many protocols need in order to function. And it also adds to a blockchain security budget in the context of Ethereum. For example, ERP one five line has allowed us to basically lower the inflation that was paid by holders safely because miners now make so much money from mev and this share of their block reward was basically zero only two years ago and now it's bigger than the block subsidy. In this presentation we will focus on the financial loss and the BP Centralization. So, financial loss, because 70% of gas used on Ethereum today is used for Dex trades, now that's a huge amount. So this affects a whole lot of people and many, many of these trades unintentionally create mev.
00:03:35.890 - 00:03:58.280, Speaker A: They do this in the form of creating back running opportunities or sample text. So what's going on in the chat hasu you may want to share your full screen to hide your okay, yeah, I can do that. Let's see. How did I do that?
00:04:06.670 - 00:04:10.622, Speaker B: We can also see fine. So it's all good.
00:04:10.676 - 00:04:28.814, Speaker A: Do you still see my screen? Not anymore. Now. Okay. Yeah. Then I'll just leave it at that. It's not there's nothing to see there anyway. So to continue back running, imagine there are three markets uniswap, Sushi and binance.
00:04:28.814 - 00:05:04.990, Speaker A: And Alice only buys from uniswap. And this is very typical behavior for the average sort of retail DeFi user. So what ends up happening is she pushes up the price on uniswap, but not on any of the other two markets. And if she does that enough, then it can create a back running opportunity for Arbitrage. So Arbitragers come in and sort of run it back to the fair market price. And this is just money that comes straight out of Alice's pocket for sandwich attacks. I have this great diagram here by Will Warren.
00:05:04.990 - 00:06:00.990, Speaker A: So what this shows sort of where a user is expected to be filled in the absence of mev bots and Mev cognizant miners. This is sort of the green line. So you can see they would be filled very close to the quoted price. But if there are Mev bots present, or miners who know about mev, then what will almost always happen is that the trader will instead get filled at the worst acceptable price that they defined in their slippage tolerance parameter. So based on that, we can state two goals. We want to minimize mev as much as possible. So the harmful kind of mev that we talked about and what we can't minimize, we want to democratize in order to satisfy our second goal of preventing BP centralization.
00:06:00.990 - 00:06:53.486, Speaker A: So I have small categorization here. So generally I would separate sort of the solutions to mev into three categories on the consensus layer, the peer to peer layer, and the application layer. On the consensus layer, we will later on hear a lot about fair ordering and about privacy, and I'm greatly looking forward to these talks. So in this presentation, we focus on the peer to peer layer and the application layer. And the first concept from the peer to peer layer is gasless transactions. So conceptually, what it means is you have a transaction where the payment to the miner is conditional on the success of the transaction. So in the context of uniswap, for example, a uniswap transaction would only be included if the trade also gets filled.
00:06:53.486 - 00:07:45.114, Speaker A: So it cannot get filled, for example, because there's insufficient liquidity in the market, right? Or because your slippage tolerance wasn't met. And this is a big deal because it allows traders to sort of use the tools that are already given to them by uniswap. So users can already set zero slippage tolerance on uniswap. But what then happens is that around half of the time in markets with a lot of trading, the transaction will simply fail. And fail transactions in Ethereum also cost gas, so this can be costly for the user, especially for smaller chains. But gas's transactions sort of completely solve that because there's a party who knows if a transaction will succeed or not. And that's the miner.
00:07:45.114 - 00:08:46.546, Speaker A: So if you give the miner the right incentive to only include the transaction when it succeeds, then they will do just that. And I have this in its own category because sort of gas systems actually only require support from maybe the wallet and the block producer client. What this means is in the past it was not possible to make a zero fee paying transaction that pays the miner in a separate transfer of tokens and not instead of the native fee in the native fee field. And this changed due to Flashbots, right? So Flashbots gave miners the ability to also recognize when a user wants to pay them with a token transfer. And that's very helpful. So the wallet is necessary because crafting these transactions is a bit more complicated. Second category, and that's arguably the biggest one that has the most impact is mempool segregation.
00:08:46.546 - 00:10:04.522, Speaker A: So here's Alice and she wants to make a transaction and what happened sort of in the past and even still to a large degree today, alice just sends her transaction to the public mempool and sort of gives it away for free and says you can all have it. And anyone who follows traditional finance at least a little bit knows that Alice's order flow has a monetary value and if she just gives it away, then she loses that value. She just donates it to the miners basically. But if Alice segregates the mempool basically by sending the transaction to one miner and not other miners or one group of miners and not other miners, then she can add conditions to that transfer of basically her order flow. And in this case she can say, okay, you can have my order flow exclusively and none of the other miners, but please don't front run me. And this is getting more and more common. Now, another great way to prevent mev, especially from back running opportunities is by using a dex aggregator.
00:10:04.522 - 00:10:48.358, Speaker A: And dex aggregator buys from all markets at the same time and thereby minimizing the price impact on all of them. So this is double useful sort of because the profitability of a sandwich attack depends on the price impact of the transaction. So the price impact is lower, it's less vulnerable to being sandwich attacked. But also if you buy from all exchanges equally, then you don't create a backRunning opportunity. Right? And that's why sort of dex aggregators are actually the unsung heroes of mev minimization. Nobody really talks about them as greatly minimizing the mev that's created by traders, but they do. And I would recommend anyone who trades more frequently to always use a dex aggregator.
00:10:48.358 - 00:11:43.222, Speaker A: For that reason, lately we have seen another concept come up with, I think it's called backgroundme.com and swapswap. And what they do is sort of they bundle your trades on a single exchange with sort of another transaction that backgrounds that trade and closes the arbitrage opportunity that you created. But this is not really a product because it already relies on sort of the user making a mistake by not using an aggregator, as we said on the previous slide. But it can be a feature. There will always be retail users who won't use an aggregator who will interact directly with Uniswap, for example. And for those it makes sense, like for Unisop, who owns the user to implement this and give them a better price and not sort of bleed the money to arbitrage.
00:11:43.222 - 00:12:25.654, Speaker A: Even if Uniswap doesn't pay the money back to the user, which I'm sure they will, but even if they didn't, then it still makes sense for them to integrate it and keep the profit for themselves. And then now we get to the sort of off chain ordering. And this is very similar to how fair sequencing would work on a layer one. So users submit transactions to an off chain Oracle. The Oracle applies some fair ordering and then the trades are filled in that. So to categorize that on the peer to peer layer we have the gasless transactions. So this is enabled by flashboards.
00:12:25.654 - 00:13:25.678, Speaker A: And the first exchange that really supports it is Mist exchange and the mempool segregation. There you have a lot of competition, right? You have flashboards, you have tai chi, UX keeper blocksroute and Archer dao. These are all networks that the user can send their flow to exclusively and they gain some kind of benefit in return. This is very important because if there was only one network, then there wouldn't be this competition between the different providers and it would lead to worse conditions for the trader. And then on the app layer, the Dex aggregators, the three big ones, the back running services and off chain ordering. And I actually have sort of chainlink and Cowswap here in the same category. Because if you think about it, cowswap is also just an off chain Oracle, right? They also order the transactions in a particular way, except that their condition is that all transactions, all trades in a block in the same market must have the same clearing price.
00:13:25.678 - 00:14:20.686, Speaker A: But it's really no different otherwise. And finally, we can also expect some general improvements. So for example, more concentrated liquidity would lead to lower price impact and that again leads to less mev created. So straight up we could say if there was only a single exchange on Ethereum, there would be far, far less mev. So from that standpoint, it would be quite good if some of the exchanges would consolidate into one or markets would get more liquid. And then another idea, and maybe don't know if we ever see that, but sort of an AMM pool that auctions off the first look in every block and let sort of the exchange owner give them the right to arbitrage the pool. And this would solve both impermanent loss and mev at the same time.
00:14:20.686 - 00:15:31.030, Speaker A: So impermanent loss and mev is really one and the same when it comes to arbitrage. And yeah, this basically gets us to the limit of what we can minimize. And we already said sort of some of the stuff we can't minimize because it's crucial for a DeFi to function, liquidations, some amount of arbitrage at least. And what we can't minimize, we should try to democratize. And what democratize means is that it should be very easy for miners or stakers to find competitive transaction bundles or even entire block templates that can compete with even more advanced firms. So basically what we don't want is that extremely large financial firms from Wall Street merge with miners because this is the only way that they can extract the most mev. Like in theory, we want this block production, like the block templates to be traded on an open and permissionless market that's not centrally controlled.
00:15:31.030 - 00:16:19.910, Speaker A: Yeah, and the takeaways are sort of mev. Minimization and democratization are not an either or and they are both very important. So we should try to minimize as much mev as possible. And in fact, we are already seeing that, right? So we said that mev is a permissionless incentive and everyone just came to the conclusion, well, the miners are going to get everything in the long run, but it's simply not true. We have seen so many examples today of ways that we can prevent mev from going to miners. Like we can capture it on the peer to peer layer, we can capture it on the application layer and in some cases also on the protocol layer and then it doesn't get to the miners at all. Some of it will always go to minus because it's essential and others because it's very hard to prevent and that we should seek to democratize.
00:16:19.910 - 00:16:41.520, Speaker A: And yeah, because of this permissionless incentive, we see like huge free market competition right now in order to take back the mev that sort of miners were getting and give it back to the user and also claim it sort of or claim it as a project and share it with the user. So, yeah, thanks for watching.
00:16:43.010 - 00:16:48.540, Speaker B: Thank you Hasu for an amazing podcast. And next.
