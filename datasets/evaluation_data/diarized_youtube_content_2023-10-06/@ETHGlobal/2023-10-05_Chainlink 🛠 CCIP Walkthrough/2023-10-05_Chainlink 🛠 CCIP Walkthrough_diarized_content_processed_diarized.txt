00:00:07.290 - 00:00:10.410, Speaker A: Hi, I'm Richard, one of the developer advocates here at Chainlink Labs.
00:00:10.490 - 00:00:12.174, Speaker B: And today we're going to be taking.
00:00:12.212 - 00:01:05.146, Speaker A: A look at chainlink cross chain interoperability protocol, or CCIP. In this video, you'll learn more about what CCIP is, what it's capable of, and how you can use it. I'll also teach you how to use CCIP to transfer tokens cross chain, as well as how to use CCIP to send arbitrary data between smart contracts on different blockchains. So what is Chainlink CCIP? CCIP is a seamless protocol that allows you to create cross chain interoperability in your smart contracts. With CCIP, you can transfer assets and information across different blockchains. CCIP lets you leverage the strengths and benefits of different chains and collaborate with developers from different blockchain ecosystems, enabling you to provide additional features or products to those ecosystems. At its core, CCIP supports three main capabilities.
00:01:05.146 - 00:01:30.466, Speaker A: The first, arbitrary messaging. Wait, why is it called arbitrary? It just means that you can send any message you want as long as it's encoded in bytes. This allows you to call smart contract functions across chains. Second is token transfers. With these, you can transfer tokens between smart contracts or EOAS Think Wallets on different blockchains. And finally, programmable token transfers. These combine both messages and token transfers into a single transaction.
00:01:30.466 - 00:01:40.934, Speaker A: Think of it like providing a note along with the tokens on what you want to do with them, but enough to talk about what it is. Let's dive into the documentation and see how to use Chainlink CCIP.
00:01:41.062 - 00:02:00.878, Speaker B: All right, so here we are in the documentation. It's the place to start for any chainlink tutorial and anything you really need to know about Chainlink. This is the best place to start. We've got a new section here. If we scroll down just a little bit, we have CCIP right here. That's right. Chainlink Cross Chain interoperability protocol is in the documentation.
00:02:00.878 - 00:02:38.954, Speaker B: We'll head to the introduction and take a look around. We can see here an explanation of what CCIP is, how to get started and what we need. So we'll need some ETH on Sepolia, somatic on Mumbai, and some link tokens on Sepolia as well. If we head to Faucets Chain Link, you'll be able to get those. Now you'll need both polygon, Mumbai, as well as ethereum, and get those tokens from here. From here, we're going to go into the transfer token example as well, and the send arbitrary data example. We'll start with the transfer tokens.
00:02:38.954 - 00:03:06.086, Speaker B: So in this example, we'll be transferring tokens from a contract on sepulia into our EOA, or wallet on Mumbai. So how do we do that? What do we need to get started? We'll need to check and make sure that we have our funds, we have our wallet set up, and we understand remix again, we also need to acquire some test tokens for CCIP. We'll be using the B and M tokens, which are the burn and mint tokens. These are ERC, 20 tokens that are.
00:03:06.108 - 00:03:08.406, Speaker A: Available on the test networks that we.
00:03:08.428 - 00:03:10.246, Speaker B: Have CCIP available on.
00:03:10.348 - 00:03:12.358, Speaker A: When you transfer these tokens between testnet.
00:03:12.374 - 00:03:45.178, Speaker B: Blockchains, CCIP burns the tokens on the source chain and mints them on the destination chain. So let's take a look at that first and see how to do that. The contract for CCIP B M and L m both have a drip function. So if we go to the Support networks page here and we scroll down, we will see that we are using Ethereum testnets. We're using Sepolia. We're going to use the CCIP BNM token. So we'll need to go to this address here.
00:03:45.178 - 00:04:19.430, Speaker B: This will take us to ether scan. From here we'll click on Contract and we'll click on Write Contract. So this is when you'll see the Drip function. We'll need to connect our wallet. Once it's connected, we'll run the Drip function and it'll ask us for the address. So we'll copy our wallet address and paste it in here and we'll click Write. We'll confirm this transaction and we should see that transaction come through momentarily.
00:04:19.430 - 00:04:50.606, Speaker B: Let's go back to the documentation. So how do we get this token into our MetaMask wallet? Well, if we copy this token address and we click on MetaMask, you may be on the Activity tab. If you click on Tokens, you can then import a token here. If you paste in the Contract address, it'll probably populate this information for you. If it doesn't, it's right here. We have the token symbol as well as the decimals. We'll add this custom token and you probably have a balance of zero.
00:04:50.606 - 00:05:09.446, Speaker B: That's okay. We'll get those tokens here in a moment. We'll import those tokens. And now once they're imported, we can see that our token balance is here. So we look at our Activity. The Drip should be done and we should have a token balance of the CCIP BNM token. That's one that we'll be using to transfer.
00:05:09.446 - 00:05:41.940, Speaker B: All right, so we have our tokens added to MetaMask. Let's go back and continue with this tutorial. So in this tutorial, we'll be using this massive contract here. And the reason this contract is so big is because it basically does everything for us that we need for both the examples that we'll be looking at from transferring tokens. So we scroll down, all the way down. We should see an open and remix button. Let's go ahead and click on that.
00:05:41.940 - 00:06:09.706, Speaker B: And that'll take us to Remix. And here we can see Remix. And we have our token transfer contract. So this is a big contract that we use to send tokens from one blockchain to another. This contract is set up in a generic manner that we can use on any of our supported networks. We'll do a brief walkthrough. It's a pretty long contract, like I mentioned before, but it's very well documented, so you can see what every line does.
00:06:09.706 - 00:06:30.800, Speaker B: Let's walk through the basic flow. We've got our contract. We have our event for transfer tokens that we can emit. We have our constructor and again, I mentioned that this is set up in a generic manner. So we have our router and our link token address. Those will be chain specific. We do have modifiers for whitelisted chains, so you will need to whitelist a chain before you can send tokens to it.
00:06:30.800 - 00:07:20.252, Speaker B: And then we have our first function that we want to look at. This is the transfer tokens paying with link function. Now, one thing to keep in mind is that CCIP supports fee payments in link and in alternative Assets, which currently takes the form of native blockchain gas coins and their ERC 20 wrapped version. An automated onchain conversion mechanism is being worked on where fee payments in alternative assets are converted into link. The transfer token function here will take the destination chain, the receiver address, what the token address is, the amount of that token, and that's basically all that we need for this. When we look at the transfer tokens paying with the native fee, we see that sip in a very similar manner. Again, I'm being very brief in my explanation here because these are such well documented examples.
00:07:20.252 - 00:07:43.028, Speaker B: If you need to know what any of these lines are doing, they're documented for you and they explain all of that information. So let's head back to the documentation and look at how to actually use this contract. So we need to open this contract up in Remix. We've done that. We need to compile the contract if we head back to remix. If you're not familiar, this is the compile tab. I have mine set to autocompile.
00:07:43.028 - 00:08:19.300, Speaker B: If you don't see that checked and a green checkmark next to it, you can either turn it on or click that compile button and it'll do the compiling for you. You should have this green checkmark here, which means you're good to go. We'll need to deploy our contract now. To do this, we need to make sure, first of all, that we are on Ethereum Sepolia. This is something that is probably the trickiest part of dealing with CCIP is managing what network you're on when. So now, before we go too far, we need to make sure that we have both Sepolia and Mumbai set up. So let's go ahead and take a look at Mumbai real quick and see that we have our tokens.
00:08:19.300 - 00:08:54.320, Speaker B: We've set them up here. You can see CCIP B M. If you don't have that done, again, it's the same basic process as we did on Sepolia. You can go to the supported networks page here and you can scroll down to Polygon Mumbai and you can add the supported tokens. Remember, the way to do that is you go into MetaMask tokens, import tokens, you put the contract address, symbol and decimals and add that token. You'll want to do that before you go any further because that way you can see when those tokens actually get transferred into your wallet. All right, let's head back to the documentation.
00:08:54.320 - 00:09:23.954, Speaker B: We've got our MetaMask set up. We're not on Sepolia. Let's make sure we are on the right one again, like I said, that's the hardest part about CCIP, in my opinion, is just keeping track of what network you're on. We'll need to open Remix and go to Deploy and Run. And from there, we'll need to interact with our injected provider for MetaMask. And we'll need to add the router so we can go ahead and copy that now. And by clicking on the Copy button, we'll head to Remix.
00:09:23.954 - 00:09:44.430, Speaker B: We'll go to our Deploy tab. I'll change the injected provider to MetaMask. That takes our MetaMask wallet and puts it into Remix. We'll expand by clicking the drop down here. It'll add our router address here. And then we'll also need to add the link token address. Now remember, these are specific to Zapolia.
00:09:44.430 - 00:10:20.026, Speaker B: So we've got our link token address and we've got our router address. We'll go ahead and click Transact, confirm this transaction, and once that's confirmed, we should see our deployed contract down here. All right, so it's been confirmed. We've got our deployed contract with all of our functions in it here. What's next? We've got our deployed contract. We need to fund our contract with CCIP BNM tokens. In this case, we'll be doing zero zero two of the tokens, but you can do whatever you like.
00:10:20.026 - 00:11:02.380, Speaker B: So we've got our contract address here. We'll copy that, we'll open up MetaMask, we'll go to the Send tab, we'll put our contract address, we'll change this to be the CCIP BNM tokens, and we'll send zero zero two tokens to our contract. Click Next, confirm this transaction, and we'll wait for this to complete. All right, our transaction has completed. Our contract has a balance of tokens. Now, to transfer, we'll need to enable our contract transfer those tokens to Polygon Mumbai. We'll copy the chain selector address here.
00:11:02.380 - 00:11:42.962, Speaker B: If you wanted to use a different chain, you could also go to the Supported Networks page and you can see the selector addresses here. For example, for ethereum mainnet. So we'll copy our chain selector though for Sepolia. But back to Remix, we'll need to whitelist the destination chain. Paste that chain selector in here, and we'll click Transact and confirm this transaction as well. Once this transaction is complete, we should be able to transfer tokens and pay in link. In order to pay in link, we'll need to fund our contract though with some link tokens.
00:11:42.962 - 00:12:06.030, Speaker B: So in the same basic process that we did with funding it for the CCIP BNM tokens, we'll get our contract address one more time. We'll go to MetaMask, go to Send, put in our contract address here. This time we'll be sending link. Give it zero one link. Click next, confirm this transaction. That should be enough for this transaction. We'll wait for this transaction to be confirmed.
00:12:06.030 - 00:12:47.426, Speaker B: And now our contract has both link tokens and CCIP BNM tokens, so we can pay for and transfer those tokens. We'll open up the transfer token, pay in link function and we've got some arguments here. So the first thing is it will copy this first argument for the destination chain selector. We'll go back into remix. This is going to be a bit of back and forth between the docs and this page. So we want to transfer tokens and pay in link, put our destination chain selector in here. We'll get the receiver, which is going to be my wallet address.
00:12:47.426 - 00:13:16.060, Speaker B: It's going to be the same wallet address on both polygon and Sepolia. So we're telling it the polygon chain. We're telling it that it's my wallet address or EOA. We'll need the token that we want to transfer. That's going to be the address of the CCIP BNM token. We'll get that from the documentation and the amount that we want to transfer. Remember, we gave it two BNM tokens and we'll be sending zero zero one along.
00:13:16.060 - 00:14:02.058, Speaker B: So paste that in here and we'll click transact and confirm this transaction. Now once this is confirmed, we can switch our wallet over to Polygon Mumbai and we can look at our tokens. You'll notice I already have zero zero one CCIP BNM in here. This is from previous time that I ran this example. So we're looking to change that one to a two when we send an additional point one. But how do we see this transaction? If we go back to our Sepolio wallet, we can see our activity, and we can see our contract that we interacted with here. Now, if we click on the copy transaction ID, we'll need this in just a moment.
00:14:02.058 - 00:14:33.878, Speaker B: If we go back to the documentation, it'll let you know that there is a CCIP Explorer. Basically, this is an Explorer, but for crosschain interactions. If we paste our transaction ID in here and press return, we'll see our transaction details. And I'll tell you, this can take a little bit. So we'll come back in a few moments. Once this is completed, we'll watch the status here, and that's where we'll see the progress being made in this transaction. All right.
00:14:33.878 - 00:15:11.030, Speaker B: So our status is now success. That means our transaction has gone through. We've been able to transfer our tokens from Ethereum Sepolia to Polygon Mumbai. If we take a look at our wallet now and we take a look at the tokens we'll notice that I'm still connected to Sepolia so I need to change to Mumbai. Here we can see the CCIP BNM token amount and it's changed from zero zero one to zero zero two. We have successfully sent tokens across chains. That's awesome.
00:15:11.030 - 00:15:47.514, Speaker B: Let's take a look at how we can do this same process but pay with a native token so again, this process is going to be basically the same we'll need to change our network back to Sepolia. We've funded our contract this time. We'll need to fund it with ETH, though. So we'll transfer zero one to our contract, back to Remix. We'll copy the address of our transformer contract. We'll send it some ETH. So we paste the address in here.
00:15:47.514 - 00:16:13.624, Speaker B: We'll send it zero one ETH and confirm. We'll wait for this transaction to be finalized. All right, so our contract now has some ETH that isn't sent to it. We'll open up the transfer and pay native. We'll take a look at the documentation one more time. Again, our destination chain is going to be the same. The receiver is going to be the same.
00:16:13.624 - 00:16:44.076, Speaker B: The token will be the same. The amounts will also be the same. So we'll head back to Remix. We can just copy that information from the send it with link token above. So we'll copy these values in here. We'll click on Transact and we will confirm this transaction that's been submitted. We can either use our wallet or down here in Remix.
00:16:44.076 - 00:17:15.420, Speaker B: I'll open up this menu, the debug menu. We can see the transaction hash here. We'll copy this and we'll head back to the Explorer. We'll paste in our transaction here, press return, and we'll see once again waiting for finality on this transaction as well. So if we go to our wallet, change to Mumbai and take a look at our tokens, you can go. Remember that we have zero zero two CCIP BNM. That should increase to zero zero three once this transaction has finalized.
00:17:15.420 - 00:17:42.832, Speaker B: All right? So you can see that we have success now on our transaction. If we take a look at our wallet, we can also see that our CCIP BNM has increased to zero zero three. So that's it. We've been able to transfer tokens from Sepolia to Mumbai using CCIP, paying in both native token and link. That's really powerful. We've been able to do cross chain token transfers with CCIP. Let's take a look at the documentation.
00:17:42.832 - 00:18:20.796, Speaker B: And one more example here. Let's send data from Sepolia to Mumbai. The process will be very similar. We're going to take this contract and this time, though, we'll be deploying it on both Sepolia and Mumbai. And we'll be doing the example of paying with link tokens. Not both examples, because, as we've seen, using native gas is a very similar process as using link tokens. This one again will have the added challenge of needing to deploy your contract in two different places and keeping track of where they're deployed and which wallet you're on is kind of a challenge.
00:18:20.796 - 00:18:54.504, Speaker B: So let's scroll through this contract and at the bottom, we will once again see our Open and Remix button. We'll click on that and I'm going to go ahead and close the Explorer, the Mint functionality for our CCIP BNM token and the other remix that we were using just to keep things simple. All right, so here we have our contract again. And once again, this contract is documented amazingly well. Walk through the basics of it. We've got our contract. We're calling this one messenger.
00:18:54.504 - 00:19:23.612, Speaker B: This contract is both the sender and receiver of messages. So you can see here we have two events. One for the message being sent, one for the message being received. Now, this contract is set up so that it is basically agnostic when it comes to what chain you're deploying on and whether you're the sender or receiver. That's why it's such a large contract. You could reduce the amount of code in here if you wanted. One that was specifically just a sender and another contract that was specifically just a receiver.
00:19:23.612 - 00:19:47.656, Speaker B: So I'm back to the documentation. When you need to do Is, you need to compile it again, just like we did with the other one. And we'll need to make sure that we are on Sepolia. And this is where things start to get a little bit tricky when it comes to managing both networks, because we need to deploy this on Mumbai as well. I'll do that by opening a separate window in a private browser mode. Just to keep things separate there. We'll start with Zapolia.
00:19:47.656 - 00:20:11.460, Speaker B: So in Remix, we'll need to add Sepolia's router address and the link contract address. So we'll head back to Remix. We'll go through the deploy tab. We'll make sure that we have our injected provider selected, and we will deploy. So we have our router address here, head back to the documentation. We'll go ahead and grab the link token address as well. Paste that in here and we'll click transact.
00:20:11.460 - 00:21:00.020, Speaker B: This will deploy our smart contract for us on Sepolia. So now that we have this contract deployed on Sepolia, what's next? Well, we'll need to enable our contract to send messages to Mumbai. So we'll whitelist the destination chain, we'll copy our destination chain selector here. We'll head back to Remix. In our deployed contract here, we'll need to whitelist the destination chain. We'll paste in our chain selector, click transact, confirm this, and after that, we will need to deploy our contract on Mumbai. So wait for this transaction to be confirmed.
00:21:00.020 - 00:21:37.300, Speaker B: All right, transaction is confirmed. We've got our messenger sender contract deployed on Sepolia, and we whitelisted the destination chain of Mumbai. Now we need to deploy on Mumbai. Easiest way I've found to do this and keep track of things is we'll copy this link here and open a Remix link in a new browser window. Again, I'm doing a private window here in Brave. In my mind, this makes things really easy because in Brave, it makes it purple. And that just kind of keeps me in the mindset of purple polygon.
00:21:37.300 - 00:22:06.944, Speaker B: And we're good to go. Put the link to Remix in here. We'll load all of this up. This time we'll need to go to the compiler, turn on the autocompile or click the compile button. And then we'll need to deploy this with the injected MetaMask provider. We need to remember to change our network to Mumbai. That is key here.
00:22:06.944 - 00:22:43.504, Speaker B: Like I said, that's probably the hardest part. So we'll head back to the documentation, scroll back to the part about deploying on Mumbai. We've got to open remix. We'll need to put in the router address again. Remember that's chain specific, expand this. We'll add our router address and we'll go and get the link token address. We'll add it here and we'll click transact again, making sure that we are on Mumbai, confirm our transaction here, wait for this to deploy.
00:22:43.504 - 00:23:15.620, Speaker B: All right, so our transaction has gone through. Our contract is deployed. Head back to the documentation. You'll now need to whitelist the source chain. So in our contract, we're going to be sending messages and we're whitelisting the destination. In this contract, we're whitelisting the source chain. So we need to whitelist the source chain here, run this transaction confirm.
00:23:15.620 - 00:23:44.750, Speaker B: We'll also need to enable the actual sending contract. So this will be the contract address from Sepolia. So we'll grab that from this window. We'll use the contract address here. We'll come back. We can see that our whitelist the source chain has gone through. We also need to whitelist the sender, paste that value in here, transact, confirm this transaction again.
00:23:44.750 - 00:24:24.564, Speaker B: All right, so at this point, we've set up Sepolia to send the message. We've set up Polygon and Buy to receive the message. And we should be able to use the send function to send a message between the two. So again, we're paying with link. So first we'll need to give our Sepolia contract some link token. We'll head to the Sepolia version of the contract, grab its address, we'll switch our to Polio. And we need to send some link to our contract.
00:24:24.564 - 00:24:59.936, Speaker B: So we'll grab that address here, go into MetaMask send. We'll paste in the contract address here. We'll send it some link, one link tokens, confirm this transaction and wait for it to be completed. All right, our contract has some link tokens now. And now we can run the send message pay link function. So we'll need our destination chain value. Remember, these selectors are chain dependent.
00:24:59.936 - 00:25:31.952, Speaker B: So if you look at the supported networks page and determine which one you need for a specific use case, you will need to put a different value in there. So we'll need that. We'll need our receiver contract address, which is going to be the address of our receiver contract. And then we'll need the text. So we'll send a message and pay with link paste in our chain selector here. We'll paste in the address from the other window. We'll grab our contract address from Polygon Mumbai, paste that in here.
00:25:31.952 - 00:25:58.730, Speaker B: And then we'll say hello world. And now we can click transact, confirm this transaction. But before this goes through, let's take a quick look at our contract here. We'll use this get last message received details. You can see the ID in the string. It's empty now. So in Polygon, we have no information.
00:25:58.730 - 00:26:18.316, Speaker B: And first we need to switch over to Polygon. Like I mentioned, this is the hardest part. I forgot to switch to Polygon. So we use Polygon, we click on this get latest receive message, and we see this blank. We don't have one right now. So this is where we'll be able to see our string of text when it comes from Sepolia. But we need to watch it.
00:26:18.316 - 00:26:53.920, Speaker B: So we use the transaction ID here. We'll go back to the documentation, open up the CCIP explorer, we'll put our transaction ID in there and press return. And similarly, we'll see that transaction is waiting for finality. So this is where we'll wait until this completes. And then we should be able to see our message cross chain. So our transaction has completed successfully. Let's take a look at Polygon, Mumbai version of our contract.
00:26:53.920 - 00:27:25.836, Speaker B: Remember when we got the last received message? Previously, our string was blank. We sent hello, world. If we check it now, we can see hello, world. And we can see our message ID here. So we have taken a string of text, a message, and we have sent it from Sepolia to Mumbai. Now, this doesn't just have to be a text message like this. It could be a function call or something like that.
00:27:25.836 - 00:27:30.348, Speaker B: Remember, when the message is received, you can do what you like with it.
00:27:30.434 - 00:27:51.284, Speaker A: All right? In this tutorial, you learned what CCIP is a protocol that allows you to create cross chain interoperability. In your smart contract, you've gotten some hands on experience with CCIP and learned how it works. From here, the sky's the limit on what you can create. I can't wait to see what you build by leveraging the power of connecting blockchain ecosystems. Thanks for watching, and I'll catch you.
00:27:51.402 - 00:27:52.050, Speaker B: In the next one.
