00:00:14.490 - 00:00:31.270, Speaker A: Cool. I think we're ready. Thank you guys for coming. Seeing some familiar faces here. So this workshop is going to be on AP wine, on building derivatives on yield. And it's going to be split into three different parts. First part is going to be presenting the protocol itself.
00:00:31.270 - 00:01:15.466, Speaker A: Then we're going to see how do we use AP One, using our SDK that we implemented. And then there's going to be an outro. So first off, what is AP One? Building derivatives on yield. What does that mean? We are one of the first protocols to enable yield tokenization. So basically getting your yield ahead of time. First we need to understand why do we do this? If you were here during the DFI summer of 2020, you may have noticed that there was extremely volatile yield, which is still the case today, right? You're seeing insane three digits APIs that are simply not sustainable. So this was the kind of issue that we noticed and we said, okay, there's no mean right now to hedge your risk on this APY volatility.
00:01:15.466 - 00:01:58.830, Speaker A: So how do we enable this? This is where APY comes in. We're a yield tokenization platform. So basically this is a new primitive in DeFi that enables you to split your deposit and your future yield into two different tokens that I'm going to describe a little bit later on. This enables you to buy, sell, hedge and trade your future yield in advance. Now we get into the more technical part for you hackers. How does it work? First you get your interest bearing asset. So this is like Adai, if you're working with Ave, simply generating yield each second, right? So this is an interest bearing asset because it generates yield.
00:01:58.830 - 00:02:27.942, Speaker A: You simply are going to deposit this into APY. And APY is going to split that token into two different ones. The first one is the principal token. The principal token represents your initial deposit, the value of the initial deposit at the time that you deposited on the platform. The second one, and this is where it gets very interesting, is the future yield token. So this is the primitive that we came up with. The future yield token is going to represent all the yield generated by the initial deposit.
00:02:27.942 - 00:03:20.334, Speaker A: So let's say, okay, who has some funds on Ave right now? Are you farming on any farms? Are you familiar with DFI? Are you farming any strategies? Let's say, right, 5% on USDC, right? That's pretty reasonable. Now this is going to be, if you deposit $100 on Ave, you're going to get a PT that represents your $100 plus the FYT that is going to represent all the yield generated by this $100. So at the end of the year, if you're getting 5%, this FYT is going to be worth $5. That's how it works. Once you get this, you can build amazing strategies with the AMM that we built. So basically the FYT and the PT can be freely traded at any time on the APY automated market maker, just like if you were on Uniswap. So if you sell your FYT, you basically get your yield ahead of time.
00:03:20.334 - 00:04:04.246, Speaker A: That's how it works. So our AP One AMM we iterated on a few months and we found out the best design that we can trade between PT FYT and underlying. I'm going to show why it's very necessary in our case and how you can build very amazing strategies on top of this AMM. Now, here are a few strategies that you could build at this hackathon and that could be very interesting to make. First is the PT Trading. So this is remember that the PT is the value of the initial deposit. So you know that at the end of each period, like at the end of each year, one PT is always going to be equal to one die or whatever you deposited.
00:04:04.246 - 00:04:35.330, Speaker A: And using this very simple fact in the discount that is on our automated market maker, you can basically buy PT at a discount. So let's say you buy a PT for 0.9 die instead of one die. You basically made 10% APY at a fixed rate because you know for sure at the end of the year it's going to be a one to one ratio. You have also yield sections. Very interesting strategies to basically compound your yield ahead of time. This is something that's only possible with future yield.
00:04:35.330 - 00:05:25.714, Speaker A: Now let's go to today's workshop. Now that we've presented the protocol a little bit, what we're going to build today and what you can also improve on your own at the hackathon is going to be fixed rate by selling future yield. So how do you do this with AP One leverage yield tokenization and the AP One AMM to secure a fixed rate on future yield? If you want to follow along, which I really recommend you to do, so you're going to need node JS and yarn installed on your computer as well as cloning the repository. So the repository is here, GitHub.com Uludevineworkshop if you want to clone it and follow along, it's very simple. You just need to copy the environment file and then simply install the dependencies. Once you're done with this.
00:05:25.714 - 00:05:56.046, Speaker A: And this is what I'm going to do right now with you, you can basically start a node. So this is starting a local blockchain, like a fork of mainnet, which is what we're going to build on. And then follow the steps one to five. So yarn step one five. I'm going to show you how this works right now. But it's been made to be very easy to follow along. So first you're going to want to go into the directory and then just install all the dependencies here, I already did it, no need to do so.
00:05:56.046 - 00:06:23.680, Speaker A: And then you just want to start your local blockchain. So run node, start node. And this is using hard hat if you're not using it already. It's very, very useful for anyone hacking on Ethereum. All right, we got our local blockchain set up now. Let's go to the workshop. I'm going to navigate to the workshop.
00:06:23.680 - 00:07:02.378, Speaker A: If you have any questions on the way, please feel free to ask and interrupt any time. We're going to have some time for questions afterwards, but feel free to interrupt. All right, this is the preparation for the step one. So the step one is going to be the creation of the SDK. Basically, once you install the dependency, the package on NPM is at Apyine SDK. Once you install this, you get access to the protocol itself, plus the AMM very easily. The first step is going to be creation of the SDK.
00:07:02.378 - 00:07:25.078, Speaker A: So SDK is equal to new APY. SDK. And then you want to provide your provider signer and the network. So here it's going to be mainnet because we're building on a mainnet fork. So how does it look? There are multiple files here. So in the SRC folder you get step one, step two, step three, step four, and step five. We're going to go through these.
00:07:25.078 - 00:07:43.150, Speaker A: So first step is what I just described. Create the SDK. Let's see how it looks. So I just run this very simply with yarn. This is how you can follow along very simply. And we're done. We initialized our SDK on mainnet in just a few lines.
00:07:43.150 - 00:08:17.014, Speaker A: Now the second step is going to be retrieving all the futures. Now, something that is a little bit more technical is that AP wine on main. Net and on polygon, we're currently releasing on two platforms are currently working with 90 day futures. So instead of one year, like I described earlier, it actually works with three months futures. This is a middle ground between Dgen yield and more stable yields. So this is what we went with. All right, so how to get the basic information of all the future vaults? By the way, what we call the future is a future vault.
00:08:17.014 - 00:08:48.514, Speaker A: So it's basically this smart contract that enables the tokenization of this future yield. You're simply going to want to use SDK, fetch all future vaults. And this is going to give you a promise. So just need to wait for it. If you're familiar with TypeScript, you're just going to want to fetch all the addresses. And then with all these addresses, you can get more detailed information with fetch all future aggregate. So this is going to give you like, the duration, which token does it represent and so on.
00:08:48.514 - 00:09:19.298, Speaker A: We're going to see this right now. How does it look this time? Step two. So here we fetch the future aggregate. You can also pass a specific address, if you're interested, into this specific vault. You can just get all the information for this vault. So if we do it step two, and this is going to load a little bit simply because we just started our local blockchain, so it needs to fetch all the information from the main net. And here we can see that we have many different futures.
00:09:19.298 - 00:09:43.622, Speaker A: So this was actually in the past because we fetched from a specific block. In the past. We have xsdt staked ETH with Lido Finance. We also have ave aUSDT. So this is very interesting. If you want to do something that plugs onto Ave or does something with lens and then on top of one inch, like, you can get super creative with this. We have also Sushi wyurn I know they're sponsoring as well.
00:09:43.622 - 00:10:10.266, Speaker A: So be on the lookout. So many different IBTS interest bearing tokens that you can tokenize on APY. And then you have the end date every time. Now, step three is going to be getting the basic Apr. So this is going to be by buying the PT like I previously described. So basically buying PT at a discount and making sure that the ratio is one to one. So you basically secured a fixed rate.
00:10:10.266 - 00:10:52.860, Speaker A: This is not yield in advance, it's just fixed rate, which is another thing that you can do with APY. With this, we just want to get SDK fetch spot price, so a specific vault address and then from into so from into is going to be the two tokens that you want to switch. For example, here it's going to be underlying. So underlying asset is Dai, for instance. And on the other hand, two two is going to be PT. All right, let's try this. How does it look with the basic Apr we can currently get at the time of creation of the workshop, we can currently get 35% on the stake e future.
00:10:52.860 - 00:11:49.574, Speaker A: Have you ever seen 35% on a staked ETH? And anyone? All right, so this is something very interesting that you can do with APY making optimized yield strategies. Now, what if I told you that you can optimize this even further? One problem with this strategy is that you are basically limited to the amount of liquidity on the platform because you are simply using your ETH to buy PT. So basically using only one pair of the AMM. But like I previously described, there's actually two pairs you can switch between three different assets. So this is where you can take full leverage of APY's entire liquidity and yield tokenization by simply what we're going to do right now is tokenizing our stake ETH. So depositing on APY, getting Ptfyt, like I said before, and then selling FYT, not for ETH but for PT. So it's basically going to go through an entire route.
00:11:49.574 - 00:12:31.162, Speaker A: And why do we do this? If we sell our FYT for ETH, this is yield in advance because you get ETH, which is liquid, right? You can use it for something else, reinvest it into USDC or whatever. Now, if we sell into ETH and we also buy PT at a discount, we just maximized our rate. And this is where it gets super interesting and this is where you can get creative. So let's try that. We're going to tokenize our stake ETH. So basically deposit on Lido and then on APY, which is going to give you two tokens and then doing the swap of the FYT. First step this, you can see the source code, but it's very simple.
00:12:31.162 - 00:13:00.034, Speaker A: You just need to call SDK deposit, very simple to use with the corresponding future vault that you're interested in. So if we try this, we can see that. So we start with a few ETH. Actually, let me see here. We start with amount to tokenize is going to be ten ETH. So we're playing with ten ETH here and we get 9.93 PT and 9.93
00:13:00.034 - 00:13:29.190, Speaker A: FYT. Now what happens if we sell our FYT for PT? Like I said before, this can be done using the SDK again. So you can do anything, tokenize swap, anything you can think of, SDK swap in. So you pass the AMM and then you go from FYT to PT with your amount. It can't get any more simpler. This is going to do the automatic routing on the smart contract side. And if you want, you can also fiddle with the smart contract.
00:13:29.190 - 00:14:15.340, Speaker A: This is for JavaScript, but I'm going to present all the smart contracts later on the repository so you can have a look at the code as well. So this is going to do FYT, PT and then ETH automatically. It gives a similar result, like I said before, but lower slippage because we use the full liquidity and much bigger trades can be accomplished with this. So let's say if you can't get ten k worth of ETH to work with this, with the old strategy, you can actually get ten times better results with this one. And it's very composable. You can use FYT, PT, ETH in any way you want. So if we try this method, we're going to go to the last step here, step five.
00:14:15.340 - 00:14:50.646, Speaker A: So this is going to do a lot of stuff. Basically. I don't know if you noticed, but at every step it does. The previous step, it just repeats, right? So the first step was fetching all the futures, computing the basic Apr. Then we tokenize our future yield and then we finally sell our future yield for PT, which is going to maximize our rate. And by doing this we can see that we just got ten point 36 PT. Now what does that mean? Anybody has a clue? Like what does that mean? It just means that very simple.
00:14:50.646 - 00:15:27.266, Speaker A: As I said before, one PT will always be equal to one ETH at the end of the period. So at the end of the when we made this workshop, it's like one month later or two months later, depending on the situation. So this means that annually, if you annualize this rate, we just got zero point 36 profit. This means that you can get 34% Apr on ETH, which much bigger liquidity than what I described previously. So this strategy is very optimized. It's something that is not currently done on the platform. So this could very well be an entire hackathon project.
00:15:27.266 - 00:16:12.322, Speaker A: You can build your front end and be like, okay, what do we do? We maximize your Apr using any asset you want. In reality, any asset that AP One supports, which you can see with the SDK right now, is your turn. I hope that was clear. Of course, creative strategies always get very rewarded, whether it be through arbitrage natural economic rewards, just like you're seeing on Uniswap or anything. So, for example, if the APY is very low on API and the APY is very high on the platform itself, you better buy yield because you know it's going to go up. So this is one of the things that you may want to think about. You can also build trading, bots, leverage yield, as I described before.
00:16:12.322 - 00:16:37.266, Speaker A: You can sell your yield in advance and then reinvest it. So that's basically what we're doing here. It can get pretty crazy. And what's even more crazy is the prizes that we're giving out this weekend. I'm going to enumerate these. The first prize is going to get $4,000 for the best yield strategies. On top of APY, you can also plug with any other protocol.
00:16:37.266 - 00:17:00.910, Speaker A: For example, if you plug with Ave or any yield generating platform such as Wiren as well, you're eligible for this. It can be anything from vaults, bots, automated strategies. You can build anything you can think of. The second one is going to be 2.5K for the best integration with another protocol. So we're actually incentivizing you to try to work out a way to be plugging onto something else. Nap, wine.
00:17:00.910 - 00:17:25.260, Speaker A: And the last one is going to be 1.5K for the most creative strategies. That's an open subject. There's no really recommendations for this, so please surprise us with any strategies that you can think of. And that's it for now. I hope this workshop was clear enough. I'm also here to answer all your questions during the weekend.
00:17:25.260 - 00:17:50.616, Speaker A: The AP One team will be here to help as well, so I hope you like it. We're also hiring, so please, at the end of the hackathon, if you really like AP One, and we will also love to work with you guys. So please get in touch. We will be in touch for sure. Thank you all for coming. Thank you for listening. We're going to get into the questions now.
00:17:50.616 - 00:18:24.564, Speaker A: Yeah, please. Why would the PT be discounted? That's a very good question. And actually it makes sense when you think about it, because if you could buy PT at a one to one ratio, you could buy one PT with one ETH, then what is the FYT for? Right, because the FYT is basically containing the future yield. So you would basically be selling your FYT for a loss. Right. Let me clear this up. You work with 90 days futures, right.
00:18:24.564 - 00:18:55.792, Speaker A: So at the beginning of the period when you deposit on APY, let's say you deposit 100 ETH, so you get 100 PT, 100 FYT, right. If you were able to sell your PT for 100 E, then the person buying it would not be very smart because basically you just kept the future yield also. Right. So it's not a neutral ecosystem. Basically. Just remember that always one PT plus one FYT is always going to be able to withdraw the initial deposit. And that's how it works.
00:18:55.792 - 00:19:29.540, Speaker A: That's how AP wine stays very composable and very flexible. PT plus FYT is equal to the initial thing, always. So you're never locked out? Yeah, the IBT. So if it's like one staked ETH, ETH is not an IBT because it's not generating yield, but staked ETH is because it's generating yield. Just like Ave. You put 100 die into Ave, it gives you 100 a die. And then this a die balance keeps increasing on your wallet.
00:19:29.540 - 00:19:34.136, Speaker A: This is an interest bearing token. Yeah.
00:19:34.238 - 00:19:36.410, Speaker B: Why someone buy?
00:19:41.440 - 00:20:11.374, Speaker A: Because they know for sure that at the end of the period, and that's determined by the smart contract, it's always going to be a one to one ratio. So if you buy PT at 0.9 E, you know that this 0.9 E is going to be worth one ETH. So you basically bought the rate. And how does it work? On the other hand, why would someone sell it at that price? Yeah. So there's many different things.
00:20:11.374 - 00:20:42.742, Speaker A: But getting out of APY, you can do it in two different ways. Either burn your PT and your FYT, so destroy them to get your initial deposit. Right. So if you get, like, one PT, one FYT, you burn these two, and you get back one staked ETH. This is the first way. Now, what if you already sold your FYT so you don't have the FYT anymore? How do you get out? There's only one way selling your PT. And this is why you need to sell it at a discount for the other people buying it, because you already sold the future yield.
00:20:42.742 - 00:21:01.250, Speaker A: Right. So it's worth less. Right. Because if it expires in three months, for example, and you just sold the yield, it means that it's worth less, because in three months, it's going to be the same value. There's, like, the time factor going into it. That makes sense. Yeah.
00:21:01.440 - 00:21:08.500, Speaker B: Can Fyts be discounted, and will buying them be at a rate?
00:21:10.950 - 00:21:13.234, Speaker A: Can fyts be discounted? Yeah.
00:21:13.272 - 00:21:23.350, Speaker B: I mean, are they usually discounted on the AMM? And is the arbitrage thing the same as PT, or is it more risky?
00:21:25.530 - 00:21:44.910, Speaker A: Good one. Yeah. The Ptfyt pair on the AMM has been made so that the weights are changing during the period, so it makes sure that there is no impermanent loss on the liquidity providers. And that's how this special sauce that we have makes sure that the discount at any time is the optimal.
00:21:49.650 - 00:21:55.970, Speaker B: Would it be interesting to do arbitrage, like, copy?
00:21:57.910 - 00:22:20.060, Speaker A: Yeah, exactly. It's actually very interesting to do both strategies. So arbitrage on PT and Arbitrage on FYT are two strategies that can be very useful now. Yeah, I think we're good with this. So thank you again for coming. I hope to talk with you during the hackathon and and see what you can come up with. Cool, thanks.
00:22:20.060 - 00:22:31.030, Speaker A: All right, back to workload.
