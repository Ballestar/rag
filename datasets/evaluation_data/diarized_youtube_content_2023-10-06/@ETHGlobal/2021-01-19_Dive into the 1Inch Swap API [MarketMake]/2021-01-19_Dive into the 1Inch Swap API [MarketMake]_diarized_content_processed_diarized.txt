00:00:11.850 - 00:00:25.950, Speaker A: Great. Thank you everyone for joining. We have Karil from the One inch team who's going to lead us on a deep dive into the One inch swap API. So I'll let you take it away. Karil?
00:00:26.690 - 00:00:31.326, Speaker B: Yeah. Do we need to wait other people or can I start?
00:00:31.508 - 00:00:39.640, Speaker A: Let's get started and just a reminder to everyone, if you have any questions for Karil, don't hesitate to unmute yourself and just jump in.
00:00:40.250 - 00:01:52.890, Speaker B: Okay, great. Hello everyone, my name is Kirill, I'm the lead engineer in Blockchain Sphere. In One inch I'm doing pathfinder algorithm, smart contracts, front end and lots of work in one inch and today I'm going to teach you how to work with the one inch API. The One inch API allows you to get quotes, swap quotes and receive the call data. The next you need to pass to the blockchain and execute the swap. We have the documentation that I will send you to the chat later and also we have the Swagger API that allows you to trigger some methods and try it in UI. Let's start the first method that I want to show you, it's a quote method.
00:01:52.890 - 00:03:22.806, Speaker B: This method allows you to get the swap quote. For example you want to swap from token for example it'll be Ethereum. Have a nice shortcuts here and for example I want to swap ethereum to Dai and we just need to pass the contract tokens addresses in the fields and enter the amount in way. For example, for one ethereum this is free required options to get quotes and let's look the response here we are. Here you can see that the best route of exchange one ethereum to die goes through uniswap. And we got this amount of die in. Vague 1360 and if we increase the source amount for example for 100 ethereum we will get interesting splits and path we swap from wrap tether to private market maker.
00:03:22.806 - 00:06:02.510, Speaker B: Next we split the received amount between shell and curve exchanges and next we do another order, this private market maker and we got the best price it's about this amount of die. Yeah, it's really small little slippage and let's look at other parameters. If you want to integrate the API and get rewarded for using it you can set your custom fee for example 1% and this percent will go to your wallet address during the swap. This amount you will receive from the source token amount you'll get for example ten Ethereum from this swap, one Ethereum from this swap and user will exchange 90 ethereum and also you can choose which protocols you want to use during the swap you can make this field empty and by default we use all protocols. But if you want to swap on the specific protocol for example through Kyber, you need to set the kyber and your path will find the best swap path between kyber reserves and also you can set the gas price field. Our pathfinder taking into gas account costs and we find the best rates using gas price also. For example, if gas price today will be less than hundreds of GVA, the swap off will be really interesting and we may have a lot of swaps in one swap, but today gas price is very high and you can choose your gas price to find the best prices and don't pay a lot for gas.
00:06:02.510 - 00:07:16.710, Speaker B: Another parameter, it's a complexity level. Our pathfinder can split your path between different connector tokens. For example, if you want to choose two connector tokens for example ethereum USDC, USDT and next to die you need to set two here if you want, just make a direct swap. For example with Kyber you can just set zero to the complexity level and you will have a direct swap. Also you can set up to five connector tokens, you can use any connector token that you want. By default it's about ten that contain of ethereum wrapped ethereum, die, USDC, USDT wrapped bitcoin and other popular cryptocurrencies. And what else interesting here also you can set up parameter parts.
00:07:16.710 - 00:08:27.530, Speaker B: This parameter can divide your source amount by different parts. For example, ten parts, your ten ethereum will split it by one, one, et cetera. And we can find the best path with splits and split your source token amount as we see in the last response and also the same four main road parts. This parameter allow you to split between different paths. This parameter split in one path between different exchanges and this parameter can split your source token amount between different paths between the different combinations of exchanges. And let's look how to get the swap call data. Here's the swap method.
00:08:27.530 - 00:09:45.560, Speaker B: And you also need to send to the API token addresses, source token amount and the next two required parameters. It's from address and slippage from Address. This is the address from which the call will be executed. For example, if you're doing it from your wallet, you need to set here your wallet if you want to build some Arbitrage bot or something else, that iterate. Through another smart contract, you need to set here your smart contract address to estimate the transaction with this amount of error I will use zero address because this address has enough ethereum on his balance. And next we need to set slippage. It's a percent that protects you from front training attack.
00:09:45.560 - 00:11:51.830, Speaker B: And also if market move fast, the price may change during the swap execution and you may receive less than you received from quad. And if you want to protect you from losses, you can set here the percent with your okay and let's try to receive the swap call data. Yes, intakes property. In the response you can see all required fields for ethereum transaction that you just need to get and sign with your private key. It's a from address to it's one inch contract address and call data of swap and also provided value gas price by default it's fast gas price and estimated gas. If you build something with another contract, if you proxy this call through another contract, you need that I said before to set your contract address to the from address field. And also don't forget to disable estimate because if from address doesn't have enough funds or doesn't have approvals, then you will receive an error.
00:11:51.830 - 00:13:47.950, Speaker B: And if you want not to estimate the transaction, you just need to set this flag to true and let's look to other options. You can set protocols as in quad method also for merchants. If you would like to build a merchant processor, you can use this field of the destination receiver. You can set another wallet that will receive funds after their swap. Also you can set the referral address that will receive fees from swap your wallet address for example and what else? Also our API supports cheap burning Chigas token allows you to reduce transaction costs and with our current high gas price, it's really good option to reduce your gas costs. And if you use cheat token, the gas costs will be reduced up to 43% and to use this option, you need to have approved for the one inch contract approve of cheat token and also you need to have some cheat tokens on your from address. What else? Also, API supports partial fill mechanism.
00:13:47.950 - 00:15:20.250, Speaker B: This mechanism is unique on the market. And if the market have high volatility, the market move fast. You can set this flag to true and if you need to buy some token or sell some token very fast and you really worry that price drops fast on another way, you can set this flag to true and your transaction will be executed partially. For example, one road will failed and you'll receive back your funds and another road will execute it. And for example, if you want to swap 100 Ethereum to die and you have the split 50 50, the swap will execute the transaction execution with 50% of Ethereum to die and another 50% will back to your wallet. And what else? That's all swap method not so hard. You can easily integrate it to your code.
00:15:20.250 - 00:16:10.410, Speaker B: It's just the rest API where you need to receive the call data to sign it and execute it on chain. And you will make the swap with one inch exchange. And let's look at another endpoints. Here you can see the endpoint that returns all supported protocols. We have about 43 supported protocols. You can see all these protocols using this endpoint. And also we have the endpoint for supported tokens.
00:16:10.410 - 00:17:15.300, Speaker B: You can look at these tokens, you can use these tokens with your application, build it on top of one inch. And if you want to use your custom token, feel free. If you set the token address in the swap method that we don't support it's okay. All needed data is decimals will fetch from blockchain and our pathfinder algorithm will find the best rates on the market. Okay. I think I asked all about the API. I will send you links for the Swagger documentation and GitBook documentation and if you have some questions, feel free to ask me.
00:17:16.710 - 00:17:35.270, Speaker C: Sorry, just one question if I may on the amount. It's an integer and way, right? So is it possible to express it in E 18? That is like ETH. Because sometimes when you fill in the amount maybe you have an extra decimal or there is a chance of a mistake.
00:17:36.810 - 00:17:42.026, Speaker B: Could you repeat? Are you talking about what I mean.
00:17:42.048 - 00:17:46.620, Speaker C: Is in terms of the amount amount? You said the amount is in way?
00:17:47.070 - 00:17:47.674, Speaker B: Yes.
00:17:47.792 - 00:17:53.230, Speaker C: Is there like a converter or something in there to express it in ETH or E 18?
00:17:56.930 - 00:18:02.446, Speaker B: Convert way. I can't understand sorry, what I mean.
00:18:02.468 - 00:18:13.940, Speaker C: Is it's 18 decimal places so there is a chance of making a mistake in way. So do you have another parameter to pass it as ETH instead of way?
00:18:15.590 - 00:18:55.458, Speaker B: No, we have just the parameter that support way. And if you want to know the decimals of token, you can just call token sendpoint or when you call the quoting point you receive this object where you can see your from token and destination token. And here you can see the decimals. Yeah, okay.
00:18:55.544 - 00:18:58.674, Speaker C: No, it's okay. Yeah, I will use the converter before I pass in here.
00:18:58.712 - 00:18:59.410, Speaker B: Yeah, no problem.
00:18:59.480 - 00:19:00.100, Speaker C: Thanks.
00:19:05.120 - 00:19:42.070, Speaker B: Do you have another questions maybe about the tasks I sent to you? All documentation about the API. Feel free to check it and ask questions in Discord channel.
00:19:46.040 - 00:19:52.990, Speaker A: Great, thank you so much Karil. This is super informative and I'm sure a lot of people are going to be integrating one inch into their.
00:19:54.880 - 00:19:56.190, Speaker B: Cool. Cool.
00:19:57.440 - 00:19:59.560, Speaker A: Great. So we'll see you on Discord.
