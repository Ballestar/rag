00:00:00.250 - 00:00:00.800, Speaker A: You.
00:00:03.490 - 00:00:26.930, Speaker B: Hi, everyone. Welcome to Unchained, your no Hype resource for all things crypto. I'm your host, Laura Shin, author of The Cryptopians. I started covering crypto eight years ago and as a senior editor at Forbes, was the first mainstream media reporter to cover cryptocurrency full time. This is the June 20, 2023 episode of Unchained. You know it, we know it, they know it. The system doesn't just need an update date, it needs a complete rewrite.
00:00:26.930 - 00:00:48.502, Speaker B: Web. Three offers. That rewrite. It allows us to take control back and to truly own what's ours. Visit Okx.com rewritthesystem to learn how Asia's buzzing and everyone's going to Token 2049 Singapore on September 13 to 14th. Balaji Srinivasan, Mike Novogratz, Arthur Hayes, and 200 others will hit the stage, joining over 10,000 attendees.
00:00:48.502 - 00:01:14.986, Speaker B: Visit token 2049 dot for 65% off with the code Unchained link in the description. Buy, trade, and spend crypto on the crypto.com app. New users can enjoy zero credit card fees on crypto purchases in the first seven days. Download the Crypto.com app and get $25 with the code Laura link in the description. Today's guest is Hayden Adams, founder and CEO of Uniswap.
00:01:14.986 - 00:01:16.306, Speaker B: Welcome, Hayden.
00:01:16.498 - 00:01:18.200, Speaker A: Thanks so much for having me.
00:01:18.730 - 00:01:28.470, Speaker B: It's amazing that Uniswap is onto its fourth iteration already. Let's walk listeners through the evolution of uniswap from v one through v three.
00:01:28.620 - 00:01:37.910, Speaker A: Sounds great. And before I even say that, I don't know if you know this, but Unchained was actually the first podcast I ever did last time we spoke.
00:01:38.070 - 00:01:44.990, Speaker B: Yeah, I don't know if I knew, I might have known that. It was so long ago. It was like 2018, wasn't it?
00:01:45.060 - 00:01:52.240, Speaker A: Yes, V One launched in 2018, and I don't remember exactly when we spoke, but it was around then.
00:01:52.630 - 00:02:07.582, Speaker B: Yeah, I also don't remember exactly, but amazing that it's been five years because it feels somewhat recent to me, which is kind of funny. But anyway, I'm glad that you made Unchained your first podcast choice.
00:02:07.726 - 00:03:18.746, Speaker A: Yeah, definitely. It was great back then and excited to be here now in terms of the evolution, I think even what you just said there, in some ways it feels like we think of Uniswap as having been around for a long time, and AMMS and all this stuff that we talk about with onchain trading. But Uniswap has only been around for five years. And before Uniswap, there were other projects experimenting with AMM, but it was like a relatively untested new thing and going from Uniswap V One, which launched in November 2018, back then it was like, is this a thing? Will this have a place in the world? Is there some need for on chain trading? And is there some need for automated market making? To today, where Uniswap trades billions of dollars a day? There's been over one and a half trillion dollars traded since then. On the protocol. AMMS are actually the predominant way people trade between crypto to crypto assets on chain. Right back then it was like, does AMM have a role relative to limit orders? And today it's like, oh, do limit orders have a role relative to AMMS in the space of onchain trading, which is really interesting, probably jumping the gun on some stuff.
00:03:18.746 - 00:04:12.906, Speaker A: There really unisoft v one built that initially almost as like a solo side project, had a lot of help along the way, but essentially was the only full time person on it, developed it under, got a grant from the ethereum foundation and launched it in November 2018. It got all this initial excitement and traction in the industry, I think in part because it really resonated with people's values in the space at the time. It was kind of the anti hype. There was all these projects that had set huge expectations, raised huge amounts of money, and then didn't really deliver on the hype. Uniswap, all it had was this small grant. No one knew about it until it was live and working. And it really resonated with people and it really matched the level of decentralization that uniswap reached where it was like non upgradable, immutable permissionless, anyone could create an asset, anyone could create a liquidity pool that resonated in the early days.
00:04:12.906 - 00:04:27.854, Speaker A: And so it got this initial traction and excitement from almost like long tail projects on ethereum. So I raised money and formed a company. I was like, just the idea to me had been validated, so I decided to take it to the next step and formed a company and just remind.
00:04:27.902 - 00:04:34.820, Speaker B: People those original pools were based on that x times y equals k. Just explain that for.
00:04:38.730 - 00:05:21.570, Speaker A: Know. The idea is that in traditional exchanges, you have limit orders and know you're matching up buyers and sellers. Uniswap had this pool liquidity model where you would deposit two tokens into a pool, they would be paired against each other and you could buy one for the other and sell you could buy and sell between them and it would just move the price along a curve. And that curve is just x times y equals k, where there's like a constant value. And that was how prices were set. It was very simple, very simplistic, but it worked. And I think that that is such a key to this whole story, is that there was a lot of early, the earliest negative baby feedback that uniswap received was like, this is too simple and too dumb.
00:05:21.570 - 00:06:14.050, Speaker A: You can't just create a stupid, dumb on chain trading strategy and expect it to be profitable for people to do or beneficial for people to do. And I think in a way they were right. In a way it was too stupid and dumb to really exist forever. But at the same time, it provided the benefits of it, offset the downsides of it, if that makes sense. The level of decentralization it achieved the level of the fact that no one needed to trust anyone else, the fact that anyone could create anyone could create a liquidity pool without having to have an extreme level of sophistication. Like, yes, it wasn't sophisticated enough for the most sophisticated people to want to come in and participate in it, but it was, like, unsophisticated enough that anyone could participate in it. And the ability for just anyone to create a liquidity pool was so different and new from anything else that was around at the time.
00:06:14.050 - 00:07:10.126, Speaker A: Even other early AMMS didn't have an experience where anyone could come in and create a pool, at least even at the front end level, if it allowed it at a smart contract level. So that was such a big unlock that it didn't matter how inefficient the system backing it was at the time, because no one else, there was no other way to do the things that allowed you to do for certain people. From there, we spent the next four or so years basically building new versions of the protocol. Improving it from V One basically only allowed you to trade between ETH and an ERC 20 token. And it was kind of an interesting, very opinionated, simple it was my first coding project is one way to look at it. And so it was okay, but it wasn't a system on which an entire industry could be built to put it one way. And so V Two really was just like, upping the architecture, the code quality, it did add a few more features.
00:07:10.126 - 00:07:40.830, Speaker A: It allowed you to trade any ERC 20 for any ERC 20, which enabled things like stablecoin to stablecoin trading instead of just ETH to stablecoin. So it added like a few new features. It was just like better infrastructure, easier to interact with, but it wasn't just a better code base. And that was sort of what going into V. At the launch of V Two, probably uniswap was doing a few million dollars a day in trading, maybe like five to ten. And that was in spring 2020, about a little bit over a year after the launch of V One. And that is sort of when things kind of like went crazy.
00:07:40.830 - 00:07:57.794, Speaker A: And we had what was called DFI Summer. And Uniswap v Two went from doing like 510 million dollars a day in trading in the spring to by the fall it had passed a billion dollars a day in trading. It was a token added to the protocol every ten minutes for the entire summer.
00:07:57.922 - 00:08:06.326, Speaker B: And just as a reminder also, I think that milestone was also reached partially because of the Sushi swap vampire attack.
00:08:06.508 - 00:08:37.106, Speaker A: Yeah, for sure, definitely. It was growing really fast over D Five summer. As Compound had launched and all these other projects had launched their tokens and more tokens were starting to come out and so it was already accelerating. But then definitely when Sushi swap happened, it really did go parabolic. At that moment, uniswap liquidity went from a few hundred million to a few billion. And then the daily trading also went up proportionally. And I think the reason Yusushi was so good for Uniswap was because there was sort of this chicken egg problem of people.
00:08:37.106 - 00:09:14.106, Speaker A: There wasn't enough liquidity to support the volume to support the liquidity. And we didn't really know how uniswap would operate at that scale. And Sushi kind of the Sushi vampire attack, because of the way that it was structured, really incentivized liquidity to pour into uniswap. And the plan was to migrate it all at once. But so much liquidity poured into uniswap that people got to see how it operated at billions of dollars in scale as opposed to low digit 100 million. And it sort of performed very well. I think that even after the Sushi vampire attack migration happened, the liquidity didn't really leave uniswap.
00:09:14.106 - 00:10:00.494, Speaker A: I mean, some liquidity did, but uniswap's liquidity after the vampire attack was much higher than it was before. And then after all of that, there was even more projects launching. And that was really like a pretty kind of a moment of a lot of change in the space. We had actually been working on V Three since before the launch of V Two, though the earliest ideas of V Three development were like ideas that we'd been playing around with while developing V Two. And so even at the time we launched V Three, we realized concentrated liquidity was like the next step. And I think that for a while, some of that stuff felt like it was a distraction from getting to where we knew we wanted to go with V Three. I think ultimately I'm glad it all played out and it worked out for the best and it was an exciting time.
00:10:00.494 - 00:10:32.710, Speaker A: But we launched V Three about a year after V Two and about six months after the whole Sushi saga kicked off. And V Three basically made the protocol a lot more. V Two was a very simple price curve, and everyone had to opt into the single way of managing their liquidity and trading it. And it was somewhat inefficient, but it was like the same for everyone. So it was so simple, anyone could do it. And there was no competitive dynamics between LPs because they were all kind of like in it together for better, for worse. But I think the downside was sometimes it was for worse.
00:10:32.710 - 00:11:00.126, Speaker A: V three came out. I think at the time of V Three, there was a lot of open question. I think it took a long time for people to understand it. I think people are still kind of wrapping their head around V Three even today. It came out about two years ago, and it basically just let people set price ranges in which their liquidity existed. And so you can kind of approximate an order book with it a little bit. You can imagine if you set a I'm going to trade this token between this price.
00:11:00.126 - 00:11:39.850, Speaker A: And this price in a very narrow range that looks very similar to creating a limit order. I think it's still kind of different. There's like a pro rata nature to it where you're still pooled with other people and it's still along a curve not at a single price. But all that to say, V Three increased it essentially increased the capital efficiency, it increased the flexibility for liquidity providers very significantly. But maybe to lead into where I'm going with before I'd say that V Three was still an extremely opinionated protocol. And what I mean by that is the way that we developed V Three. V Three was essentially the best single implementation of an AMM that we could imagine at that time, and I think it did very well.
00:11:39.850 - 00:12:31.362, Speaker A: V Three kind of took Uniswap from kind of like significant market share to today. It's like 85, 90% in on chain trading on Ethereum and has just sort of completely outperformed the V Two style pools in terms of the share of volume and the efficiency of it. But it was very opinionated. The process of basically designing an AMM, in my experience, has been like getting in a room with smart people and just like arguing for hours about trade offs and minor trade offs. And it's just like endless bike shedding is one way to think about it. And every single decision we made impacted other things that benefit LPs hurt swappers, things that benefit active, increase complexity, adds new features, but makes it harder to integrate, and that hurts developers. And every single part of the entire code base was just like a constant series of trade offs.
00:12:31.362 - 00:13:13.690, Speaker A: And I think that that's what's, to me, really exciting about where the Uniswap protocol can evolve with Uniswap V Four is, to me, Uniswap V Four is about creating basically like an AMM platform where people can express their preferences and choose where they want to be in the AMM design trade off space. And definitely it adds additional complexity. And there's a lot of things that there's a lot of implications to that. And I think that people are still wrapping their heads around V Three. They're definitely still just wrapping their heads around V Four. But for me at least, I think that I feel really confident about it as the direction for where this protocol should go next. And I'm personally really excited about it.
00:13:13.690 - 00:13:41.154, Speaker A: The Uniswap protocol has become such a important part of the industry. There are quite literally thousands and thousands of teams and projects. There's hundreds of thousands of tokens on the protocol. There's tens of thousands of projects that are built on top of it. And to me, I view uniswap like I view ethereum. And it's like it's a core infrastructure layer. Know, Ethereum maybe is a core infrastructure layer for more things.
00:13:41.154 - 00:13:49.378, Speaker A: But Uniswap is still like this core infrastructure layer for creating liquidity and trading on chain. And it serves all of these different projects.
00:13:49.554 - 00:14:41.800, Speaker B: Just one thing is that when you say it's like ethereum, it's not only ethereum in those ways, but I feel like this new V Four is also becoming more like ethereum in the sense that when Vitalik was dreaming up ethereum, part of the reason was that he was noticing that people were trying to innovate on bitcoin. And the way they were doing it was adding new features to blockchains. And both of you. So with Ethereum, what he did was he stripped all that away. It's like a programming language and then anybody can have any idea that they have and upload it to Ethereum and you're essentially doing the same thing. But for AMMs, I don't want to describe it, but just very briefly, you're stripping it down so other people can be like, oh, I have an idea for an AMM that does fees this way or that. I don't know what all the different variations are, but it's like literally the same move.
00:14:42.410 - 00:15:21.060, Speaker A: Yeah, definitely. I think that totally resonates with me and I think that I definitely have looked to Ethereum as guidance for for what I think is like a good project within the within the crypto space and has good philosophies behind it and there are a lot that can go into that and there's a lot that could impact it. But it's definitely like a move towards greater expressiveness and customizability and generalizability and it's not turing complete like Ethereum, but it is closer to turing complete than Unispot V Three in that you can express more preferences and do a lot more with it.
00:15:21.510 - 00:15:38.854, Speaker B: So aside from that fact that you were sort of dictating choices onto developers, there were also actual problems just like with using it and stuff. So what are some of the problems that you wanted to try to solve with Uniswap V Four and what are the features and solutions that you've come up with?
00:15:38.972 - 00:16:13.506, Speaker A: Yeah, that's a great question. Let's see. So Uniswap V Three, I'd say that for me, some of the most interesting I'd say that one very interesting starting place is fees. Like liquidity provider fees. You can ignore the other forms of fees, of gas fees and governance fees and all that. I'd say that like liquidity provider fees. For the longest time in Uniswap's history, it's always been like, what is the optimal fee and how do you set it? And all of these for liquidity providers? And the answer has always been like V One.
00:16:13.506 - 00:16:39.174, Speaker A: It was like, okay, we don't want to introduce some governance system, we don't want to introduce some. Let's just make it 0.3%. And that was the number. It was the magic number. And it kind of worked in a way, actually. It started out as zero point 25% and I was on a plane with Vitalik and we were having a conversation and he said and I was like, oh, I don't know, I'm worried 00:20 5% might be too low. And he's like, we could do 0.3%.
00:16:39.174 - 00:17:03.838, Speaker A: And I was like, okay. And I changed the code. And that's how it happened. That was all the thought that went into it. Vaguely looked at V Two kind of had a similar pattern. V Three introduced fee tiers which was basically like anyone could deploy you could deploy pools with a bunch of different fee tiers. And the idea here is that the more sophisticated liquidity provision, the more trading volume that's going through a pool.
00:17:03.838 - 00:17:38.346, Speaker A: Probably very often lower fees are better than higher fees. Another thing is the volatility of the asset. Like in a very volatile asset, you might need higher fees to make up for losses that you might incur for providing liquidity. Right? When you're providing liquidity, you are taking on price risk and the way that you offset those losses is you earn fees. And so if an asset is very volatile, you usually want higher fees. However, there is this other thing which is that there's different forms of volume. There's some volume that is just driven by volatility and then there's some volume that is driven by just user demand to trade an asset.
00:17:38.346 - 00:18:24.490, Speaker A: And there's papers theorizing around the optimal way to set fees based purely on volatility. And if you imagine a world where the only trades that exist are arbitrage trades probably going way too deep on this one very specific thing. But if you imagine a world where the only trades are arbitrage trades, you can theorize around the optimal fee to set but you don't know how that optimal fee will impact the user's demand for trading into that liquidity that is not driven by arbitrage but driven by just like a desire to trade one asset for another. And some people you kind of think of the users as maybe the less sophisticated and the arbitrage traders as the more sophisticated. There is no single way to set the optimal fee. The only way to do it is in imagining an arbitrage only world. And so in the arbitrage only world, the higher the volatility.
00:18:24.490 - 00:19:00.522, Speaker A: But then there's also another factor of gas costs and the lower the gas fees, actually the lower the optimal fees for liquidity providers and that's because the lower the gas fees, the smaller arbitrage trades are worth making. And so if you lower the liquidity providers fees, you have a lot more arbitrage closer to the current price. And so there's sort of like this benefit of having in a lower network fee world, you also want a lower liquidity provider fee world. So there's like all of these it's kind of a complex situation and so there are a lot of interesting ways to experiment with setting it. With V Three we had a few different granular fee tiers. Like we had like 1%, 0.5%, 0.3%
00:19:00.522 - 00:19:27.042, Speaker A: and 0.1%, something like a few of them. And that allowed people to better liquidity providers can make their own choices and allocate across them. And that increased the flexibility while fragmenting liquidity a little more. And there's a gas cost imposed. The more liquidity split across liquidity pools, the more gas cost you're wasting to arbitrage between the pools. And if I want to make a trade, and it's a very large trade, I now need to route, maybe some portion of my trade should go to the 0.3%
00:19:27.042 - 00:19:57.914, Speaker A: pool, but only up until it moves the trade 0.3%, but then the remaining should actually now, once the trades the price impact has increased beyond maybe a better example. So if you imagine a 0.3% pool and a 1% pool, if you make a trade that moves the price on the 0.3% pool more than 1%, you're going to want to start including liquidity in the 1% pool because the price impact of the 0.3% pool is no longer offsetting the fee of the 1% pool. And so these are like very fundamental problems, right.
00:19:57.914 - 00:20:39.526, Speaker A: The more pools you have, the more liquidity is fragmented at the same time, the less you can express your prep at the same time. There's no single best way to determine the optimal fee. And the way that it works on an order book is just everyone is choosing for themselves. And it's very efficient to aggregate that all on chain or off chain. And it's not very efficient to allow anyone to set any fee and aggregate all of that on chain. And so you kind of need like, liquidity to coalesce around certain fee tiers. I'll just say with uniswap fee four, I think one of the most interesting problems is it basically just says anyone can create any system for how the fee is set.
00:20:39.526 - 00:21:18.822, Speaker A: You can continue to do dynamic fees or you continue to do like static fees. There probably will still be like 0.3% fee tier pools, but there might be like and this fee tier moves with volatility and this fee tier, and you can create systems like that as well. I think that it's going to be very interesting to see. I think entire AMMS have been created to just experiment with fee designs. And I think something that's very nice about Uniswap E four is you actually don't need to create an entire AMM to experiment with fee designs. You can create a dynamic fee hook, which is much simpler and easier to do than creating an AMM, and it's much easier to get people to trade into it and there's much more adoption of it.
00:21:18.876 - 00:21:24.566, Speaker B: And just explain hook, because this plays a key role in Uniswap V four.
00:21:24.748 - 00:22:15.062, Speaker A: Yeah, uniswap V four introduces what we call hooks, which are various points in every transaction on uniswap has. Like, there's like a lifecycle to a transaction for a swap, maybe you send the tokens to the pool, the price adjusts, and then the pool sends your tokens back. The idea of a hook is that it's arbitrary. Like you can insert arbitrary logic when you create a pool, you can define the hook logic for that pool, and you can create a hook contract that interacts with various points in the lifecycle of a transaction. And so you could imagine you have a hook that before every swap, it runs some arbitrary logic. Or you can have a hook where after every swap it runs some arbitrary logic or before anyone adds liquidity. And through these hooks, you can also have hooks that basically adjust the fee for the pool in real time.
00:22:15.062 - 00:22:26.060, Speaker A: And maybe it's doing that by like, before the swap, it checks the price and based on the price relative to the previous price, it has some implied volatility number and adjusts the fee up or down based on that. Right? That's the type of thing that you can start doing.
00:22:26.590 - 00:22:34.720, Speaker B: But at its core, a hook is like an external smart contract that's interacting with the Uniswap protocol. Is that how to think of it?
00:22:36.130 - 00:23:38.894, Speaker A: That's one way to think about it. There's sort of like how the smart contracts are organized is interesting with Uniswap, and we can get that a little bit. But generally speaking, you could think of it as smart contract logic that can interact with the protocol at various points within today you have transactions that can interact with the pool, but they can only interact before the entire transaction has happened and after the entire transaction has happened. But there's sort of no way that you can kind of interject at points within a transaction. Generally speaking, it's like logic that you're sort of guaranteed will run with every transaction that interacts with that pool. I actually saw, I listened to like a 32nd clip with what is it, chopping block, where they were talking a little bit about what's different here and what can you do externally versus within a hook. I think an example of something that you can only do with hooks that you can't do today externally is one of the features in Unisoft V two and V three is this price Oracle.
00:23:38.894 - 00:24:54.618, Speaker A: And for the price Oracle to be, you know, to work, you need a guarantee that it will be updated before the first swap of every single block. And to have that type of strong guarantee, you can't do that externally because you could build a router that checks the price before it swaps and checkpoints it, but someone else can always interface directly with the pool and avoid updating your Oracle. And so the cool thing about the hook contract or the hook design is that you can create a pool that will guarantee the properties of your Oracle in a way that a hook and a router could never do. That's an example, I think there are others, another maybe example, part of where hooks came from is since before V two, we've had this running idea in the back of our head. And you've probably heard some of the around essentially what would amount to like a back running hook, this idea that if someone makes a trade that moves the price away from the current market price on uniswap, that creates a profitable arbitrage opportunity that someone else can capitalize on. And generally speaking, if you're a liquidity provider on a pool, everyone wants to internalize as much of the value as they can. If you're creating a valuable opportunity for someone else, you'd rather take it yourself.
00:24:54.618 - 00:25:51.718, Speaker A: And so there has been like the idea floating around for a long time of well, can we have at the end of every uniswap trade, it calls to a smart contract. That smart contract has the right to back run that trade if it pays some of the profits back to the swapper. That was sort of like an idea we'd been playing or liquidity providers either way. And that was like an idea we'd been playing around with in our heads for a long time. And to make that work again, you need a guarantee that every swap, otherwise people won't swap to the router. If there was a router that lent you back that if liquidity providers are depending on an external system to do this back running, then people are just going to trade through a different router that doesn't do that. Because you sort of have this ability to guarantee properties for liquidity providers, for swappers, for whatever, for external projects that you don't get with externally built systems.
00:25:51.718 - 00:26:23.174, Speaker A: The other thing that I'd say is that the smart contract design patterns of building some of these things externally are a lot more complex and messy and inefficient than building them internally with hooks. And so I think that that's another important kind of factor where definitely a lot of things that could be built with hooks can be built externally. But there are fundamental benefits to doing them with hooks in terms of it's built into the pool. There are often efficiencies or better smart contract design patterns that you get there.
00:26:23.292 - 00:26:30.870, Speaker B: Just to understand who is going to be contributing these hooks, like who develops them, how does it get decided, what gets adopted?
00:26:31.290 - 00:27:13.378, Speaker A: It's a little bit like asking who's going to build smart contracts on ethereum? And there's probably a lot of people and a lot of different reasons. I'd say that some examples for one, we've built a few hooks even as examples to prove the system that we find interesting and useful. So one hook that we built is what we call TWAM, which is we can get into what that means and what it does, but it essentially makes it much easier for people to make very large orders on the protocol that execute over a long period of time. And we think that that's like an interesting feature. We don't think that building it as its own custom AMM would be a lot more work and infrastructure to maintain. And so we have developed it as a hook. We built a limit.
00:27:13.378 - 00:27:17.238, Speaker A: Order hook, which we find interesting. We built some price Oracle hooks, so we built a few.
00:27:17.324 - 00:28:09.814, Speaker B: So, I'm sorry, I need to understand this because the time weighted average market maker is for people who it's probably like a whale who wants to make a huge order that would typically move the price a lot, that would cost them a lot. So what they want to do is they kind of want to chunk their purchases or sells or whatever out in a way that it moves the price less, which makes the trade more profitable for them. So one question is for these hooks, is it that the person who wants to do this time weighted average transaction, are they saying, okay, for this liquidity pool, as I do my transaction, I'm choosing this hook? Or is it that there are certain liquidity pools where they say, we have this hook, so every time you use our pool, it will always time weight average your transaction? I'm not sure.
00:28:09.932 - 00:28:59.462, Speaker A: Yeah, that's a good question. Happy to unpack this a little bit. So the way that I'd put it is that, first off, the person who determines the hooks for a pool, like when a pool is deployed, the deployer of that pool gets to choose what hooks are set for that pool. The pools for a hook are determined at pool creation. And so liquidity providers choose to deposit liquidity to pools with specific hooks on them because they think that those hooks will are where they should provide liquidity for various reasons. TWAM orders are orders that people would make externally when people would submit TWAM orders to pools that support that have a TWAM hook because they want that feature and functionality. Liquidity providers would provide liquidity to this pool because they actually get fees from TWAM orders that execute through it.
00:28:59.596 - 00:29:30.802, Speaker B: Yeah, but then one other question, because you said a liquidity provider can have multiple hooks on their liquidity pool. So is it that I might use the same pool, but I'm not doing a TWAM transaction, but I'm using a different hook that is also available on that liquidity pool? Because I guess what I'm trying to ask is, is everybody who's making a TWAM order all doing it on the same pool, or is it that multiple different types of transactions are all happening on the same liquidity pool depending on how many different hooks they have?
00:29:30.856 - 00:29:52.838, Speaker A: Pwams are like adding new order types to existing liquidity pool. So every single pool is uniswap v three. Every single pool has the built in logic and functionality of uniswap v three. I can provide liquidity. Other people can swap through it. You can create hooks that check if you're providing liquidity in some way and prevent you from doing it. And so you can add restrictions through hooks.
00:29:52.838 - 00:30:22.286, Speaker A: But generally speaking, if you imagine a pool and then someone adds a TWM hook and an Oracle hook, it's still uniswap. V Three you can still provide liquidity and swap like normal, but you also would have this option of submitting additional different transaction type to that same pool, which would be additional fees earned by liquidity providers on that pool. So I can make a regular swap on this pool. I can also do a TWAM order on this pool. Liquidity providers provide liquidity to this pool because they earn fees on both swaps and on TWAM orders.
00:30:22.398 - 00:30:25.646, Speaker B: Okay, so basically, hooks are optional for users.
00:30:25.838 - 00:30:52.234, Speaker A: Yeah, hooks are optional for users. In a sense, you can have hooks that constrain the logic of a pool. You can have a hook that says you can only provide liquidity to this pool if it's full range liquidity. And so you can prevent people from you can add hooks that almost remove features to some degree. You could have hooks that add additional constraints to a pool. The same way you could add a hook that adds a new feature. But generally speaking, a hook that adds a new order type is an optional order type to use.
00:30:52.234 - 00:31:05.402, Speaker A: It doesn't necessarily mean you can't use the other order type. And generally speaking, unless you have hooks that explicitly modifies the functionality, it still is like the base system is still uniswap v three and concentrated liquidity.
00:31:05.546 - 00:31:27.286, Speaker B: Okay, so in a moment we're going to talk about more examples of hooks. But first, a quick word from the sponsors who make this show possible. We've said it once and we'll say it again. The system doesn't just need an update, it needs a complete rewrite. Web Three offers that complete rewrite because it extends beyond just money. Staking NFTs DFI earn. Web Three has become a world of its own.
00:31:27.286 - 00:32:10.534, Speaker B: But who has time to juggle between five different crypto apps? Okx Wallet is one of the best apps for everything. Web Three it allows you to store, trade, earn, and manage your crypto and your NFTs across 60 plus blockchains all in one place. And now it's one of the only self custody wallets that doesn't require a seed phrase. There's just no other wallet that's as powerful, yet so simple. Give it a try@okx.com. Web Three join over 10,000 attendees for this year's biggest crypto event at Token 2049 Singapore on September 13 to 14th. Sandeep from Polygon, Eric Wall, Chris Berniski, and over 200 others will hit the stage, joining the industry's most influential for an unforgettable experience.
00:32:10.534 - 00:32:54.594, Speaker B: Ahead of the Formula One Grand Prix race weekend, singapore will transform into a crypto hub for a week from September 11 to 17th, with over 300 side events that will make for unparalleled networking opportunities. Builders and investors at the bleeding edge of innovation will drive an agenda that covers the everevolving regulatory landscape, the convergence of crypto and AI. Web three gaming NFTs in the metaverse DFI scalability, interoperability and many more. Visit token 2049 dot for 65% off regular tickets with the code unchained link in the description. Join over 80 million people using Crypto.com, one of the easiest places to buy, trade and spend over 250 cryptocurrencies. With the Crypto.com
00:32:54.594 - 00:33:37.890, Speaker B: Visa card, you can spend your crypto anywhere and get rewarded at every step up to 5% cash back instantly, plus 100% rebates for your Netflix and Spotify subscriptions and zero annual fees. New users enjoy zero credit card fees on crypto purchases in their first seven days. Download the Crypto.com app and get $25 with the code Laura link in the description. Back to my conversation with Hayden. So we talked about this TWAM hook which you guys created. Are there any other examples that you feel will be either common and that you're either creating and we also, I think, meant to address who it is that will be contributing the hooks and how they get adopted.
00:33:38.310 - 00:34:47.398, Speaker A: Yeah, I think that's all great topics. I'd say that one other maybe interesting hook example is just, again, this is something that people have tried to do in other ways, in external ways, but you can definitely have at any given moment a lot of the liquidity pool. A lot of the liquidity in a pool is not being used, it's just sitting idly. And so you can imagine hooks and this is another example of something that is very tough to do externally because people have tried to basically keep out of range liquidity in lending pools and then as the price starts to approach so you could imagine an important property of uniswap is that it is like solvent, right? That is an important property. You need sort of a guarantee that liquidity that you're expecting to be in the pool will be available when it's needed. And with externally built systems, you kind of rely on people to frequently update their system. If you have a system where some liquidity is elsewhere, but you need it for a given swap, you need to have people that are managing systems that are pulling liquidity every ten minutes or something, and then if the price moves too fast, suddenly it's not available.
00:34:47.398 - 00:35:38.586, Speaker A: The point being that with hooks, all liquidity that's not in the current narrow price range can be stored in other contracts doing other things. But then in real time, if a price moves the price outside of to a point where it needs additional liquidity, you could just pull the liquidity from those other systems in real time, basically on demand within a swap. So I think that's like an interesting category. People have talked about it's very tough to create pools right now for things that look like the wrapped staked ETH or very tough to create pools for fees? For pools, for anything. Yeah. And so I think for interesting hook patterns will allow you to have pools that are earning yield in other places, which are kind of interesting. I do think that experiments with fee designs are one of the most important ones and will probably be one of the most used ones there are a whole bunch of other ones.
00:35:38.586 - 00:35:47.580, Speaker A: I'd say that things around internalizing mev just leaking less value out of pools generally are pretty interesting.
00:35:48.830 - 00:36:29.730, Speaker B: I'm sure you've heard the chatter about all this, because I think so many people, when they heard this, the number one thought was, how do you keep this secure? And when I was writing my other book and I wrote about the Dow hack, something that I learned, and I don't know if this is still true, but the Dow hack occurred because of an interaction with an outside contract. And I believe that this is generally kind of a dangerous thing for any smart contract to have this external contract interact with it. So how do you prevent people from adding maliciously designed hooks that are, for instance, meant to be rug pools? Or in general, how does the security of these hooks get vetted?
00:36:29.890 - 00:37:04.450, Speaker A: Yeah, I think that it's good to look to ethereum again in part for this answer, and I'll unpack it more. But ethereum isn't good because you can't create unsafe smart contracts. Ethereum is good because you can create safe smart contracts. And I'd say that it is somewhat similar with hooks. The same way that today people can create tokens that are unsafe, people create tokens that are safe. And the same way that even these problems right now, we talked a little bit about things that can be done internally can also be done externally. That's also the case for things like unsafe hooks can also be managed by creating unsafe tokens.
00:37:04.450 - 00:37:48.414, Speaker A: And so I think that what's really important here is actually that hooks make it easier to experiment in AMMS in safe ways. And definitely how front ends interact with pools are a little bit different. Right. And how users interact with pools might be a little bit different. But generally speaking, the core thing here is that the good thing about hooks is you can create a safe hook and you can verify a hook is safe. And it is easier to create a safe hook than it is to create an entire, from scratch safe AMM. And so I'd say that how we handle what hooks appear to users in our interface might be different even from what other people do with other interfaces.
00:37:48.414 - 00:37:58.086, Speaker A: But I'd say that in our own products, we wouldn't want to expose random LPs to pools that have hooks that we don't know what they are and what they do.
00:37:58.188 - 00:38:06.514, Speaker B: So then is there some process for adding hooks that goes through some kind of central gatekeeper to make sure it's all safe?
00:38:06.642 - 00:38:35.086, Speaker A: So it's kind of like saying, is there a process for deploying smart contracts? Not really, but there is a process for choosing what smart contracts we like the same way that aggregators right, have. They're trying to create as many aggregate as many liquidity sources as they can, but they're only going to aggregate a liquidity source that they deem is safe. For their users. And so there's no like anyone can create a hook to do anything. Some hooks might not need a front end. Some hooks might be involved in the niche operations of some specific protocol. We don't need to verify it because it's not meant for our users.
00:38:35.086 - 00:39:21.434, Speaker A: It's meant for a different project and their own users, but for us, for our liquidity provision interface. As hooks are developed and as people create liquidity and pour them into hooks, we're going to audit and verify and whatever hooks meet our security bar and have some level of usage, we're going to try to expose those to our users. But the cool thing is that anyone is completely permissionless to create a hook, but it's not advisable to tell your users to go into an unaudited hook. In fact, it's extremely inadvisable. You probably should never if you're operating a front end or if you're building a front end, you should definitely not just expose every possible pool with every possible hook without any consideration.
00:39:21.562 - 00:39:27.554, Speaker B: Okay, so essentially every front end is deciding which hooks get exposed to their users. Is that what you're saying?
00:39:27.592 - 00:40:11.278, Speaker A: Yeah, for pools that even need front end, some pools maybe don't even need front ends. But yeah, generally speaking, it's kind of up to front ends to decide the same way that it is up to front ends to decide what liquidity sources they integrate or what protocols they integrate. It's going from a decentralized exchange protocol to almost like a decentralized exchange platform. And so not every possible implementation will be safe. But I'd say that maybe again, can reference that one. Something that came up on again, I watched like a two minute clip, but I thought there were very interesting topics. But one of the things that came up was around this idea of there maybe there being like two types of there's kind of default configurations and then scary everything else.
00:40:11.278 - 00:40:35.394, Speaker A: I say that it's going to be a little bit more complicated than a little bit more of a spectrum than that. I say that there's probably a default configuration that looks almost identical to Uniswap V Three. You can do. Uniswap v. Three. Maybe the most popular configuration actually might be Uniswap V Three, but removes the Oracle, which saves gas. Because one opinionated choice we made in Unisoft V Three and V two was adding this Oracle.
00:40:35.394 - 00:41:21.202, Speaker A: And the Oracle adds a gas cost for every swapper to create this public good of a price Oracle that can be used in external systems, but some people might not want to pay that cost. And so maybe the most used hook will actually be zero hooks, and that alone will be better than V Three because it's cheaper for certain people. But I think that there are also going to be a wide spectrum of I think that there's going to be a lot of development, a lot of innovation across the ecosystem. And over time, hooks will be developed that modify the pools in ways that benefit people. And they'll be tested, and they'll be audited, and they'll be like and as more and more are created, more of them will start to be exposed to people. So it's not going to be like two worlds of no hooks, default configuration and any hook. Oh, super scary.
00:41:21.202 - 00:41:59.140, Speaker A: There's going to be like a whole middle ground of hooks that have started to gain. Some have been battle tested hooks that have been like it might be that there's ten hooks that are used. There might be a power law distribution. Maybe a few hooks will be like, massive unlocks for the ecosystem, and a lot of pools will use them. And then there will be a long tail of hooks that are used only in a few pools or in niche situations or for specific user projects and front ends. It's kind of like Tokens, right? Tokens kind of have a power log usage, but there's a massive long tail, and it's not really like, oh, there's three good tokens, and everything else is like danger territory. Don't touch it.
00:41:59.140 - 00:42:01.422, Speaker A: There's a spectrum.
00:42:01.486 - 00:42:02.030, Speaker B: Spectrum.
00:42:02.110 - 00:42:08.840, Speaker A: And it's up to front ends and users to think about how they interface with things.
00:42:10.330 - 00:42:56.686, Speaker B: One question, because these hooks can be used across multiple liquidity pools, and we've seen in the history of crypto that there are many times when things that are audited end up having vulnerabilities in them. And so what if, I don't know, like 20% of all the liquidity pools have this one hook in it that ultimately you guys realize that there's some kind of bug, as far as I understand, once you deploy it's out there, and I think it's the same for the hooks. So then what happens? Do you quickly whip up another version of uniswap that doesn't allow this hook and then try to get people to migrate or I don't even know how that affects things. Do those liquidity pools just decide, we're going to abandon and deploy new ones, or I don't know what you do in a situation like that. What are your thoughts?
00:42:56.878 - 00:43:20.714, Speaker A: You always could start with the base case, right? The security of a uniswap. It's kind of like what happens if there's a bug in uniswap V three right now, all V three pools use exact same logic, and it's been very well battle tested. People now feel pretty secure in it, I can tell you. While we tested, it harder than anything we've ever tested before. At the launch time, it was still scary as a developer because you never really know.
00:43:20.752 - 00:43:25.900, Speaker B: Bug announced the other day I meant to look good stuff in V three. Yeah, in v three.
00:43:26.210 - 00:43:33.694, Speaker A: I don't know. I mean, I know the thing has processed like, one and a half trillion in volume. I don't think that there are any major bugs that can cause any maybe.
00:43:33.732 - 00:43:36.962, Speaker B: Not somebody said this, but yeah, now I don't really see.
00:43:37.016 - 00:44:13.486, Speaker A: Maybe it's referring to a bug in V Four, which is reasonable. There was a user bug report in part of the build in public, someone had found a bug in V four. I will mention that V Four hasn't even been code frozen, let alone audited. And sort of bugs are expected at this stage, right? Part of the idea of opening it up this early, I'm sure we would have eventually caught that bug and it would have made it through auditing. But it's actually much better and faster to have people out in the wild, discover them and report them and fix them. So that's kind of relating to the building in public thing. I'd say that, generally speaking, the kind of idea of a hook that is unsafe is very similar to like an AMM and that is unsafe, right? People can build.
00:44:13.486 - 00:45:01.578, Speaker A: If people wanted to experiment with new functionality in AMMS today, they would build a new AMM from scratch. The surface area for doing that experimentation is much scarier in that world. You don't just have to audit a hook and a limited constraint of things, you have to audit the entire system. So if you want to create some new AMM functionality, if you want the base case of uniswap with no new functionality, then you can use no hooks. If you want to add functionality, the surface area of what you can build with a hook is much more constrained, and it's much less likely to have a bug, and it's much less likely to have a security vulnerability. It's not impossible for a hook to be unsafe, but it's easier for a hook to be safe. What hooks are replacing is like custom logic and AMMS or externally built things.
00:45:01.578 - 00:45:21.710, Speaker A: And those things are just as likely to have vulnerabilities, if not significantly more likely. The things that hooks replace are either like things that are built externally to pools that try to add on additional logic to it, or things or entire new AMMS. And both of those are much riskier than building a hook. So to me, it feels like a significant security upgrade for people that want new logic.
00:45:21.790 - 00:45:25.858, Speaker B: I totally get that, but can you just play out my scenario? Like, if that did happen, what would.
00:45:25.864 - 00:45:28.126, Speaker A: You do if there was an unsafe.
00:45:28.158 - 00:45:33.394, Speaker B: Hook, but if it was one that was popular, affected a huge percentage of the pools?
00:45:33.442 - 00:45:57.214, Speaker A: I mean, I think an unsafe hook is the same as an unsafe AMM implementation for the pools that use that hook. So definitely you wouldn't need to migrate liquidity to a new version of the protocol. You would need to withdraw liquidity from those hooks. And if you wanted the same functionality, deploy a new hook that fixes the bug, you could migrate to new pool. You don't need to exit before you just need to exit the pools within before that, have those hooks in that.
00:45:57.252 - 00:46:03.198, Speaker B: World, and also cut off any way in which other pools might interact with those.
00:46:03.364 - 00:46:30.814, Speaker A: Yeah, I think that generally speaking today, in Uniswap, their accounting logic is partially just using separate smart contracts. And so each Smart contract is keeping track of its own balances and they don't interact with each other. There's definitely like before, there are all liquidity pools exist in a single contract. And so I think that aspect does, I think for some people, evoke like, oh, is there some sort of contagion type of possibility across pool.
00:46:30.882 - 00:46:31.450, Speaker B: Right?
00:46:31.600 - 00:47:06.862, Speaker A: But I'd say that I don't know, maybe that wasn't what you were getting at, but I'd say that probability. I'd say it's still like if there's a bug in uniswap V Three, it affects all pools. And so you still have the same a bug will affect everything. And so in before a bug would mean that our counting logic is broken that prevents pools from certain interactions. It's like a similar class to me, the ability for pools contagion between them would be a similar class of bug to V Three, having a bug that it's fundamentally broken. Generally speaking. First, there have been other projects that have done Singleton style designs.
00:47:06.862 - 00:47:09.160, Speaker A: Right. Balance of V Two has been out for many years.
00:47:09.850 - 00:47:23.342, Speaker B: Before you go into that, make sure describe Singleton. And I totally forgot, because in uniswap V Three, you had a new contract for every pool. It was expensive. Now you're going this Singleton contract route. So describe what singleton?
00:47:23.426 - 00:48:14.550, Speaker A: Yeah, singleton is just that all pools live within a single Smart contract, and that makes it much today, when you do a trade that routes across many pools and has many interactions, the sort of need for pools to communicate with each other tokens to be transferred between pools directly, that adds a lot of gas cost. And the cost of deploying a pool involves creating an entirely new Smart contract. With Singleton, the cost of deploying a new pool is just like updating a little number within a Smart contract. And so the gas cost of deploying pools goes down 99%, which is pretty nice, approximately. Pepcode isn't frozen, so you can't really promise gas benchmarks. And then the cost of trades that route across many pools all like internal transfers between pools. You don't have to really pay nearly as much gas cost for them because it's like updating internal balances instead of transferring them between smart contracts.
00:48:14.550 - 00:48:25.678, Speaker A: And so ultimately, the purpose of this is to create much greater gas efficiency when routing between multiple pools and to significantly lower the gas cost of deploying pools as well.
00:48:25.844 - 00:48:42.862, Speaker B: Okay. Yeah, because you're right. When I framed my question to you about if there's a malicious hook, I was thinking about the different pools as being different Smart Contracts. But you're right. Thank you for reminding me of the Singleton. So then that makes it feel even more alarming to me. But why are you seemingly not very alarmed?
00:48:43.006 - 00:49:23.502, Speaker A: Yeah, I mean, I think that this is one of the reasons why we really benefit from being in this ecosystem where a lot of development is happening. Even seeing that balancer did it and it has worked for a long time for them, has given additional confidence. But I'd say that generally speaking, these smart contracts, they're open source today. They need to be very well tested and they need to be very well audited. And other projects have done similar designs. I mean, generally speaking, you need to test it like a spaceship, right? But at the same time, that was already the case. You could have separate pools and you'd still need to.
00:49:23.502 - 00:49:53.306, Speaker A: V Three was also terrifying in its own way because it was like a complex smart contract code base. And the probability of there being like a bug in singleton is not significantly higher than the probability of there being having been a bug in V Three. And I'd say that the kind of process. One of the reasons I'm really excited about this slower build and public rollout process is it gives a lot more time for a lot more eyes on the code before it goes out. So it's like an additional layer of security from that and go into detail on that.
00:49:53.328 - 00:50:07.642, Speaker B: So you just made an announcement about V Four, but you didn't actually deploy it, which is what you did previously when you had a new version. So you've now publicized the code. So what are the steps before you actually deploy?
00:50:07.786 - 00:50:41.020, Speaker A: Yeah, I mean, I'd say the steps right now, there's no specific timeline. The steps right now is like, we put out a vision for what we think unisoft V Four should be. If we were to follow a V Three style path and we hadn't put it out, what we'd do from now is we'd probably spend like several months cleaning up the code base and improving it and optimizing it. What's happening now is that it's public. There's time for people to read and digest. The code base would be integrators, would be hook builders, people who have experience with AMM design. People have an opportunity to look at the code base, think about our vision for it.
00:50:41.020 - 00:51:13.986, Speaker A: We have contribution guidelines in the GitHub repo. People can open issues and with things that they think are good about should be changed or bad about it. If there are open issues, they can write the code themselves and create pull requests and propose modifications to the code base. They can look for bugs, they can fix documentation. All of this has already started to happen. People have already started finding bugs, finding optimizations, opening issues. And it's like massively accelerated how fast certain things have been.
00:51:13.986 - 00:52:16.150, Speaker A: Like, we would have eventually probably, but it would have been like a much longer process. And I'd say there are a few things that might factor into when this thing actually launches. I'd say that one thing that probably factors in is definitely you need like several months of it being public, I think, to really adequately have time for people to give their input, discover optimizations, discover bugs. Obviously there'll be a so that's part of it. There is a kind of interesting aspect where this singleton system we created is combined with this other thing that I don't need to really get into called Flash accounting, which is really just how we do the logic for the accounting logic in a way that is more optimal for routing across many pools. And that the optimal form of the way that we handle singleton in the accounting logic of keeping all pools solvent and efficiently routing across them is made significantly more optimal by an upgrade coming Ethereum upgrade EIP 1153. And it's slated for inclusion for the Cancun Hard fork.
00:52:16.150 - 00:53:09.330, Speaker A: It's not only useful for us, it's useful for many other projects in the space. It's a very cool upgrade that just makes it cheaper to temporarily store things within Smart contracts. Transient storage, it's like a temporary form of storage, meaning that it's similar to like a Flash loan where you can borrow something as long as you pay it back off the end of the transaction. Transient storage is just you can use storage as long as you delete it by the end of the transaction. In the world where you do that, the cost to Ethereum for temporary storage is much lower the cost on an Ethereum node for temporary storage is much lower than the cost for permanent storage. Kind of intuitively maybe makes sense because that's one thing that the nodes all have to update and store something new forever and the other one nodes don't need to actually update it, they just need to verify the logic. And so that upgrade makes uniswap V four significantly more efficient.
00:53:09.330 - 00:53:23.046, Speaker A: And in my opinion, it probably should not be deployed until after transient storage goes live on Ethereum. And then there are some modifications that would need to happen to the Smart contract at that point to integrate with transient storage.
00:53:23.158 - 00:53:28.590, Speaker B: So if you were to give a ballpark estimate of when you might actually deploy, what would you say now?
00:53:28.660 - 00:54:20.462, Speaker A: I'd say that essentially what you need is you need to there's several months of community input and feedback. Then there's probably like as the code starts to ossify, hopefully it's probably like in the world where the community kind of goes with post trance storage, which I think is very likely because it's just much more optimal. Probably it would be like a few months after Cancun Hard fork at the earliest because you kind of need time to integrate with transient storage and then after that freeze the code and then go through an auditing process. And so you don't really want to audit the code too much until the code is frozen. You don't really want to freeze the code until you've made any modifications if the transient storage. So I'd say that. If the cancun hard fork happened in September, and I don't know if it will, but it might, then maybe it could go live in November, December, something like that.
00:54:20.462 - 00:54:36.086, Speaker A: That could be a timeline, but I don't know, it's not really fully up to me. It's like there's going to be like a social there's been a lot of conversation on social consensus. I think there'll be a little bit of social kind of convergence on what makes sense to do here.
00:54:36.268 - 00:55:19.010, Speaker B: All right, so I'm sure you've also seen, in addition to the chatter about potential security issues with Uniswap V four, that people also are talking about the new business license, which this appears to have happened after the Sushi swap incident, when, famously, a copy of the code and did a fork and did this vampire attack on Uniswap, as we discussed. And I wondered after that, you went to this two year license where people could not use the code for two years. They could see it, but not use it. And with this version, you've extended that to four years. Why did you decide to go with a business license of that length?
00:55:19.350 - 00:55:46.282, Speaker A: Yeah, I think it's a great question, and I think that there's also been kind of general chatter around what is open source, what is source available? And I think that there's definitely definition, and I think that definitely busl is different from GPL and MIT. And I think that people say that's source available, open source is totally fair. And I don't think that there was any intention to muddy the language there on our part.
00:55:46.416 - 00:55:52.620, Speaker B: Okay, yeah, people took issue with the tweet that says we've open sourced v four.
00:55:53.150 - 00:56:30.342, Speaker A: I think that open sourced is like a verb. Source available isn't, but we've made source available again, it's fair. I think it's fair there wasn't like an intention in that. I do think that Busl, for what it's worth, is a little bit categorically different from other types of proprietary licenses in a pretty meaningful way. And that I think there's a reason that it has had significant definitely like we were one of the first projects to use it, but many other projects use it now, today. And I do think it's categorically different than a fully proprietary license. And what I mean by that is the way busl works is that after some amount of years, it sort of is forced to go GPL.
00:56:30.342 - 00:56:34.934, Speaker A: It's guaranteed to be GPL and it can only be accelerated, it can't be extended.
00:56:35.062 - 00:56:39.740, Speaker B: And that GPL is when projects can use your code.
00:56:41.150 - 00:56:55.898, Speaker A: GPL is copy left, which GPL means that, yes, anyone can fork it, but they also have to go open source. There's like two types of open source. GPL is kind of like the viral form of open source, where anyone can integrate it, but they also have to become open source.
00:56:55.994 - 00:56:59.746, Speaker B: Is that also the term copy left? GPL and copy left. Okay.
00:56:59.848 - 00:57:58.862, Speaker A: And then MIT anyone can use in any way, and they don't need to open source. So for an MIT code base, someone can integrate it into their project and have that project be closed source. So it's not like viral in the same way, I'd say that what's interesting about Vusl is that it's guaranteed to eventually be open source, right? So after four years, at four years or earlier, v Four will be GPL. So there's a time window for which it is proprietary and it's like fixed at start, and it can only be accelerated. So both Uniswap Labs and Uniswap Governance can independently grant additional licenses, and governance can actually shorten the period of time for which it is open source until it shortens the BSL time and makes it full GPL. I will say that a lot of the early, I think open source. First off, we're like massive open source fans here.
00:57:58.862 - 00:58:37.802, Speaker A: Almost everything we do, our wallet fully open source, which is more than most wallets. For what it's worth, our web app, fully open source Uniswap V Three, which was BSL two years ago, is now GPL and fully open source Uniswap V One, V Two. The things that we've built have been forked thousands of times. We've benefited from those forks. We've benefited from the innovation that has happened on those forks. I think we're really big fans of it. I do think that some of the early open source kind of philosophy didn't necessarily factor in this world of crypto, where you have, within days, economically incentivized, thousands of economically incentivized forks.
00:58:37.802 - 00:59:17.870, Speaker A: There was a period of time where there was probably like 20 Unisoft V Two forks per day, and they were all creating incentives, and they were all somewhat low quality as well. And so I think that the idea of BSL is a little bit like one. I think that, first off, it's in part an acknowledgement that maybe it's not just Labs that should make this decision. So Uni holders actually do have there's an ENS subdomain that is like Uniswap licensed Uniswap ETH that governance controls directly. And if they want to modify, like if they want to make it GPL, there could be a vote today. So part of it is like going beyond Labs. Other stakeholders can have a say in this decision, which is interesting and kind of an innovation in licensing on its own.
00:59:17.870 - 00:59:18.654, Speaker A: Right?
00:59:18.852 - 00:59:21.326, Speaker B: And I'm sorry, you said the token holders can do that.
00:59:21.428 - 01:00:05.470, Speaker A: Yeah. Uniswap Governance directly controls an ENS name, Uniswap ETH, and there are subdomains to that ENS name that can be updated by governance votes and the official license of Uniswap e Four, if you read the text, says the change date. The change date is when it goes from BSL to GPL is four years from now or sooner at any date specified by the text in this ENS file. And so governance can actually directly vote to shorten that if it wants to. So part of it is. Like, maybe this isn't even just our code base. Maybe this is like a community's code base and they can decide if they want it to be forkable sooner.
01:00:05.970 - 01:00:13.970, Speaker B: But how did you come up with four years after you already did the two years? Because the two years was kind of controversial, but now you've doubled it, so.
01:00:14.040 - 01:00:58.766, Speaker A: Why yeah, I think that the two years look partially I think that the two years, there were probably voices. I think that, first off, the license kind of worked pretty well in a sense, where it prevented a lot of local Audi forks from happening super early on. I am interested to see how people build on top of V Three at this point. But at the same time, I kind of think that decision should also be up to the broader community and ecosystem. And I think that there were definitely concerns with the community around. Maybe this should have gone on for a little bit longer. And I think one thing that was really interesting is that one of the reasons we chose two years is that we thought anyone can rebuild this in two years.
01:00:58.766 - 01:01:24.086, Speaker A: Turns out no one could. And so I think that three years is interesting as well, or four years is interesting as well. I think it's partially just like a decision you can't reverse. So I'd say that it can always be shortened through a governance vote from four to three to two to one, but you can never extend it. And so the thought was that it was kind of successful for the Unisoft community, the USL license. And I think it's a big reason why a lot of other projects have.
01:01:24.108 - 01:01:45.854, Speaker B: Adopted it to that issue with the wormhole thing on deploying to BNB. I don't remember what the whole thing was. It was like, you guys wanted to deploy there, and then there was this issue about the bridge and blah, blah, blah. And then it was like getting close to the deadline of the two years, and then you were worried that somebody else would deploy Uniswap on BNB. Did all that play a role in trying to extend it beyond two years?
01:01:45.972 - 01:02:42.634, Speaker A: No, I actually barely follow I barely actually followed that one. Funny enough, I'd say that there definitely were I'm trying to remember the situation. I think that definitely there were governance votes on the BNB chain deploy in part because the license was going to expire and there was some desire within the community. Maybe when you say you, I'd say that I actually wasn't like but yeah, there were, like, proposals, governance proposals that were voted on, and there was like a timing consideration mentioned in those proposals. But no, I don't think that that was the sole influence. I think it's more just about maybe just in everything in V Four design, we kind of favored some level of flexibility and optionality, and the sort of period of USL is irreversible in one direction and not irreversible in the other direction. And so if the community really does not again, there's sort of like different communities.
01:02:42.634 - 01:02:48.674, Speaker A: Right? But if the Uniswap community doesn't like the four year license, there can be a vote to shorten it, there can never be a vote to extend it.
01:02:48.712 - 01:02:54.660, Speaker B: So that's mostly for PR reasons. It's not like they literally couldn't extend it, it's just.
01:02:58.330 - 01:03:28.478, Speaker A: The license, it legally cannot be reversed in four years, no matter what the community votes on, it is guaranteed to be GPL. And that's why I think when I say Bosl is categorically different than GPL. Okay, is that it's like not than GPL? Obviously it is, but then like a different proprietary license because it's like forced to go GPL after. And so there's nothing I can do or anyone can do to make this code proprietary beyond four years from now.
01:03:28.644 - 01:03:56.840, Speaker B: Okay, I see. So I also want to address another thing that people have been discussing. There was some chatter that Uniswap kind of borrowed some features from Crocswap. Initially people were using stronger words like plagiarize, but once I dug into the details, it's more like maybe was inspired by perhaps the more exact phrasing. But I just wanted to give you an opportunity to address any of those criticisms or just clear up what happened.
01:03:57.210 - 01:04:35.098, Speaker A: Yeah, I'd say that generally speaking, definitely there was no plagiarism. In fact, a different protocol recently accused us of plagiarism. And then because they thought that the code was written because they looked at a commit that showed it eleven days ago. But if you actually look at the real commit history that extends from before it was open sourced, our implementation happened a year before their implementation. This is not cockswap thing, but there was another thread that came out, but definitely no plagiarism. I'd say that generally speaking, there's this funny conversation that happens, which is like, who invented Uniswap? That's a really good question. Right? Because some people say I invented uniswap.
01:04:35.098 - 01:04:56.630, Speaker A: Some people say bancorp. Bancorp. The bancorp team says the bancorp team invented uniswap. Some people say vitalik invented uniswap. Some people say that Alan Liu from Gnosis, he wrote a blog post that inspired some of Uniswap work. And some people say Alan Liu invented uniswap. Another interesting person that people say invented Uniswap.
01:04:56.630 - 01:05:46.070, Speaker A: This would be like I believe Tarune answer would be like this math economics professor in the 1970s invented Uniswap. And the reality is that everything is built on top of everything, and everything is like and there's two different ways. Sometimes you look to inspiration and I'd say that even seeing how balancer handled Balancer v two in the singleton did make us feel a little bit better about singleton as a design pattern. The way we implement it is actually very different from the way they implement it. For what it's worth, we have a pretty different approach to it. There's a lot of protocols out there. There's been many protocols, I've heard of Crocswap, but there's been many protocols that have claimed uniswap Plagiarized them that I haven't even heard of before until I've seen the Tweets claiming Plagiarism.
01:05:46.070 - 01:06:24.934, Speaker A: So I say that generally speaking, good ideas, some things are kind of like convergent. If something is a good pattern, multiple people sometimes converge on it as an idea at the same time. Additionally, sometimes you do hear things and they make their way into the common sphere and you think about them and they influence what you're doing. I think good protocols do take the best patterns that they see around them for sure. It's not Plagiarism to learn from the industry you're operating in. Plagiarism is directly copying code. So I'd say that, generally speaking, we exist in this world.
01:06:24.934 - 01:06:44.190, Speaker A: There's a lot of innovation that's happening around uniswap. There's a lot of interesting design patterns. We're learning from them, we're also having our own ideas, and we're converging on what we think is the optimal AMM design. And I don't know the specific features. I don't even know if Crocswet was open source yet. I don't know the specific features of that protocol.
01:06:45.650 - 01:07:25.820, Speaker B: Yeah, it was something like whatever, they had used some technique for one problem, and then you guys had borrowed the technique to a different problem. It wasn't like apples to apples or anything like that. And I think the two people are friendly, but again, I think they had one of those licenses, whatever it was, the copy left one, where if you use it, then you should be also copy left. Again, you guys didn't copy it exactly, so that doesn't apply, really. But anyway, I just saw so many people talking about it, I figured we should just address it.
01:07:26.670 - 01:08:12.102, Speaker A: There was another one where there was like that came up. Also, this again, a lot of people want to be like, oh, yeah, but there was, like, one that came up where there was, like, an MIT version and a GPL version of a library, and we linked to the GPL version, even though there was an MIT version and the MIT version we could have. And so we accidentally linked to the wrong version. There's things like that that come up. We always appreciate these types of things, but at the same time, V Four is built on ideas that we've been trying to build for like five years. Right? And we've tried to learn from the best smart contract patterns in the industry, but there's no specific accusation I've seen. Feels like it's had any real weight.
01:08:12.246 - 01:08:39.940, Speaker B: Yeah. So Sam Kamesian of Fracs Tweeted, underappreciated benefit of all pool tokens living in a single contract in Univ Four, every stablecoin's blacklist function is effectively dead. And I saw that in the replies. Columbia Business School professor Austin Campbell said that this poses the risk that the US could put a freeze order on uniswap V Four or blacklist it, I don't know have you looked into that risk, and is this something you're trying to mitigate for?
01:08:40.710 - 01:09:32.450, Speaker A: I don't think that I think that things like this USDC is a token that has a blacklist function. They could already blacklist any uniswap pool. This idea is definitely that, oh, maybe to blacklist one, you have to blacklist all of them. But I think that the way that USDC blacklist has been used historically has been always to target it at individuals, not at entire protocols. Right. Technically, it could also mess with MakerDAO or Aave. I don't think that this is, like this sort of idea of, like I don't to me, it doesn't feel like there's any categorical difference here from what's already been out there in the like there is some, like, oh, it's harder to be more targeted at specific uniswap pools or something like that.
01:09:32.450 - 01:09:57.466, Speaker A: But you could still freeze USDC for any user who would want to withdraw from their uniswap. Again, I don't know. I think it's, like, a funny observation, I guess, in a sense, but it's not like, in my mind, it doesn't really change the fundamental dynamics of what is possible and isn't possible with the USDC blacklist. I think it's, like, about the same in some capacity. I don't know.
01:09:57.568 - 01:10:39.240, Speaker B: Okay, so now I have a question, and you, I'm sure, are very well aware that US. Regulators are looking at ways to regulate DeFi. And one of the suggestions that we saw potentially making its way through Congress last fall was the notion that the front ends would be regulated. And when I was learning about kind of these hook contracts and everything, I couldn't help but think, oh, could a hook be used to implement and maybe that might require us to have blockchain based identities, so it could be super far in the future. But I just thought, oh, is that something that hooks could be used for?
01:10:40.490 - 01:10:58.750, Speaker A: Is it possible to create I mean, it's trivially possible to create pools. For what it's worth, it's already trivially possible to create pools that require KYC. Like, you can create a token, and the transfer function requires KYC, and then people will only be able to swap with that token if they are KYC'd.
01:11:00.050 - 01:11:03.246, Speaker B: Yeah, because there's already KYC DeFi. Yeah.
01:11:03.268 - 01:11:29.962, Speaker A: Okay, right. And so, yes, you could instead do it within a pool instead of within a token. Again, I don't think there's, like, a categorical difference in terms of what is possible. I think that is it more gas efficient? Maybe it is. I don't know. But that doesn't, to me, seem like a meaningful difference in capabilities in terms of how regulation plays out. That's obviously very that's, like a separate thing.
01:11:29.962 - 01:12:01.234, Speaker A: And I don't think that there's, like, a direct, suddenly uniswap v four. It's categorically different in how it interfaces with something like that. I'd say that, yes, it is possible to create hooks that do that, but I don't think that it's also possible to create pools. In fact, people have already created pools that do that. Historically, people have created tokens with whitelists and created pools on uniswap with them. And those have existed for actually, there were ones that existed back in the v one days that did that.
01:12:01.352 - 01:12:02.258, Speaker B: Oh, interesting.
01:12:02.424 - 01:12:53.166, Speaker A: There was. That project realty? It was like real estate. They were tokenizing houses and they created a whitelist and you could only I don't think we like anyway, long story short, there have been projects that have been playing with this concept since the beginning of time or since the beginning for a long time. But I don't think before it's different on that front. It's always been possible, it's never been hard coded into the protocol as a requirement. I think it's like a decent I see uniswap, like I see ethereum, like I see the internet. It's like a decentralized piece of infrastructure you can do a lot of things with and you can both break the law on the internet and comply with the law on the internet.
01:12:53.166 - 01:13:52.294, Speaker A: The internet is the internet. And I'd say that when you're building a product on top of a decentralized protocol, we obviously always there are a lot of things that we do in our front end to make sure that we're compliant with the laws in the jurisdictions in which we operate. We have lawyers, we do things to protect our users, et cetera. And so I'd say that maybe the only thing that I'll touch on with laws making their way through is generally speaking, what is a little bit sad and unfortunate is that the US's approach to regulating crypto has not been very thoughtful or very good. And it feels like the US is way behind other countries in terms of how they think about crypto and how they're approaching regulating it. We're starting to see European countries, france, the UK start to try to understand DeFi and study it and be thoughtful around how they interact with it and what to do with it. And then you have the US.
01:13:52.294 - 01:13:55.746, Speaker A: Where it feels like it's mostly like political grandstanding, unfortunately.
01:13:55.938 - 01:13:59.846, Speaker B: And are you thinking about moving anywhere because you lived in the US.
01:14:00.028 - 01:14:39.542, Speaker A: I mean, I'd say that generally speaking, first of mean, I love living in the US. I don't want to move. I'd say that we do always consider like, oh, should we ever open up an office somewhere else? But I'd say that generally speaking, uniswap has users all around the world, right? The US isn't the only country that exists, as much as sometimes people pretend it is. And so 70% of our users are outside the US. I don't know. I like where I live, don't intend to. I also do my best to I don't feel like, oh, I'm in legal danger living in the US.
01:14:39.542 - 01:14:50.300, Speaker A: Because I am very thoughtful about the legal risks I take on. And people get very mad at me sometimes when our company makes decisions based on managing our legal risk, but sometimes you got to do it.
01:14:50.910 - 01:15:23.060, Speaker B: So we've alluded to this throughout, but it does seem that the way this is going, other projects that might have thought of building their own automated market makers might instead now just build on Uniswap. And because of all the customization and everything, it sort of feels like it could become kind of like the Amazon of this type of activity. This sort of like everything store for anything swap space. So I was wondering if you thought that would affect the core principle of decentralization that crypto is built on.
01:15:23.670 - 01:15:56.350, Speaker A: Look, I don't think so. I think that look, anyone can always compete with it. Anyone can always build an alternative AMM system. I'd say that like the ability to customize more with it. I'd say that like if people are using uniswap because it is better than alternatives, it's not really automatically essential. The important thing is that you can compete with it. I'd also say that there is a difference between the types of powers.
01:15:56.350 - 01:16:53.280, Speaker A: The cool thing about useful fee four is it's still an immutable smart contract, right? Even though it might gain momentum and traction and network effects. That doesn't give like me, Hayden Adams, as the person who created the company that did a lot of the initial development of it, I still don't have the ability to steal everyone who uses it funds, right? I still don't have the ability to prevent someone from I don't have the ability to prevent someone from using uniswap before. Someone can build a project on top of Uniswap before too soon, I guess. But what matters is the fundamental properties, right? Like ethereum. Gaining market share relative to other l ones doesn't centralize the industry necessarily. I'd say that in some ways the bigger ethereum grows, the more decentralized it is. And so I don't think that in a world where I had a secret backdoor to Uniswap, maybe that would be really bad.
01:16:53.280 - 01:17:21.900, Speaker A: I think that generally not maybe that would obviously be very bad and that would be a very centralizing force. But I'd say that the protocol in the sort of decentralized state that it reaches and the sort of way that the smart contracts are immutable and all of that, I think, is like, if it continues to gain in market share and growth, it doesn't automatically mean greater centralization because there's no single person who has inherent control over the system.
01:17:25.070 - 01:18:01.462, Speaker B: Yeah, that's such a good point. I just realized you're right. It just creates almost like god, I'm not a biology person, so hopefully an environmental person listening to this won't get mad at me. But I think of certain ecosystems or you go into a forest where there's moss everywhere and you just imagine there's all kinds of activity happening on that. So it kind of creates some sort of habitat for all different types of developers and whatever to build, um, all right. Well, Hayden, this has been such a fascinating discussion. Thank you so much.
01:18:01.462 - 01:18:03.800, Speaker B: Where can people learn more about you and your work?
01:18:04.170 - 01:18:21.498, Speaker A: Yeah, people can learn about me and my work, I guess. I'm often on Twitter. Uniswap. On Twitter. At uniswap. Uniswap.org, you can read about the protocol, contribute to it on the Uniswap GitHub.
01:18:21.498 - 01:18:41.540, Speaker A: You can download our mobile wallet if you like. Mobile know uniswap wallet launched recently. But yeah, learning about our, you know, listen to this podcast episode you already finished, I guess. Listen to other podcasts I've done recently. Read our blog. I don't know.
01:18:42.310 - 01:18:45.614, Speaker B: All right. It's been a pleasure having you on Unchained.
01:18:45.742 - 01:18:51.126, Speaker A: Yeah, it's been great being here. Probably shouldn't wait five years the next time.
01:18:51.308 - 01:18:53.138, Speaker B: Yes, we'll have you back sooner.
01:18:53.314 - 01:18:55.720, Speaker A: Yeah, it's my fault, not yours, I think.
01:18:56.490 - 01:19:14.250, Speaker B: All right, thanks so much for joining us today. To learn more about Hayden and Uniswap V Four, check out the show notes for this episode. Unchained is produced by me, Laura Shin, with help from Kevin Pukes, Matt Pilchard, Zach Stewart, Wanda Ranovich, Sam Sriram, Jenny Hogan, Jeff Benson, Leandro Camino, Kima, Jamdar Shashank and Margaret Couria. Thanks for listening.
