00:00:06.170 - 00:00:11.578, Speaker A: Hello everyone. Thank you for coming. I'm Eulis from APWINE, one of the co founders of APWINE Finance.
00:00:11.578 - 00:00:37.582, Speaker A: And today I'm going to be presenting this workshop and mainly three different points. You know what APY is, how it works, and how you can integrate it into your own hackathon project in order to win some prizes. You so we're going to begin with what is APY and why did we build it in the first place? It all started during the DFI summer of 2020, where APYs were just crazy three digits.
00:00:37.582 - 00:00:53.706, Speaker A: And we just saw the opportunity here because there was no way to bet on the loss on the rise of yield. So essentially reduce your risk. This is why we came up with a new primitive in DeFi called yield tokenization.
00:00:53.706 - 00:01:21.522, Speaker A: And now yield tokenization is mainly the core of APY Finance and this is what allows you to get your yield in advance or trade yield. So yield tokenization allows you to buy, sell and hedge your risk in DeFi on your yield. Now, how does it work? It all begins with if you use some funds on Ave or Compound or any yield generating platform, you have some interest bearing assets.
00:01:21.522 - 00:01:38.230, Speaker A: Interest bearing assets is you just hold your tokens and it increases in value or just increases yield in your wallet. So as an example, I've taken Adai, a pretty common asset to hold in your wallet, it just increases in value. And this is an interest bearing token.
00:01:38.230 - 00:01:47.658, Speaker A: Now, if you deposit that on APY, this is the yield tokenization part. We're going to split it into two tokens. So one of them is going to be the principal token.
00:01:47.658 - 00:02:06.680, Speaker A: And this represents the value of your deposit at the time when you deposit. So essentially, imagine you deposit 100 Adai on AP wine, you're going to get 100 PT principal tokens. And these principal tokens are always going to represent 100 Adai, right? It's always the same value.
00:02:06.680 - 00:02:28.010, Speaker A: And now what's interesting is the future yield token. The second token that you get, and this is going to constantly when the Ada is generating yield from Ave, it's going to put this yield not into the principal token, but into the future yield token. So essentially, we're splitting the capital and the future yield.
00:02:28.010 - 00:02:44.990, Speaker A: And this is what allows us to get this entire marketplace of future yield going on. So you can mint PT and FYT with your interest bearing tokens and you're never locked in the platform. You can always withdraw if you still have the PT and the FYT.
00:02:44.990 - 00:03:10.182, Speaker A: And then we have the AP One AMM, which is a core part of the protocol. And the AP One AMM allows you to sell this FYT or buy PT or just trade between any of the three assets of Adai, PT, FYT, in order to build your own strategies or get your yield in advance or fix your rate or so on. Our AP One AMM is the result of many months of research.
00:03:10.182 - 00:03:20.378, Speaker A: This is the APY and AMM v one. We have Impermanent loss protection mechanism for LPs. So if you want to become a liquidity provider on APY and it's also very easy to do so.
00:03:20.378 - 00:03:35.534, Speaker A: And maybe we can chat about it after the workshop. But in order to get straight into the workshop, I'm just going to mention a few strategies here and then we're going to get into what we're going to build today. Some of the strategies you can build with APY include PT trading.
00:03:35.534 - 00:03:46.978, Speaker A: So this is like equivalent to a fixed rate, essentially buying PT at a discount. Imagine if you're buying PT at 0.9, so 90% of what it's really worth.
00:03:46.978 - 00:04:01.340, Speaker A: It means that if you wait till the end of the period, for example, three months, this is what we work with. You're going to make a 10% profit because you know for sure you're buying something that is going to be worth more in the future. And this is how you fix your rate.
00:04:01.340 - 00:04:20.218, Speaker A: Now, without going into too many strategies, this is what we're going to be doing today. Today's workshop is about going back to the future to fix your rate on your yield. So we're going to be leveraging the yield tokenization part of APY plus the APY AMM in order to build this strategy.
00:04:20.218 - 00:04:28.610, Speaker A: So some of the prerequisites and if you have your computer, it's great. If you don't, you can just follow along. But it's also very easy to follow with the GitHub repo.
00:04:28.610 - 00:04:45.734, Speaker A: So you need Yarn node JS. And we're going to be starting now with the repository setup. All right, it's fine.
00:04:45.734 - 00:04:51.020, Speaker A: I'll just keep like this. All right. This is going to be a one handed workshop, which is going to be interesting.
00:04:51.020 - 00:05:01.114, Speaker A: Let's go with the repository setup. I'm just going to get this a little bit higher. And we're going to git clone GitHub.com
00:05:01.114 - 00:05:16.814, Speaker A: Eulidevyworkshop. And if we clone this repo and we navigate to it, let's open it in code to better see it. And you're going to be able to see everything that it contains.
00:05:16.814 - 00:05:32.310, Speaker A: The first step you're going to want to do is copy the environment file from the example file to your environment local file. So F dot example two amp. I've set up an API key for you to try.
00:05:32.310 - 00:05:36.422, Speaker A: Please don't use it for anything else. It's not going to work. All right.
00:05:36.422 - 00:05:44.330, Speaker A: And then we just want to install all the dependencies. So you just want to go with Yarn. This is going to install all the packages just like NPM.
00:05:44.330 - 00:05:57.834, Speaker A: And while we do this, let's take a look at how we are going to follow along. So first step we're going to do is Yarn start node. This is going to start a node, a fork on mainnet.
00:05:57.834 - 00:06:17.790, Speaker A: So essentially, we're going to be simulating our strategy without actually using money, which is very useful, because if your strategy doesn't work, you likely just want to simulate it before. So if we do yarn start node, this is going to do a local blockchain fork. And then we want to open a new tab.
00:06:17.790 - 00:06:31.880, Speaker A: And every time we want to follow along a step, you can just do yarn step one, yarn step two, all the way to five. So just done as an example, let's do yarn step one. And then we can go look into the code to see what it does.
00:06:31.880 - 00:06:40.774, Speaker A: So here we can see that it initializes the SDK. And this is the first step that we're going to take a look at it. So first step is the SDK creation.
00:06:40.774 - 00:06:51.166, Speaker A: Very simple, just one liner. This is going to be a JavaScript workshop, not a solidity workshop. But if you're interested in integrating within solidity our contracts, we can chat about it.
00:06:51.166 - 00:07:04.194, Speaker A: It's also very easy to do. So, first step, SDK is equal to new APY and SDK, you want to put your provider, your signer, everything that you need, the network which is going to be mainnet. And that's it.
00:07:04.194 - 00:07:13.320, Speaker A: A new world opens to you, the world of future yield. So this is the first step that we just did. The SDK is now initialized and ready to work.
00:07:13.320 - 00:07:30.380, Speaker A: Second step. So just to explain how this is going to work, what we're going to do is first see how we can do the very basic PT trading strategy. So buying PT for cheap and waiting till the end and seeing how much Apr do we get.
00:07:30.380 - 00:07:47.374, Speaker A: And the second step, which is the real workshop that we're going to do, is go through future yield. So essentially tokenizing into Ptfyt and then swapping our future yield for fixed rates. And we're going to see that this is much more capital efficient.
00:07:47.374 - 00:08:00.374, Speaker A: So hang on, this is the first step. How do we retrieve all the futures? APY supports all the assets that we support, all the platforms and so on. What we can do is this.
00:08:00.374 - 00:08:05.462, Speaker A: Futures is equal to SDK. fetchall future aggregates. Very simple.
00:08:05.462 - 00:08:17.142, Speaker A: You get all the information that you need. Let's try out. And while we do this step, so this is going to actually run on the main network.
00:08:17.142 - 00:08:29.406, Speaker A: We can take a look at what it does here. So if we go to script and then step two, get all futures, we can see exactly what it does. So here fetch future aggregate from address.
00:08:29.406 - 00:08:44.738, Speaker A: And we just pat whatever future vault address we want. And if we go back here, we can see here the results of all the assets that we support at this time of the fork. This was a fork from a few months ago.
00:08:44.738 - 00:08:57.362, Speaker A: We now support many, many assets around two chains and many different platforms. But here we have for example, and this is going to be the one we are going to look at. We have staked ETH from Lido Finance.
00:08:57.362 - 00:09:17.806, Speaker A: Anybody ever used a staked ETH before? Yeah. So you can generate Apr at 5%, 6% depends on what you're getting, right? And this is a period that expires expired rather on the 23 of March of 2022. So this is an older fork, but the principle stays the same.
00:09:17.806 - 00:09:42.710, Speaker A: You can try with a newer block number and it's going to work just as well. And then the next step we want to do is compute the Apr that we would get if we were to buy the PT for this specific staked ETH future. So how do we do this? We're going to use the AMM this time because we want a special price, right? If you want to buy or sell anything, you're going to have to go through the APY and AMM.
00:09:42.710 - 00:09:51.126, Speaker A: So price is equal to SDK. Fetch spot price, you pass the vault. So this is going to be our stake ETH vault.
00:09:51.126 - 00:09:57.740, Speaker A: And then from and to these are two different strings. So you can put underlying PT or FYT. Very simple.
00:09:57.740 - 00:10:12.698, Speaker A: And this is what we're going to do right now and see the results. So yarn step three and we can take a look at what it does here. Compute PT apr.
00:10:12.698 - 00:10:24.222, Speaker A: So here the result is that we get an Apr of 35%. Remember, this was before. How is that possible? The magic of DFI this was very close to the launch of AP Wine.
00:10:24.222 - 00:10:47.350, Speaker A: So there were still many opportunities available for Arbitrage. There are still many opportunities available, but just keep in mind that this was an older date. So essentially at this time you could get 35% by just buying PT and this is a fixed rate, so you're guaranteed hacks aside that you're going to get your Apr.
00:10:47.350 - 00:11:07.010, Speaker A: So how do we do this? We just do compute apr. So this is a helper utility method that just according to a price and an expiration date, you can compute how much percentage this is going to give you. So for example, if you're getting 1% on one month, it means you're getting 12% per year.
00:11:07.010 - 00:11:12.814, Speaker A: Very simple. This is what it does. So we are getting a 35% Apr.
00:11:12.814 - 00:11:29.160, Speaker A: This is very, very good. But there's one detail, the spot price is never equal to what you're really getting. So if you were to buy $1 million worth of PT, you would have a lot of slippage because the liquidity at this time was much lower.
00:11:29.160 - 00:11:52.640, Speaker A: So what we need to do is go through the other strategy which is much more capital efficient. By capital efficient I mean that you can have much bigger volume for the same exact Apr or very similar. So the efficiency that we get is good, but it can be better with lower resources, so lower liquidity, we can get a same or better result.
00:11:52.640 - 00:12:07.806, Speaker A: And this is what we're going to do in this new step. We're going to go through not only buying PT with our ETH, but directly staking on Lido finance. So ETH, staked ETH and then deposit that on APY.
00:12:07.806 - 00:12:15.926, Speaker A: So it's going to go like this. ETH staked ETH and then Tokenize into PT and FYT. So this is the step we're going to do right now.
00:12:15.926 - 00:12:31.946, Speaker A: Let's do it yarn step four. And we can take a look at what it does. So essentially we're depositing I made another utility function here, very simple, to deposit ETH on Lido Finance.
00:12:31.946 - 00:12:51.090, Speaker A: So this is going to convert your ETH into staked ETH and then we're going to deposit on our future vault here. And what you get at the end is if you deposit ten ETH on Lido Finance, you are getting 9.93 PT and 9.93
00:12:51.090 - 00:13:05.638, Speaker A: FYT. Why is that? Why don't I get exactly ten PT and ten FYT? The reason for this is that the future already started a few days ago. So it already generated yield, right? So you need to account for this.
00:13:05.638 - 00:13:22.430, Speaker A: But if you were to withdraw everything, you would get your exact ten staked ETH back. This is because one FYT in this case already has some value. So if you add the value of your PT and the value of your future yield, it's going to be exactly ten staked ETH.
00:13:22.430 - 00:13:33.680, Speaker A: Nice. Now we're ready for the last step. We have our PT, our FYT, and what we want to do is go from FYT to PT, so maximize our fixed rate.
00:13:33.680 - 00:13:48.150, Speaker A: There are also other strategies you can do. For example, you could do the other way around. You could just swap your PT for FYT, which means that swap your FYT for ETH which means that you would get your yield in advance.
00:13:48.150 - 00:14:06.858, Speaker A: Remember, FYT is the future yield token. If you swap it for ETH, it means essentially that you're selling your future yield for yield today, right? And this is where it gets super interesting because you can do so many strategies with it. So swapping FYT, let's do it.
00:14:06.858 - 00:14:19.354, Speaker A: SDK swap in, provide the AMM entity and then from FYT to PT provide the amount. Very simple. It's going to do the routing automatically from FYT to PT and then ETH.
00:14:19.354 - 00:14:25.054, Speaker A: So you don't need to care about it. Now let's look at the result. Yarn step five.
00:14:25.054 - 00:14:40.862, Speaker A: This is the last step and then we can go with some questions. So if we do this, it's going to do a lot of computations and simulate everything on the blockchain. And final guaranteed Apr with this strategy is 34%.
00:14:40.862 - 00:14:52.700, Speaker A: Again, this was during the time. You can try again with a different block number, for example, today's block number to see what you would get. And it could be interesting to do so and simulate by your own or you can just try with real money.
00:14:52.700 - 00:15:14.046, Speaker A: So this is what we get. The difference with this is that this is much more capital efficient. So lower slippage, bigger trades, up to ten times depending on the Apr and the APY and the pool that you've selected and the composability because you can swap from any of PT FYT ETH.
00:15:14.046 - 00:15:27.566, Speaker A: So it's very interesting to use the AMM in that matter. Right? So we just basically with a few lines of code, just five very simple step. If you put it all in one file, it's going to be even simpler.
00:15:27.566 - 00:15:43.370, Speaker A: But I've kind of split it to make it easier. But all of this to say that in a few lines you can have your fixed rate Apr with a very simple strategy on AP Wine. So if your project, if you are still looking for ideas, we could brainstorm together.
00:15:43.370 - 00:16:10.260, Speaker A: But if there is anything from Arbitrage trading bots, leveraging of yield or there's even some people there who are working on lands like social graphs and they have some capital in the project, which means that it uses DeFi in some way. You could use AP Wine to not have the capital sit around and do nothing. So you could actually put it to work.
00:16:10.260 - 00:16:25.320, Speaker A: So this is just one of the ideas that you could leverage AP Wine for. And creative strategies are going to get rewarded for this hackathon we are sponsoring with a few prizes. Let me show you here.
00:16:25.320 - 00:16:34.310, Speaker A: All right, so we have three prizes for AP Wine. First is the wine connoisseur. This is the first prize, five K in APW.
00:16:34.310 - 00:16:51.930, Speaker A: And the two other ones, the runner up prizes are APW each. So again, if you are still brainstorming, we would be super happy to help. Some of you have probably already seen our stand, our booth at East Bogota.
00:16:51.930 - 00:17:12.440, Speaker A: So please, anytime during the weekend, please feel free to come along, chat with us and we can brainstorm together to make an amazing project. I feel like there are so many ideas possible with different projects. So it's up to you to really leverage as many kind of prizes as you can to get the best out of it.
00:17:12.440 - 00:17:24.106, Speaker A: All right, thank you so much for listening to this workshop. Really appreciate seeing you here. Also, a note that we are hiring front end developers, solidity developers as well.
00:17:24.106 - 00:17:35.390, Speaker A: So if you're interested even at the end of the hackathon to talk more with us, please reach out. We'd be super happy to chat. Thank you so much for listening today and good hacking.
00:17:35.390 - 00:18:06.886, Speaker A: Any questions so far? We have a few minutes for questions, but again, there's going to be time during the weekend to answer any of your yes, please. Yeah, good point. Yeah.
00:18:06.886 - 00:18:17.926, Speaker A: So how AP one works is you start with your adai, for example, like, very simple interest bearing asset. Interest bearing asset means that it generates yield over time. You deposit that on APY.
00:18:17.926 - 00:18:33.600, Speaker A: And the primitive that we came up with is the future yield tokenization. So it splits this interest bearing token into two tokens. If you deposit $100, your PT is going to be worth exactly $100, not more, not less all the time.
00:18:33.600 - 00:18:52.050, Speaker A: And because this generates yield all the yield over $100 is going to go not in the PT, but into the FYT. So from the time zero to the time one month after all the yield is going to go inside of the FYT. For example, I can use the principal token.
00:18:52.050 - 00:19:02.454, Speaker A: Exactly. No, please. What I meant to say is you can use compound to generate yield and then go on APY and to tokenize that yield.
00:19:02.454 - 00:19:11.946, Speaker A: It's very interesting, though, that you mentioned borrowing with Pts collateral. Yeah. Well, you could definitely try doing this during the hackathon.
00:19:11.946 - 00:19:20.302, Speaker A: This is very good first idea. Definitely something that we're looking into, but please feel free to try. Awesome.
00:19:20.302 - 00:19:46.198, Speaker A: Thank you so much for the question. Any other questions so far? Yes, please mention there's something that says PT two or PT FYT. Yeah, that's a very good point.
00:19:46.198 - 00:20:08.910, Speaker A: Maybe I can show the interface. So so basically all right, let me if you go on APY and you're going to see all the features that we support, and what you mean is here the LP APY, right. So PT, for example, underlying and then Ptfyt, right? Correct.
00:20:08.910 - 00:20:23.824, Speaker A: Oh, this one the TVL, the market Apr. Okay, that's a very good point. Maybe we can take the few minutes to explain this.
00:20:23.824 - 00:20:45.530, Speaker A: So the market Apr is what you're going to get on AP Wine if you go into either the PT strategy, so buying PT or into the FYT strategy, so selling your future yield. So let's look at an example staked ave. For example, if you go on AP Wine and you get a fixed rate, you're going to get 8.1%.
00:20:45.530 - 00:21:01.304, Speaker A: Okay. This is right now, if you sell your future yield and you get it in advance, you're going to get 7.82%. So essentially it's fixed rate on top, PT versus fixed rate plus yield in advance.
00:21:01.304 - 00:21:16.764, Speaker A: So it's lower, right, because it's had some discount. And then here the LP APY. This is going to be the APY that you can get by providing liquidity on either of those pools.
00:21:16.764 - 00:21:23.780, Speaker A: So there are two pools on APY for each AMM. On Uniswap, you have two tokens. Right.
00:21:23.780 - 00:21:31.484, Speaker A: On balancer, you have three tokens. And on APY, we also have three tokens. So the PT, the underlying, and then the FYT.
00:21:31.484 - 00:21:49.020, Speaker A: So for example, PT Dai or ETH or whatever. And FYT, there's two pools you can provide to. So if you provide to the first one, which is PT underlying, this is the most stable and riskless pool because you only get exposed to minimal and permanent loss.
00:21:49.020 - 00:22:06.640, Speaker A: This is going to give you 0.6% plus 95% in rewards of APW if you provide to the Ptfyt pool, which is a little bit more risky, but it's also another strategy because you get exposed to the volatility of the yield, you get 6.1% plus this amount in APW.
00:22:06.640 - 00:22:17.988, Speaker A: I hope that answers your question. Awesome. Yes, that's an arbitrage opportunity.
00:22:17.988 - 00:22:49.884, Speaker A: Right now, it either means that the liquidity is low enough that there might be arbitrage opportunities right now to take because, like, higher volumes can't keep up or it can mean that we're very close to the period being expired. So because there's only a few days left, there's like this arbitrage opportunity also. So if you see anything negative, it can also be a hackathon project, you know, a bot that takes advantage of any arbitrage opportunities on AP Wine.
00:22:49.884 - 00:23:03.670, Speaker A: So that's a very good point. So essentially, you would just tokenize and then sell your PT. It means the PT is above one, so there's arbitrage to be made.
00:23:03.670 - 00:23:25.150, Speaker A: Yes. You need to go on the AP one AMM, though. Yeah, but same concept as SushiSwap or uniswap or anything you're comfortable with already using.
00:23:25.150 - 00:23:35.932, Speaker A: Awesome. Thanks for the question. Anyone else? All right, again, I just want to mention, thank you guys so much for coming.
00:23:35.932 - 00:23:52.404, Speaker A: We have the booth all week, all weekend, and so please feel free. Even if you're still brainstorming ideas or if you're building on top of AP Wine, want to get some feedback and input, feel free to reach out to us and we would be super happy to help you guys. Awesome.
00:23:52.404 - 00:23:56.320, Speaker A: Thank you so much. Happy hacking again. Bye.
