00:00:07.370 - 00:00:15.614, Speaker A: My name is Tylen. I'm with the Uniswap Foundation. And today we're going to be talking and introducing you to Uniswap V Four.
00:00:15.614 - 00:00:37.206, Speaker A: So before we start, I want to say welcome to where it all started for us here in New York, when all you could do on Uniswap was basically uni for ETH. And safe to say, we've come a long way since then. And while we've done quite a bit, we're nowhere near being done.
00:00:37.206 - 00:00:53.818, Speaker A: This summer, we announced the launch of Uniswap V Four. I should say we announced that Uniswap V Four will be launching. And with it came a very new and exciting paradigm for us, which we've introduced called hooks.
00:00:53.818 - 00:01:13.810, Speaker A: Hooks allow you to now create pools that are customizable, they're modular, and they open up the design space for developers in a way that we haven't previously ever seen before at Uniswap and in DeFi. And I think it's a great time to be a developer on Uniswap. So hooks aren't the only new thing here.
00:01:13.810 - 00:01:27.666, Speaker A: We've added so many new things to Uniswap V Four where you probably won't recognize it's not the same things we saw at V Three. Now, we've moved to a singleton pool manager design. We've reintroduced native ETH.
00:01:27.666 - 00:01:52.318, Speaker A: We have flash accounting. All of this is meant to make Uniswap faster, more gas efficient, and easier and more fun to build with for developers. Well, how about we dive into what makes V Four different? As we mentioned, the first thing we talked about was we have a different way for pools managing from Uniswap V three.
00:01:52.318 - 00:02:08.782, Speaker A: In Uniswap V three, the way you would create pools is in a factory type style. You would end up going to the pool factory contract. The factory contract would then spin up a new totally separate pool address for you, and the pools would all live separately in different addresses.
00:02:08.782 - 00:02:21.770, Speaker A: And then you would have to call each of those addresses. So the way that works here is you set up your factory and pool manager contracts. You end up creating the contract factory and using that to interact with the pool creation.
00:02:21.770 - 00:02:34.734, Speaker A: Then you would use that contract factory to deploy your Uniswap V Three contracts when you deployed them. This is another thing. You only had three parameters that you really had to worry about.
00:02:34.734 - 00:02:51.220, Speaker A: You worry about what pool pair you're doing, ETH, USDC, and then you worry about what fee tier you have. In V three, you could choose from four fee tiers. And with that came the automatic creation of what your tick spacing was.
00:02:51.220 - 00:02:56.534, Speaker A: So your tick spacing is predetermined. You have your three parameters. Cool.
00:02:56.534 - 00:03:13.500, Speaker A: And then you deploy your contract, you create the pool. And it's nice and done here, but it's in a different contract, which is not very easy if you're a developer, to just keep on finding all these new contracts, interacting with them. It's kind of a pain.
00:03:13.500 - 00:03:33.578, Speaker A: So what we did in V Four is we introduced a singleton style design, which is all of the pools now live in one contract, and they each have their own ID. And this ID is what you would use to reference the pool in the contract. So right off the bat, we're making it simpler, we're making it more gas efficient to also spin up pools.
00:03:33.578 - 00:03:48.898, Speaker A: Now you don't have to deploy new contracts every time you spin up a pool. It all exists in the V Four pool manager. And the other thing that's different now is, as we saw in V three, there were only three parameters when it came to developing a pool.
00:03:48.898 - 00:04:01.254, Speaker A: Now you have a bit more parameters. You still have your fee tiers and your currencies. But now fee tiers are basically customizable by you as the developer to any fee tier you want.
00:04:01.254 - 00:04:10.810, Speaker A: No longer is it just four fee tiers. You can put anything you want. You can set your fee tier to 99% and see how many LPs will rush to that pool.
00:04:10.810 - 00:04:29.950, Speaker A: The other thing is the tick spacing is now there and determined by you and also new to the party, hooks. Hooks are their own separate contracts now that live in pools, and they're able to be customized, developed by you. And you could put whatever parameters you want around that, and it'll dictate how the pool performs.
00:04:29.950 - 00:04:43.394, Speaker A: We'll dive into hooks a little bit later, but I think this is where you would be initializing the pool. You'd add your pool key here. It's all of the different parameters we just mentioned previously.
00:04:43.394 - 00:05:00.954, Speaker A: And then you'd initialize this and you would have your pool then saved into the contract. This is another interesting thing. This is where before, when you were initializing pools, you would not have the ability to actually have hooks on V three.
00:05:00.954 - 00:05:14.930, Speaker A: Now, in hooks, you can see when you're creating a pool, it checks to see if there's a hook that needs to be called before this pool is created. So that's already built into the initialize function. And then, as we mentioned, it's stored in the pool contract.
00:05:14.930 - 00:05:23.262, Speaker A: The other item, no more wrapping of ETH needed. You can interact with native ETH. It's a lot easier.
00:05:23.262 - 00:05:34.120, Speaker A: And I think developers, it's probably a lot easier for you for testing and for everything. So it's simplifying trading, it's reducing the cost. And welcome back, native e.
00:05:34.120 - 00:05:55.966, Speaker A: The other item is flash accounting. Flash accounting is very important for us because now we're able to actually test out transactions and have them all happen in one batch while they're going through. So you're not wasting a lot of gas going through multiple different swaps, multiple different things.
00:05:55.966 - 00:06:23.254, Speaker A: The lock and call function in our flash accounting allows you to basically lock together a transaction, test out the different swaps that are occurring, and it looks at the delta of if everything adds up and makes sense. And for V four, this is super nice because as we mentioned, gas efficiency is a big thing that we've kind of cut down on, and this is what enables us to do this. Yeah.
00:06:23.254 - 00:06:39.850, Speaker A: So here you have your account delta. You're checking to see if everything adds up and it tracks all the balances to make sure that they're all accounted for and proper. And then you are able to get better results on your transactions and save more gas.
00:06:39.850 - 00:07:08.550, Speaker A: Now that we've gotten all that, let's go to the actual fun of everything here and why I think you as developers should be most excited. It's V Four hooks. So for the first time, you're now able to use Uniswap as a protocol and then build onto it new customizable features that could expand it from what it was as a Dex as just uniswap to now your own customized Dex with your own customized pools, your own interface.
00:07:08.550 - 00:07:22.858, Speaker A: So what it looks like is hooks can basically be called at four different action points within the Uniswap protocol. Before or after you create a pool. As we saw when we were initializing the pool, there was a hook to check.
00:07:22.858 - 00:07:46.786, Speaker A: Hey, do we call this hook here before or after a position is modified for an LP, so you're able to do cool things with that. You're able to call a hook before or after a swap occurs and before or after donate. Donate is also a new feature in V Four where basically you can give fees to LPs who in a pool, basically donating to them, incentivizing them.
00:07:46.786 - 00:08:05.160, Speaker A: If they're probably staying within a certain range of liquidity, you can give them fees to maintain in that range. So there are lots of cool liquidity mining incentives that could be created from this. So let's take a look at what you can probably build as an example to make you understand how hooks perform.
00:08:05.160 - 00:08:29.786, Speaker A: We're going to look at a simple New York Stock Exchange hook, right? What if I want to change Uniswap and make it only open during the hours of the New York Stock Exchange? So, you know, we're going to look at this and we're going to say, okay, before a swap happens, I want to enable this hook, and I want to check that. I want to run my hook for this. So I call the before swap.
00:08:29.786 - 00:08:50.306, Speaker A: I set that to true, and then I have my function in my separate hook contract that I add on to the Uniswap pool that I've created. So I have this ETH USDC pool. It can only operate during the trading hours of the New York Stock Exchange and before the swap occurs.
00:08:50.306 - 00:09:08.250, Speaker A: I, as the swapper now call this separate contract, or the contract now calls this separate contract. And it says, okay, is this between the hours of 08:00 and 05:00 p.m.? Is it a holiday? Is this, et cetera? And it checks to make sure that all of this is true.
00:09:08.250 - 00:09:25.730, Speaker A: And if it is true, then the swap can occur if it's not true, then the swap doesn't occur. And here the developer actually emitted a ding ding ding whenever a swap happens. So you know that your swap has happened and the New York Stock Exchange bell has rang.
00:09:25.730 - 00:09:50.210, Speaker A: Now, that's not the only type of hook you can build. Instead of the code, let's see other examples that might be more conceptual. What if now I have an NFT, and for whatever reason, I only want users of a certain NFT to be able to interact with my Ethosdc pool? I, as the developer, say, okay, I have a board ape NFT and only people with the board ape NFT can interact with this pool.
00:09:50.210 - 00:10:00.138, Speaker A: And then we've got the ether rock. We don't want the ether rock people interacting with this pool. So this hook would create the same scenario where it checks before a swap happens.
00:10:00.138 - 00:10:25.406, Speaker A: If this condition is met and it says the swap is successful, but if it's not met, then you can't swap on this pool. So there are lots of interesting social NFT type apps that can be built from this. And another, I think more interesting app for people, or hook for people that are interested in the liquidity provision space is what if.
00:10:25.406 - 00:10:57.022, Speaker A: Now I have all of this liquidity in a USDC pool and I'm a provider of liquidity and I am not doing a great job of managing my positions. So I could create a hook that basically says if this person is in range, they're obviously going to be doing well and they're going to be getting fees gathered. But what if my position is out of range? Well, you could create a hook that basically says we're going to send any out of range liquidity to someone like Ave where we could still have yield being generated for us.
00:10:57.022 - 00:11:23.634, Speaker A: So it's a way where hooks don't just have to be on the swap side. It's a very interesting way for you as developers to start thinking, how do I bring in more people into uniswap into this liquidity pool where we're able to do a lot more with their money and generate them fees in ways that hasn't been possible before on Uniswap. So that's uniswap v four as what we're doing with hooks.
00:11:23.634 - 00:11:45.530, Speaker A: We have $20,000 in bounties that we're giving out for people that are looking to build on top of hooks. We call it our hookathon here. So we'll be giving 12,000 to people that we're giving $12,000 as a pool prize to people that are building innovative, unique hooks that we haven't really seen before.
00:11:45.530 - 00:12:10.166, Speaker A: And we haven't seen a lot of things because this has really been out for two months. So I think the world is y'all's oyster in how you build out these hooks. And because we're still building on top of the protocol, because we're still building Uniswap v four out, we're looking for any help with developer tooling, any things that help make the developer experience a lot better for us and for you guys.
00:12:10.166 - 00:12:25.980, Speaker A: And we're giving out 3000 in pool prizes for that. For each of the pool prizes, we're probably looking to give out two to three prizes so you guys can deduce how much you can make from that. And then we have an open innovation prize at the end as well.
00:12:25.980 - 00:12:46.258, Speaker A: This is $5,000 and it will be for anyone that builds on top of Uniswap V Three or V Four eligibility to win these bounties is basically use the Uniswap V Four code. Use the uniswap v three code. Don't just integrate like a swapping app.
00:12:46.258 - 00:13:12.220, Speaker A: I think we'd like to see things that are a little bit more sophisticated than that. And if you are at all interested in continuing the discussion of V Four after this, come to me after this talk and join our hook Dojo. We've got over 200 members in there that are active developers building out hooks, sharing their ideas, answering questions, and I'm happy to give you guys the invite link.
00:13:12.220 - 00:13:42.370, Speaker A: And then we also have our V Four docs. So just this week we spun up a testnet, a roll up on top of optimism, where you're able to develop now much easier than deploying just on a local testnet. All of our information on how to do that is on there and we also have information on hook resources and how to start building with some example hook templates.
00:13:42.370 - 00:13:51.480, Speaker A: With that, I am happy to answer any questions anybody has about the protocol. I wanted to leave more time for that. Yes.
00:13:53.610 - 00:14:08.506, Speaker B: Selection on the pool I have on pools and Unsuspected user tries to swap some. Do I have any guarantee that Ipools will be used? Is there a fairness built in Snubby port?
00:14:08.688 - 00:14:23.330, Speaker A: Good question. So his question was basically I've now created a pool with a hook. And me, as a developer, how do I ensure that when someone is swapping, my pool gets routed to so that I can collect fees for my LPs on that pool.
00:14:23.330 - 00:15:03.054, Speaker A: So that is a routing problem which is dependent on the interface, dependent on where you deploy your pools. I think it brings up both a unique advantage where you can kind of have either we could go on to uniswap X on how uniswap X kind of addresses routing, but basically the short answer is it does get a little tougher for pools to get picked up because we have to make sure that safety of pools for these protocols, it isn't stealing the user's funds or doing something malicious. So there's still discussion on how we solve that right now.
00:15:03.054 - 00:15:23.262, Speaker A: But for the most part I think we might see some blend of some kind of hook list standards, some kind of protocols like taking the push on how do you actually implement this into routing. So will Labs route to it automatically? I think that's still we're still trying to figure that out.
00:15:23.396 - 00:15:26.600, Speaker B: UB Four user it took this.
00:15:28.570 - 00:15:31.480, Speaker A: Yeah, that's still being figured out. Yeah.
00:15:32.490 - 00:15:32.902, Speaker B: Cool.
00:15:32.956 - 00:15:47.890, Speaker A: Great question. Any other questions? Awesome. Well, thank you guys for your time.
00:15:47.890 - 00:15:49.300, Speaker A: And yeah.
