00:00:00.170 - 00:00:31.398, Speaker A: So let me add a short addendum to the third part of lecture eight. Just want to add sort of a little bit of extra color and details around this kind of high level theorem we concluded the last video with before we move on to the fourth part of lecture eight and talk about typical properties of random leader sequences. So the plan, remember, is we've observed that if leader sequences are unbalanced, if you have long windows where Byzantine leaders significantly outnumber honest leaders, you've got problems comes that's going to be an obstruction to all of the kinds of consensus properties we generally want consistency liveness and so on.
00:00:31.398 - 00:00:45.740, Speaker A: And so the hope is that there's some kind of converse, that sort of lack of balance is the only obstruction to getting everything we want. In other words, that having a balanced leader sequence is sufficient to get all of the properties that we want.
00:00:46.430 - 00:00:47.738, Speaker B: And so this theorem here on the.
00:00:47.744 - 00:00:58.090, Speaker A: Bottom of the slide, that's kind of exactly what it asserts. As long as you've got a balanced leader sequence, all kinds of good stuff happen. Now, starting in the fifth video of this lecture, we're going to start delving into the proofs.
00:00:58.090 - 00:01:11.460, Speaker A: And as we'll see, there's actually a little bit more nuance to the exact statements we're going to show. So just for those of you that are actually going to skip those proofs, I just want to make sure you have sort of a slightly more accurate understanding of exactly how the rest of this lecture is going to go.
00:01:12.310 - 00:01:13.906, Speaker B: So the first of these properties, the.
00:01:13.928 - 00:01:39.958, Speaker A: Common prefix property, that's the one we're going to prove in the fifth video of lecture eight, that's the one that says all longest chains agree, except possibly on their last K blocks. In other words, all longest chains share a sort of very long common prefix of all but the last K blocks. And in that fifth video we are going to prove formally the common prefix property under the assumption that the leader sequence is balanced, which again we know is a necessary condition.
00:01:39.958 - 00:01:48.080, Speaker A: And under the five assumptions that we laid out sort of in the second video of lecture eight. So remember, we had a one through a five.
00:01:48.770 - 00:01:50.078, Speaker B: But actually that proof we're going to.
00:01:50.084 - 00:01:55.734, Speaker A: Do in the fifth video. We're going to use the stronger form of assumption A four. Let's call it a four prime.
00:01:55.734 - 00:02:21.910, Speaker A: So remember, assumption A four just says that while a leader may be able to propose any number of blocks, each of those blocks has to name as a predecessor some block that was created in some previous round. So you can't, for example, just sort of announce sort of a cycle of blocks all pointing to each other. That was assumption A four, which implies in particular that on any given chain, a given leader can only add one block to a given chain, though it may be able to add blocks across multiple chains.
00:02:21.910 - 00:02:40.058, Speaker A: Now, as we've discussed, and as we'll see in lecture nine in the proof of work implementation of longest chain consensus as made famous by Bitcoin, you actually have a stronger property. That's true. Which is that actually a leader, whether they're honest or Byzantine, they literally just cannot produce more than one block in the round that they're leader.
00:02:40.058 - 00:02:43.790, Speaker A: They're really just stuck producing at most one block.
00:02:44.370 - 00:02:45.902, Speaker B: So that's a stronger assumption.
00:02:45.966 - 00:02:59.430, Speaker A: It is, as we'll see, satisfied in the proof of work setting. And it's under that stronger version of assumption A four along with balancedness of the leader sequence that we're going to establish the common prefix property in the fifth video of this lecture.
00:03:07.320 - 00:03:09.044, Speaker B: Now, that may disappoint some of you, right?
00:03:09.082 - 00:03:38.204, Speaker A: I promised you earlier that assumptions A one through a five just sort of the weaker version of assumption A four should already be enough to deduce all of the consistency and liveness properties that we want of longest chain consensus. But never fear, you can prove the common prefix property using the weaker assumption A four, the version of the assumption that's appropriate for the permissioned and proof of stake settings. You do, however, have to make a stronger assumption about how balanced the leader sequence is.
00:03:38.204 - 00:04:08.280, Speaker A: So there's going to be some kind of balanced on steroids condition whereas long as the leader sequence satisfies that balancedness on steroids, then even under the weaker assumption A four, it will again be true that the common prefix property holds. And we're not really going to be cheating by making the stronger balanced on steroids assumption. And the reason being is that because if you randomly chosen leaders, we're only going to prove in the next video, the fourth video, that they satisfy with higher probability the basic balancedness condition that we're focusing on.
00:04:08.280 - 00:04:35.296, Speaker A: But a more sophisticated probabilistic analysis actually shows that random leader sequences also with high probability satisfy the balancedness on steroids condition. So given that, given that random leaders give you the stronger balancedness assumption and given that that coupled with assumption A four allows you to prove the common prefix property, we are actually going to get all of the consistency and liveness properties we want for longest chain consensus. For all of the scenarios we've talked about, permission, proof of work, proof of.
00:04:35.318 - 00:04:39.088, Speaker B: Stake, whatever, that alternative proof of the.
00:04:39.094 - 00:04:57.136, Speaker A: Common prefix property that uses the weaker assumption A four, but then the stronger balanced assumption to compensate that's kind of harder mathematically to prove. It would be sort of a nice result to prove in a more advanced course. It's a little far afield for us here so we'll just be content in that fifth video to show that the common prefix property holds in the proof of work setting.
00:04:57.136 - 00:05:06.520, Speaker A: So in other words, assuming the Byzantine leaders can only produce one block in a given round and assuming just the more minor, just the mild balancedness assumption on the leader sequence.
00:05:17.380 - 00:05:18.048, Speaker B: So that's the.
00:05:18.054 - 00:05:30.340, Speaker A: Bad news, if you want to call it that. Sort of the situation around the common prefix property isn't quite as clean as we might have hoped. It would have been great if just under the weak balancedness condition and under sort of the weak assumption A four, we had the common prefix property.
00:05:30.340 - 00:05:52.872, Speaker A: That's actually not true, but it's sort of fine. Right under the proof of work setting we can get away with the simple balanceness condition in the proof of stake and permissioned settings where we have the weaker assumption A four, we just need sort of a stronger property that random leader sequences almost always have. The good news is that's only the only property where the subtlety is going to exist.
00:05:52.872 - 00:06:10.452, Speaker A: So when we talk about finality, that'll be in the 6th video in lecture eight, we will see there that finality literally just reduces to the common prefix property. So once you've established the common prefix property for whatever reason, then you will sort of get finality as an automatic consequence. So no additional nuances there.
00:06:10.452 - 00:06:47.726, Speaker A: And then when we talk about liveness, actually the proofs are just going to work using this sort of weak balancedness condition that we've stated here and the weak version assumption A four, which holds in all of the scenarios that we're interested in. We'll also then talk about a strengthening of liveness known as a chain quality guarantee that will also only need the basic balancedness condition and also just the basic assumptions a four. So now that my conscience is clear and we've talked about all of these subtleties, let's go ahead and sort of push forward.
00:06:47.726 - 00:07:01.558, Speaker A: So in the next video, in the fourth video of lecture eight, we're going to think about randomly chosen leaders. We'll establish that randomly chosen leader sequences do indeed, with high probability, satisfy the basic balancedness property. We'll give a proof sketch of that.
00:07:01.558 - 00:07:17.042, Speaker A: As I said, you can prove stronger things about the structure of random leader sequences and that is useful for the other version of common prefix property. We won't be proving that, we'll just be proving the basic balancedness condition and then we'll move on and have a video on each of common prefix and finality and liveness.
00:07:17.106 - 00:07:18.850, Speaker B: So I'll see you there. Bye.
