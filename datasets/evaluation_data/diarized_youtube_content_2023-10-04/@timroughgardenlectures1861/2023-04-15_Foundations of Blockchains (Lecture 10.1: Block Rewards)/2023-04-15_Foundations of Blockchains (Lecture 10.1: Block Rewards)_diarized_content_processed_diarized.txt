00:00:00.250 - 00:00:27.378, Speaker A: Hi, everyone, and welcome to lecture ten of this lecture series on foundations of blockchains. And lecture ten marks sort of an interesting turning point for us in this lecture series, right? Because thus far we've been focused pretty much entirely on the problem of consensus, which, you know, of course, is the fundamental problem that pretty much any blockchain protocol must solve. It must keep a bunch of computers in sync so that they agree on the state of the blockchain.
00:00:27.378 - 00:00:47.980, Speaker A: So accordingly, we've been studying lots of protocols and possibility results, possibility results, thinking about consistency, thinking about liveness, sort of looking at different models of the communication network. And then even in lecture nine last lecture, we started talking about permissionless, consensus, civil resistance, proof of work. But it's really all been about consensus all the time.
00:00:47.980 - 00:01:25.778, Speaker A: So I'm guessing there's two things that you're sort of definitely wondering about. The first thing, maybe you've been wondering about it all along, but you probably especially started wondering about it in lecture nine last lecture, when we started talking about proof of work and nodes running a protocol, sort of working hard to try to solve these hard crypto puzzles, which is we haven't talked at all about incentives. So why would any node bother to run one of these consensus protocols, okay? Like if you're IBM in the 1980s and you're just buying seven servers to sort of replicate a database for high uptime, who cares? You don't need to worry about incentives.
00:01:25.778 - 00:01:36.780, Speaker A: Like the company just buys the seven servers and runs it. End of story. But in a permissionless context, right, where basically nodes can just sort of start running the protocol whenever they want.
00:01:36.780 - 00:01:50.270, Speaker A: Especially if running the protocol involves sort of doing all this hashing and sort of looking for solutions to hard crypto puzzles. What would motivate a node to actually bother to join the party and run your permissionless consensus protocol?
00:01:51.250 - 00:01:52.798, Speaker B: A second thing I'm sure many of.
00:01:52.804 - 00:02:08.440, Speaker A: You have been wondering about maybe all the way back since lecture number one. You might be surprised that we've now had nine lectures, right? It's probably, I don't know, 20 hours or something of lecture material. We haven't talked about cryptocurrencies at all.
00:02:08.890 - 00:02:10.374, Speaker B: And some of you maybe are thinking.
00:02:10.412 - 00:02:34.030, Speaker A: Like, aren't cryptocurrencies the entire point of a blockchain protocol? The answer to that question is not really. Right? So it's definitely true that the story of cryptocurrencies and the story of blockchain protocols have been very intertwined up to this point, and that may well continue to be true for some time. But as the last many lectures have shown, you can have a blockchain protocol without having a cryptocurrency.
00:02:34.930 - 00:02:36.446, Speaker B: And this lecture will be the first.
00:02:36.468 - 00:03:05.800, Speaker A: One where we're really talking not about blockchain protocols completely abstractly, but specifically the protocols that host a cryptocurrency, that have some currency native to the protocol. So what do I mean by a native currency? Well, I just mean a currency where the money is minted by the blockchain protocol, kind of that's the only way it comes into existence. And then furthermore, once it's in existence, sort of ownership of the coins that exist that's also tracked by the blockchain protocol and its state.
00:03:05.800 - 00:03:33.434, Speaker A: Now, obviously there's a lot of things one can say about cryptocurrencies. In this lecture we're going to focus quite narrowly, we're going to look at the use of cryptocurrencies to answer the first question that we said might be on your mind, namely the question of what incentivizes sort of nodes to run a protocol in the first place. And one very convenient way to do that is through the idea of block rewards where you reward nodes for contributing to the protocol.
00:03:33.434 - 00:04:06.890, Speaker A: So for example, if the nodes are running Nakamoto Consensus and trying to solve hard crypto puzzles for the privilege of sort of publishing the next block, every time some node is successful and actually does produce a block that winds up on the longest chain, you could imagine rewarding that node in some way. Now, where is that money going to come from? Well, the most sort of easiest solution to that is that the money would come from the protocol itself. That is, the rewards would be doled out in the blockchain's native currency.
00:04:07.630 - 00:04:08.762, Speaker B: So that's what we're going to focus.
00:04:08.816 - 00:04:25.566, Speaker A: On in this lecture, the pros and cons of motivating nodes to run your protocol through block rewards denominated in a protocol's native currency. We'll see that's already a quite interesting and deep topic. In the next few lectures, we'll study some other economic and incentive issues around cryptocurrencies.
00:04:25.566 - 00:05:04.190, Speaker A: So in Lecture Eleven, we'll focus on another convenient use of having a native currency, which is you can have transaction fees paid in that native currency, right? So if you have a blockchain protocol, usually you want for each transaction you execute, you probably want to charge at least some nominal fee, like a penny or something, just as an antispam device. And then if you have sort of very high contention for the blockchain, you may want to charge much more than that just to make sure the most valuable transactions are the ones that you're spending your time on. So that idea of having transaction fees paid for in the blockchain's native currency, that'll lead us to the topic of transaction fee mechanism design.
00:05:04.190 - 00:05:06.670, Speaker A: So that's what we'll talk about in Lecture Eleven.
00:05:07.410 - 00:05:09.354, Speaker B: Lecture Twelve, we'll talk about a totally.
00:05:09.402 - 00:05:31.110, Speaker A: Different, really sort of convenient use of having a native currency, which is an alternative approach to civil resistance. So an approach different from proof of work that has some advantages over proof of work known as proof of stake. And so that's kind of a civil resistance mechanism that makes sense primarily if you have a blockchain protocol with its own native currency.
00:05:32.250 - 00:05:34.118, Speaker B: And then Lecture 13, that'll be the.
00:05:34.124 - 00:05:58.590, Speaker A: Final lecture in sort of this sort of four part series about kind of incentive and economic issues around cryptocurrencies and blockchain protocols that one will focus on economic security, right? So when someone talks about the cost of launching a 51% attack on a blockchain protocol, we'll talk in Lecture 13 about how those sorts of numbers get measured and how they connect to the economic value of the blockchain's native currency.
00:05:59.410 - 00:06:00.766, Speaker B: So that's a little bit of a.
00:06:00.788 - 00:06:25.842, Speaker A: Preview about what's coming up. I should mention that all of these very convenient uses of native currency, all of that is sort of above and beyond the idea that you might just sort of want a cryptocurrency for its own, right, you really literally might want to invent some digital version of cash. And that, it would seem, was sort of Nakamoto's perhaps primary motivation for why they developed the Bitcoin protocol.
00:06:25.842 - 00:06:42.378, Speaker A: But the point here is that even if you don't care about cryptocurrency as an ends, it still has tremendous value. Just as the means the means to doing all these different things incentivizing nodes, running the protocol, charging for the usage of your protocol, proof of stake, civil resistance and trying to boost the economic.
00:06:42.394 - 00:06:46.526, Speaker B: Security of a blockchain protocol. All right?
00:06:46.548 - 00:07:32.858, Speaker A: So let's now return to that sort of initial question, which is, why should a node who's sort of free to run a Consensus protocol or not, why should a node bother to do that? Now, one answer would be like, why not? Maybe to some of us, it just seems fun, like it's cool, cutting edge technology. Why not kind of download the latest and greatest blockchain protocol, make your sort of home computer a node and sort of run that protocol? But especially if you think about sort of Nakamoto Consensus, if you're doing proof of work, civil resistance, the reason why not would be there's a lot of other things you could be doing with all of your computational power, right? You could be solving other computational problems that are maybe of more intrinsic interest to you. Or, honestly, you could just be like turning your machines off and sort of saving electricity.
00:07:32.858 - 00:07:45.570, Speaker A: So especially with Nakamoto Consensus, with proof of work civil resistance, it really seems hard to imagine you could just rely on enthusiastic amateurs to run a sort of global blockchain protocol.
00:07:46.230 - 00:07:48.322, Speaker B: So the original answer to this question.
00:07:48.456 - 00:07:56.930, Speaker A: In Nakamoto's Bitcoin protocol, which has been copied by many not all, but many subsequent blockchain protocols, is to have what's called a block reward.
00:07:58.230 - 00:07:58.626, Speaker B: All right?
00:07:58.648 - 00:08:18.602, Speaker A: So for these rewards to be effective, I mean, they obviously need to be economically valuable in order to motivate the nodes to run the protocol. And so the question is, where does that money come from? And the sort of simplest solution would be, well, maybe the protocol can just mint new coins. It's obviously not like new US.
00:08:18.602 - 00:08:31.840, Speaker A: Dollars, but it's new coins in the currency. It controls the native currency of the blockchain protocol. So whenever it needs to reward a node, it just mints some new coins in the native currency and then that's what the reward is paid in.
00:08:31.840 - 00:09:05.608, Speaker A: Now, it's probably easiest to see how this would work in a longest chain consensus protocol, which are the types of protocols we're going to be focusing on in this lecture. Because in longest chain consensus, every block is just sort of a unilateral decision made by some node by the leader of some round. So to each block that winds up getting finalized, that is, each block that winds up sufficiently deep on the longest chain, it's natural to just reward the unique node that actually produced that block.
00:09:05.608 - 00:09:36.550, Speaker A: And so that's how it works sort of originally in Bitcoin and in most other longest chain protocols. So for example, if it's Nakamoto Consensus, so if it's longest chain plus proof of work, civil resistance and nodes are sort of trying to solve these hard crypto puzzles in order to sort of generate a valid block, as soon as you solve that puzzle, boom, you've created a block. And as long as that block winds up getting sort of included sufficiently deeply in the longest chain, you're going to get your economic reward for all of that hard puzzle solving work that you did.
00:09:36.550 - 00:10:08.756, Speaker A: Now, in many BFT type protocols, like take tendermint for example, which we discussed at length in lecture seven, there's still a notion of a block proposer. Like if you go back to the tendermint pseudocode, you will see that sort of in every round there's sort of a single leader node who proposes a block for that round, which is then voted upon in a couple of stages by all of the other nodes. So you could take this same tack in a BFT type protocol and just if you were the node who made a block proposal that wound up getting finalized at a given block height, it could be that you would then get some direct payment in the native currency.
00:10:08.756 - 00:10:31.270, Speaker A: There's lots of other ways to do it too. And so another way that a lot of BFT type protocols handle rewards is just, they'll more sort of amortize things. So every 24 hours, say, they'll just go back and they'll look at which node produced which fraction of the blocks over those 24 hours, and then we'll just sort of dole out some amount of rewards proportionally to the number of blocks that different nodes created during that time.
00:10:31.270 - 00:10:48.072, Speaker A: Okay, but that's a little bit of a digression. We're not going to focus on BFT type protocols in this lecture. I just sort of want you to know that like all of the types of protocols we've talked about so far, it's sort of a reasonable thing to do to reward participation by nodes in the form of some kinds of rewards.
00:10:48.072 - 00:10:57.280, Speaker A: And again, longest chain, which is what we'll focus on, there's a really simple way to do that, which is just whenever you get a block on the longest chain boom, you get some fixed reward in the native currency.
00:10:58.340 - 00:10:58.736, Speaker B: All right?
00:10:58.758 - 00:11:06.530, Speaker A: So this idea of block rewards, it solves some problems, but also creates some other ones. So let's talk about that a little bit.
00:11:07.220 - 00:11:08.608, Speaker B: So one problem it would seem to.
00:11:08.614 - 00:11:24.456, Speaker A: Solve is the problem we started with, which is why on earth would nodes bother to run one of these consensus protocols? Especially if there's a lot of work to be done in doing so. And if you're paying people stuff that has real economic value, you got to expect some people are going to find it in their interest to go through.
00:11:24.478 - 00:11:33.240, Speaker B: The trouble of running a node. Now, black rewards also solve a second.
00:11:33.310 - 00:11:49.404, Speaker A: Pretty orthogonal problem, just as a byproduct, which is whenever you have a currency, there's always the question of who gets to print money. So where do the coins come from? And so this goes all the way back to bitcoin. This is sort of yet another brilliant aspect of the bitcoin protocol, really.
00:11:49.404 - 00:12:06.144, Speaker A: Two different questions are solved in one fell swoop by block rewards. So, first of all, it obviously incentivizes sort of block production, but then secondly, that explains where the money comes from, right? So, like clockwork, nodes are going to be producing these blocks. Every time a block is produced, new coins are going to be minted.
00:12:06.144 - 00:12:23.480, Speaker A: As time goes on, the money supply will just sort of grow and grow. So a couple of comments sort of specific to bitcoin while we're on the topic. So first of all, you may know, sort of famously, there's a hard cap on the number of bitcoins, so it will never exceed 21 million bitcoins.
00:12:23.480 - 00:12:44.800, Speaker A: That said, for the 13 plus years that has been in existence, speaking here in late 2022, the supply of bitcoins has been increasing steadily over that time. There have been steady block rewards that entire time. Eventually, sufficiently far in the future, those block rewards are programmed to go to zero, at which point the money supply will just stay fixed.
00:12:44.800 - 00:13:01.620, Speaker A: So that constraint of a hard capped money supply. There are some blockchain protocols that have adopted that as part of their core philosophy. There are also other blockchain protocols which more mirroring kind of typical fiat currencies, are meant to keep growing in perpetuity.
00:13:01.620 - 00:13:30.684, Speaker A: A second interesting aspect about bitcoin is the protocol is unusual, in that literally the only way bitcoins have ever been created is through block rewards. So literally, every bitcoin in existence, you can point to some block on the longest chain of the bitcoin protocol right now and say this coin originated as part of the block reward of this specific block in the blockchain. So literally, when the protocol launched, there were zero bitcoins in existence.
00:13:30.684 - 00:13:42.816, Speaker A: Then the first block got created, presumably by Nakamoto themselves, just running the protocol on their computer. So at the time, that created 50 new bitcoins. Then presumably again, Nakamoto themselves created the second block.
00:13:42.816 - 00:14:04.260, Speaker A: Ten minutes later, that was another 50 bitcoins and so on. Now, these days, while block rewards are still quite common, and that's a way of sort of growing the money supply, most blockchain protocols, when they launch also have a nonzero number of coins in existence. So there's some kind of initial distribution of the native currency to various stakeholders.
00:14:04.260 - 00:14:20.336, Speaker A: As you can imagine, much blood and ink gets spilled over kind of how this should be done. But generally speaking, some coins go to the team that sort of wrote the protocol, some coins go to investors, some coins go to the community, and so on. So that's kind of the most common thing.
00:14:20.336 - 00:14:36.500, Speaker A: You see a mix of like an initial distribution of some nonzero but fixed amount of coins, then plus sort of growth in the money supply over time through block rewards, which distribute further coins to whoever is participating in the protocol.
00:14:43.250 - 00:14:44.718, Speaker B: So if you're wondering about sort of.
00:14:44.724 - 00:15:00.894, Speaker A: The typical magnitude of these block rewards, one way to think about it is in terms of an inflation rate. So you can just look at what is the percentage increase in the money supply annually, because these new coins are being minted with every block. And the answer, it varies protocol to protocol.
00:15:00.894 - 00:15:17.420, Speaker A: It sort of ranges from like the low single digits to the high single digits. In many cases, in a protocol, sort of initially, you have a relatively high rate of inflation just because you want to bootstrap sort of a good set of nodes to sort of start running the protocol. And then you may see that inflation rate sort of drop slowly over time.
00:15:17.420 - 00:15:35.450, Speaker A: So, for example, in bitcoin, as discussed when it first launched, every block led to the minting of 50 new bitcoins. And in bitcoin programmatically, every four years or so, the block reward gets cut in half. So in something like 2012, it got cut from 50 to 25.
00:15:35.450 - 00:15:44.100, Speaker A: In 2016, or something like that, it got cut from 25 to 12.5. And then something like 2020, it got cut from 12.5 to 6.25,
00:15:44.100 - 00:16:03.126, Speaker A: which is where it is now, in late 2022. And then eventually, in a couple of years or even a little less, that'll be cut to sort of three and an 8th bitcoins. Now, what does that mean in real money at the time of this recording? So again, the current block reward is six and a quarter bitcoins in late 2022.
00:16:03.126 - 00:16:11.274, Speaker A: The price of bitcoin these days has been hovering around twenty k. I don't know when you're watching this video. I wouldn't be surprised if bitcoin's down to two k.
00:16:11.274 - 00:16:22.110, Speaker A: I wouldn't be surprised if bitcoin's up to 200K. As I'm sure you know, it's very volatile, at least at this particular moment. You're talking about a block reward that in US dollars is in the low six figures.
00:16:22.110 - 00:16:30.402, Speaker A: It's really big. So when you actually successfully authorize the publication of a bitcoin block, you throw a party that is a big deal.
00:16:30.456 - 00:16:32.290, Speaker B: Low six figures block reward.
00:16:33.270 - 00:17:15.614, Speaker A: So I mentioned that cryptocurrencies solve some problems, as we've seen, but then they also create others. So what problems do they create? Well, whenever you introduce sort of new incentives into a system and whatever your intuition may be about what those incentives are supposed to achieve, you need to take a step back and honestly look at your new system and say, wait, what are people actually incentivized to do now that I've sort of introduced this new incentive system? So block rewards are intended to motivate nodes to follow the blockchain protocol honestly. So for example, in longest chain it's meant to incentivize them to sort of extend the end of the longest chain and announce that block immediately and so on.
00:17:15.614 - 00:17:40.106, Speaker A: But as soon as you get money for actions, you have to worry maybe they're even more incentivized to do something else. So for example, it really no longer makes sense to speak only about kind of quote unquote honest nodes who just obediently follow a consensus protocol and then Byzantine nodes that want to mess up the protocol. That's the dichotomy we've been using thus far.
00:17:40.106 - 00:17:52.842, Speaker A: And that's the traditional one you use in the analysis of consensus protocols. But once you have sort of real money in the system, once you have sort of block rewards, you still might have Byzantine nodes, there still might be people who want to take down your protocol. That hasn't changed.
00:17:52.842 - 00:18:23.480, Speaker A: You might have a few honest nodes, like maybe the team that launched the blockchain protocol in the first place is definitely just going to obediently follow the protocol that they themselves wrote. But if it's a permissionless system where nodes can just sort of join or not as they see fit, even if they're not Byzantine, you got to at least assume that they're profit maximizing. And so if there's some strategy different from the one you had in mind, different from sort of obediently following your protocol, if there's some different strategy that earns them more rewards, you kind of got to expect them to do it.
00:18:23.850 - 00:18:25.154, Speaker B: And you can think of this lecture.
00:18:25.202 - 00:18:47.818, Speaker A: As kind of a really famous case study that illustrates this exact point that when you introduce incentives, it can have unintended effects. Maybe you incentivized to some extent the intended behavior you had in mind for nodes, but maybe you incentivized even more other undesirable strategies. So there's lots of examples of this, not just in blockchain protocols, but in tech more broadly.
00:18:47.818 - 00:19:10.070, Speaker A: Not just in tech, but in life more broadly, where you try to incentivize one thing and you actually wind up incentivizing something else. So for this lecture, we're going to study this specifically for Nakamoto Consensus. So we're going to be thinking about a longest chain protocol with proof of work, civil resistance and difficulty adjustment and with a fixed reward for each block.
00:19:16.440 - 00:19:17.876, Speaker B: So let me comment on the relationship.
00:19:17.978 - 00:19:38.744, Speaker A: Between kind of the specifics we'll talk about in this lecture and kind of the broader lessons I want you to take away from this lecture. So on the one hand, the specific sort of unintended incentivized strategy that we're going to look at, something known as selfish mining, that we'll talk much more about selfish mining. The details of it, frankly, are fairly specific to Nakamoto Consensus.
00:19:38.744 - 00:20:06.436, Speaker A: So as we'll see, the deviation really relies on the kinds of sort of forking attacks, deliberate orphaning of the likes that we saw in lecture eight when we were worrying about the consistency of longest chain consensus. So it'll be pretty clear it's really about sort of longest chain consensus rather than other types of consensus protocols. Also, fundamentally, this is going to be an exploitation of the difficulty adjustment mechanism, right, which you have in the proof of work version of longest chain consensus and generally not in the other ones.
00:20:06.436 - 00:20:19.156, Speaker A: So it really is an attack on Nakamoto Consensus per se. In defense, like this dates all the way back to 2013. And in 2013, Bitcoin was I'm exaggerating a little bit, but it was basically the only game in town.
00:20:19.156 - 00:20:31.820, Speaker A: If you're going to write a research paper about some blockchain protocol, you're almost certainly going to be writing it about Bitcoin. Bitcoin, of course, is Nakamoto Consensus protocol. It does have a flix block reward per block.
00:20:31.820 - 00:21:02.740, Speaker A: That said, the sort of broader takeaways from this lecture, on the one hand, you're in this quandary as a blockchain protocol designer, you need to have some kind of incentives to reward people for sort of doing the protocol work. But on the other hand, if you're not very careful about how you introduce those incentives, you can incentivize behavior that you did not intend. And that lesson is really applicable kind of across pretty much all permissionless blockchain protocols and frankly, in life much more broadly.
00:21:02.740 - 00:21:24.636, Speaker A: So that wraps up the introduction to lecture Tens. When the next video I want to move on and talk about. If you were trying to just profit maximize, if you had Nakamoto Consensus with fixed block rewards, what would you want to do? How would you go about maximizing the sum of your block rewards? And in particular, how does that interact with the difficulty adjustment mechanism? So that's coming up next.
00:21:24.636 - 00:21:25.370, Speaker A: I'll see you there.
