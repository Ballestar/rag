00:00:00.410 - 00:00:10.394, Speaker A: It. So in the last video we saw that really now block producers have two sources of rewards. So first of all, there's the block reward and then second of all, which are newly minted coins generally.
00:00:10.394 - 00:00:39.830, Speaker A: And then there's the transaction fees which are transfers from the creators of the transactions that get included in the block. And we talked about how those two sources of rewards really are conceptually quite different in a number of different ways. So one question you might have is, you know, which of these is sort of bigger than the other? Like, should you think of block rewards as being the dominant term or transaction fees being the dominant term or what? Well, historically, for most of the history of blockchains, block rewards have been quite a bit bigger than transaction fees.
00:00:39.830 - 00:00:57.354, Speaker A: So for the Bitcoin blockchain this has literally always been true. It's very unusual to see a block where the total value of the transaction fees is say, at least 20% of the block reward. And it's not very unusual to see blocks where the transaction fees are, say at most 5% of the block rewards.
00:00:57.354 - 00:01:15.998, Speaker A: So really to first order, for bitcoin miners almost all of the revenue is coming from the block rewards. Ethereum is a little bit more interesting to talk about. So for the first several years of Ethereum's existence the same fact was true transaction fees were dwarfed by the value of the block reward.
00:01:15.998 - 00:01:45.354, Speaker A: But that has been not so true for the last, I don't know, year, year and a half or something, especially since the rise of decentralized finance DeFi which we'll talk about later in the lecture series. So the demand for the Ethereum blockchain as of late has been quite high and transaction fees have therefore been quite high. In fact, it's not that uncommon to see a block on Ethereum where the amount of reward that the miner gets from transaction fees actually exceeds the two Ether that they got for the block reward.
00:01:45.354 - 00:02:07.198, Speaker A: Now, it's by no means true in every block or even necessarily on average, but on average transaction fees are quite high. You would definitely not say that block rewards dominate transaction fees in Ethereum in 2020 or 2021. So if we try to project into the future, right, I mean, in Ethereum we've just seen this increasing demand for computation on the Ethereum blockchain.
00:02:07.198 - 00:02:35.438, Speaker A: And so if that continues, depending on what happens with the coin price of Ether, but if that continues, it could be that eventually transaction fees actually dwarf the block rewards in Ethereum. If demand continues to sort of skyrocket at the rate that it has been. And actually, similarly in Bitcoin, even though the transaction fees for the entire existence of the protocol have been low relative to the block rewards, it's also conceivable that could change in the future even if the demand for the bitcoin protocol doesn't actually increase that much.
00:02:35.438 - 00:02:44.142, Speaker A: And that's because actually, while the block reward in bitcoin right now is 6.25 bitcoins. That has not always been true and will not always be true in the future.
00:02:44.142 - 00:03:03.206, Speaker A: So when the protocol was first launched, the block reward was 50 bitcoins. Then it got cut to 25, then to twelve and a half, and now it's six and a quarter. So once every four years there's a having event, and this is sort of hard coded into the bitcoin protocol that periodically, every four years, the block reward literally just gets cut in half.
00:03:03.206 - 00:03:35.170, Speaker A: And eventually, if bitcoin is still around in ballpark the year 21 40, the block rewards will actually simply be zero. So project far out enough in the future it will also be true that eventually in bitcoin, you might expect transaction fees to dominate the block rewards. And in fact, if this does happen, if transaction fees at some point start dwarfing block rewards, that actually could be a problem.
00:03:35.170 - 00:04:07.682, Speaker A: And in particular, what I want to point out on this slide is that actually, the selfish mining attacks, the deliberate forking attacks we talked about last lecture, actually could get a lot worse once you have very large transaction fees. And to give credit where credit is due, this issue is discussed at length in a paper actually all the way back in 2016 by Carlston Kaladner Weinberg and Narayanin. So let me just help you page back in sort of the relevant points from last lecture, from lecture ten about selfish mining.
00:04:07.682 - 00:04:36.354, Speaker A: So the point of selfish mining is to sort of deliberately create forks, deliberately try to orphan blocks in order to boost the rewards that you're getting from the protocol. And what we learned last lecture is that whether or not this can be done profitably depends on a couple of assumptions. So first of all, there's a question of when there's a tie in the longest chain, what assumptions do you make about what honest nodes do? And what we saw is that if you assume sort of worst case tiebreaking.
00:04:36.354 - 00:05:07.354, Speaker A: So if the attacker can actually pick how the honest nodes tiebreak between competing longest chains, then in fact, even for a very small attacker, even with an attacker with, say, only an alpha equal 1% of the hash rate, even then it's actually beneficial to do these deliberate forking attacks. On the other hand, you could think about the case where honest blocks always break ties in favor of honestly produced blocks. So a longest chain that has an honest block at the end of it, that's kind of the best case as far as defeating the attacker.
00:05:07.354 - 00:05:30.274, Speaker A: And there we saw that actually, selfish mining doesn't help if alpha is small, but if you have an attacker with more than a third of the hash rates, it's still the case, even with this kind of best case tiebreaking, that selfish mining can help. So what I want to show you here in this example, I want to now consider large transaction fees. And I want to show you that even if you have best case tiebreaking.
00:05:30.274 - 00:06:03.186, Speaker A: So even if honest nodes always break ties between longest chains in favor of those where the last block was honestly produced, and even if the attacker is small, right, if it has alpha equal 1% of the hash rate, even then, when you have large transaction fees, there will be situations where it's in that miner's interest to launch a selfish mining attack to try to orphan the last block on the longest chain. So the easiest way to see this is with an example. So suppose we're in a world where actually transaction fees are really big.
00:06:03.186 - 00:06:15.426, Speaker A: Let's say that in sort of a typical block, the total value of the transaction fees is ten x the value of the block reward. And of course, as usual, the block reward is sort of steady and protocol computed. The transaction fees are going to rise and fall with demand.
00:06:15.426 - 00:06:30.166, Speaker A: So sometimes they'll be super high, sometimes they'll be lower than average. But let's assume that even on average, you have ten X the transaction fees as you do the block reward. Now, imagine the protocol bitcoin, ethereum, whatever, is just sort of humming along adding blocks to the longest chain.
00:06:30.166 - 00:06:50.030, Speaker A: These are blocks that have lots of transaction fees as part of them. And now imagine sort of the most recent block added to the end of the longest chain has not just typically high transaction fees, but like super high transaction fees. Let's say they're ten X times the average transaction fees, which would make it 100 X times the block reward.
00:06:50.030 - 00:07:07.270, Speaker A: Now, suppose you're a miner, right? What are you going to do? Well, if you were honest, it's clear what you'd do. If you're honest, you're supposed to mine on the end of this block B three. And then this block with super high transaction fees would be more deeply embedded into the longest chain.
00:07:07.270 - 00:07:46.686, Speaker A: However, given that these transaction fees are so high, so much higher than average and so much higher than the block reward, it sure is tempting to instead of trying to extend B three, try to extend B two and basically steal those super high transaction fees for yourself. So literally, just try to mine a copy of B three, of course, with your public key as the miner, as opposed to the real B three, but just mine a copy of B three that again has B Two as its predecessor. So suppose you've got, I don't know, alpha equals 20% of the hash rate, something like that, right? So then there's a one in five chance that you're the next one to produce a block.
00:07:46.686 - 00:08:09.222, Speaker A: And so if you're doing this forking attack, that in that event, in that one in five chance, you will be producing this orange block B three prime, which is extending B two. Now, you haven't necessarily orphaned the original B three at this point. If we were assuming that this orange node, also got to choose, also got to control which of these two branches other nodes were going to extend.
00:08:09.222 - 00:08:37.490, Speaker A: Then actually it would be done because it would just sort of force by whatever means other nodes to extend b three prime rather than b three. But the point is that even under sort of best case honest tiebreaking where all nodes are going to in this case try to extend B three rather than the newer block B three prime, there's still a one in five chance that the orange attacker is also going to be finding the very next block, which will be some b four prime extending its previous block. B three prime.
00:08:37.490 - 00:09:01.046, Speaker A: And let's say that b four prime again just has sort of the average large amount of transaction fees. So the orange attacker, they can do this. There is some risk involved, right? So if they successfully mine b three prime, but they don't then immediately mine b four prime and instead some other node mines a b four, extending b three, well then the orange attacker sort of wasted one of the nodes.
00:09:01.046 - 00:09:18.106, Speaker A: So it has to forego the block reward and transaction fees it could have otherwise obtained had it just honestly tried to extend b three rather than fork off b three. However. So four out of five times you're going to wind up regretting trying to do this attack because you're going to lose the revenue you would have made from your first orange block.
00:09:18.106 - 00:09:27.442, Speaker A: But one in five times you're going to do really, really well. You're going to hit the jackpot, you're going to successfully orphan b three. You will take those super high transaction fees for yourself.
00:09:27.442 - 00:09:39.720, Speaker A: And so if you have 20% of the hash rate and those transaction fees in b three are ten x normal, this is totally worth it. It's totally worth the risk. The expected benefit outweighs the expected lost rewards of a failed attack.
00:09:39.720 - 00:10:15.890, Speaker A: So in general, the punchline is that no matter how small you are, no matter how small your hash rate alpha, even if it's like 1% or something, there may be situations where it makes sense to launch the selfish mining attack. If there's ever a block where the transaction fees are much, much higher than the average reward you get from a block, meaning the combined block reward plus transaction fees in a typical block. If you ever have these particular super high value blocks, even if you're a very kind of small node, it still maximizes expected reward to try to do this orange fork as opposed to honestly extending the blue chain.
00:10:15.890 - 00:10:46.170, Speaker A: And this is frankly not good. You actually do not want block producers to have these kinds of incentives, right? In the extreme case, if all you had were different block producers trying to fork each other, trying to steal each other's rewards, progress in the blockchain would slow to a crawl. You might even just lose liveness if literally all miners are trying to sort of fork each other off as opposed to extend the longest chain.
00:10:46.170 - 00:11:06.634, Speaker A: Now, in Bitcoin, I'd be surprised if these kinds of selfish mining attacks became an issue anytime soon. The reason being that up to this point, quite consistently, transaction fees have been dominated by the block reward in Bitcoin. And if you think about it, this attack doesn't make sense if the transaction fees are small relative to the block reward.
00:11:06.634 - 00:11:29.922, Speaker A: Because basically when you have a failed attack, you lose the block reward that you would have gotten from B Three Prime had you instead tried to actually honestly extend the longest chain. It's true there'll be cases where you get the extra transaction fees when you successfully do the B Four prime, but that's not going to be enough to make up for the lost block reward in the cases where your attack fails. That's if the transaction fees are dominated by block rewards.
00:11:29.922 - 00:11:42.522, Speaker A: So that's been true in Bitcoin up to this point. So there isn't really much of an incentive to launch this kind of attack. But again, Bitcoin rewards are getting cut in half in BTC terms, in the native currency terms, every four years.
00:11:42.522 - 00:12:01.454, Speaker A: So eventually the block rewards will get really small and by 21 40 they're supposed to go to zero. So if nothing else, at that point, the transaction fees will be dominating the block rewards in Bitcoin if Bitcoin is still around in 21 40. And you would expect this to be an issue at that time, if not earlier Ethereum.
00:12:01.454 - 00:12:28.220, Speaker A: Meanwhile, it's not actually clear it's so far from the regime where these kinds of attacks might make sense. So we'll talk about this more in our DFI lectures, but there are certain transactions in Ethereum which are very valuable. So I will be definitely monitoring carefully whether or not you see whether we see anything that resembles these kinds of deliberate forking attacks to steal transaction fees in Ethereum going forward.
00:12:28.220 - 00:12:54.510, Speaker A: Now, interestingly, the transaction fee mechanism we're going to talk about in the next video, the transaction fee mechanism introduced in EIP 1559, which is used in Ethereum today, a byproduct of that design is it actually makes this selfish mining attack less severe. And the reason is because as you'll see in that design, we're going to be burning some of the transaction fees. So the amount of the transaction fees that go to the miner is going to be smaller.
00:12:54.510 - 00:13:12.166, Speaker A: And so that means there's less incentive to do these kinds of deliberate forking attacks. That doesn't mean this problem completely goes away, but the new transaction fee mechanism in Ethereum actually does mitigate the issue that we're seeing on this slide. That's not at all the primary motivation for the switch to the new transaction fee mechanism.
00:13:12.166 - 00:13:21.130, Speaker A: It's just kind of a sort of happy byproduct. So in the next video, let's start talking squarely about what's wrong with first price options. Why would you want to do anything different.
00:13:21.130 - 00:13:26.390, Speaker A: And what are the key ideas in EIP 1559? For doing better. So I'll see you there. Bye.
