00:00:00.570 - 00:00:02.494, Speaker A: Hi everyone and welcome to this video.
00:00:02.532 - 00:00:11.482, Speaker B: That accompanies section 22.6 of the book Algorithms Illuminated, part four. This section is the third of our four main reductions.
00:00:11.546 - 00:00:14.014, Speaker A: And here we will prove finally that.
00:00:14.052 - 00:00:18.480, Speaker B: The famous traveling salesman problem is indeed NP hard.
00:00:20.610 - 00:01:03.786, Speaker A: In the last video we proved that the directed Hamiltonian path problem is NP hard using a reduction from the three set problem. And this video is the big payoff. So here we're going to be proving that the traveling salesman problem is NPR. Actually, the idea will be very much like how we use the directed Hamiltonian path problem to show that the cycle free shortest paths problem is NPRD. Way back in the opening sequence of videos, there is on the one hand like an immediate type checking error with this idea, which is that directed Hamiltonian path is of course about directed graphs, whereas the Tsp is about undirected graphs. So it would seem much more appropriate to use the undirected version of the Hamiltonian paths problem. So the input is exactly the same as in the last video, except now with an undirected graph.
00:01:03.786 - 00:01:35.740, Speaker A: So you're given an undirected graph, you're given a starting vertex S and a destination vertex T, and the goal is the same. So we want to compute an St Hamiltonian path. Now, of course it's going to be an undirected path and an undirected graph. But again, we want a path that one endpoint is S, the other endpoint is T and it should visit every vertex exactly once. Of course, if the graph does not have any Hamiltonian paths, we would like an algorithm to correctly declare as much. We know that the directed version of the Hamiltonian path problem is NP hard. We proved that in the last video.
00:01:35.740 - 00:01:57.426, Speaker A: We haven't actually proved that for the undirected version of the problem. But as I mentioned in the overview video a few videos ago, there's actually quite easy reductions back and forth between the directed and undirected versions of Hamiltonian Path. So by virtue of the directed Hamiltonian path problem being NP hard, so is the undirected version. And again, I'll leave the details as an exercise for you to carry out.
00:01:57.528 - 00:01:59.220, Speaker C: In the privacy of your own home.
00:02:07.390 - 00:02:16.030, Speaker A: The plan then will be to reduce this NP hard problem, the undirected Hamiltonian path problem, to the traveling salesman problem. So that'll prove the traveling salesman problem.
00:02:16.180 - 00:02:18.080, Speaker C: Is also NP hard.
00:02:20.610 - 00:03:02.614, Speaker A: We should be breathing a sigh of relief. So the tasks that we're responsible for this video doesn't seem as intimidating as the last two videos. So the reduction we have to come up with from undirected Hamiltonian path to the traveling salesman problem, those are both problems that have to do with sort of basically finding certain paths in an undirected graph. So it's plausible that they would have something to do with each other, whereas the last couple of videos we had to prove the much less plausible fact that this problem in logic. The three sat problem had something to do with these graph problems, the independent set and directed Hamiltonian path problems. So it's going to be easier in this video than the last couple. But still the question is what's our plan? So we're going to assume that we have access to a subroutine for solving the Tsp.
00:03:02.614 - 00:03:42.794, Speaker A: That's going to be our magenta box. How can we extract from a traveling salesman to our knowledge about a Hamiltonian path in some other graph that we were given? So the starting point of the reduction is an instance of directed Hamiltonian path. Remember, this is the known NP hard problem we're reducing from. So we might be given an instance like this four vertex graph that I'm shown on the right. All of the edges are there except the one between the two bottom vertices is missing. And you will notice that there is in fact no st Hamiltonian path in this particular graph. We're going to modify this graph in two ways, both very simple.
00:03:42.794 - 00:03:50.698, Speaker A: So first we're going to augment it by one additional vertex call that vertex v zero. We're going to connect v zero to.
00:03:50.784 - 00:03:54.566, Speaker C: Only the vertices s and T. That.
00:03:54.608 - 00:04:29.078, Speaker A: Gives us a new undirected graph with one more vertex and two more edges than before. Now we want to invoke this assumed subroutine for the traveling salesman problem, which is expecting, first of all, it's expecting a complete graph and second of all, it's expecting all of the edges to have edge costs. So we somehow have to turn this graph complete. And we also have to say what the edge costs are going to be. Well, not going to be very hard. We're just going to fill in all the missing edges, the costs of the original edges. So all the edges here in light blue and magenta, they're going to have cost zero, all of the edges which are missing and that we put in in this step.
00:04:29.078 - 00:05:24.624, Speaker A: We're going to give them a cost of one. Now that we have a complete graph g prime and we've committed to an edge cost for each of the edges. So a cost of one for the green edges, the ones added in in the last step, and a cost of zero for the other edges, either edges that were there in the first place in the undirected Hamiltonian path instance, or the two extra edges we added incident to v zero. So at that point we actually have something we can feed into our assume subroutine for the Tsp. So that's exactly what we do. And the Tsp subroutine is going to hand us back a minimum cost traveling salesman tour. Either it has total cost zero, either it only uses zero cost edges like the magenta and light blue edges in this picture, or it uses at least one green edge and it has cost one.
00:05:24.624 - 00:06:02.616, Speaker A: And that's the clue that's going to tell us whether or not we started with a graph with a Hamiltonian path or not. Specifically, if the Tsp subroutine hands us back a tour with total cost zero, how do we extract an St path from that from the original graph? Well, when we argue through the proof of correctness on the next slide, we'll see that any zero cost tour must include what for us were the two light blue edges. So the two edges that we added incident to that extra vertex v zero. And we're just going to return the path you get if you remove those two light blue edges from the tour. As we'll see, that's going to be a path from S to T that visits every vertex in the original graph.
00:06:02.648 - 00:06:05.672, Speaker C: That is a Hamiltonian path of the original graph.
00:06:05.816 - 00:06:14.524, Speaker A: On the other hand, if the tour we get back has cost bigger than zero, then we sort of throw up our hands and say we don't believe there was in fact any Hamiltonian path.
00:06:14.572 - 00:06:17.612, Speaker C: In G. That's the entire reduction.
00:06:17.676 - 00:06:42.250, Speaker A: So it just invokes the assumed subroutine for the chopping salesman problem. Once it invokes it on this graph G prime. And it doesn't do that much work outside of the subroutine. Call right. It has to construct this graph G prime. But at worst, that's going to take quadratic and n time, where n is the number of vertices. In other words, this certainly qualifies as a reduction, only one invocation of the subroutine and a polynomial amount of additional work.
00:06:42.250 - 00:07:18.502, Speaker A: Moving on to correctness. So let me draw the picture that you should have in mind. Don't forget the direction of the reduction. We're reducing undirected Hamiltonian path to the Tsp. So the Tsp that corresponds to our magenta box that we're going to assume we have access to, that's the problem we're trying to prove as NP hard. Meanwhile, we're trying to build a light blue box, something that will solve the undirected Hamiltonian path problem.
00:07:18.556 - 00:07:20.620, Speaker C: That's our known NP hard problem.
00:07:20.990 - 00:07:58.070, Speaker A: So the arrows in the reduction go from undirected Hamiltonian path to the Tsp. And for the purposes of correctness, what we're hoping is happening is that, again, the reduction has no idea whether it's given a graph with a Hamiltonian path or not. But we're hoping that whatever the status of the initial graph was, that continues to be reflected this time in the optimal tor cost of the Tsp instance G prime that we construct. Specifically, if we do have a Hamiltonian path, we want that to be reflected with the existence of a zero cost tour. And if we start with a graph that does not have a Hamiltonian path, we want that to be reflected in a Tsp instance where every tour has cost strictly bigger than zero.
00:07:58.140 - 00:08:00.040, Speaker C: So those are the two things we want to show.
00:08:00.730 - 00:08:19.578, Speaker A: Let's make some observations about our reduction. So if there is a zero cost tour, what must it look like? Well, observe that v zero, the extra vertex that we added, it was incident to only two edges of the original graph g, the vertices S and T. There was no edge between v zero and any vertex of G other than.
00:08:19.664 - 00:08:21.674, Speaker C: S and T. So what that means.
00:08:21.712 - 00:08:42.162, Speaker A: Is any traveling salesman tour it has to visit v zero. And there's only two edges, incident to V zero that have cost zero. The ones that have the other endpoints, s and T. So, for example, I've redrawn the instance that we had on the previous slide. And as you can see, v zero, it has the scion edges to S and T. Those have cost zero. But the other edges are green.
00:08:42.162 - 00:08:48.406, Speaker A: Those have cost one. So the only way to visit V Zero while incurring only zero cost is to use those two scion edges to.
00:08:48.428 - 00:08:51.606, Speaker C: Go via S and T. So that.
00:08:51.628 - 00:09:00.534, Speaker A: Means, given such a tour, a zero cost tour we can think. About removing these two edges that we know it has the edges incident to V Zero and connecting it to S.
00:09:00.572 - 00:09:02.710, Speaker C: And T. So if we remove those.
00:09:02.780 - 00:09:11.866, Speaker A: Two edges, what do we have left? So now we have a path that visits all of the vertices other than v zero. So all of the vertices of the original graph capital G with endpoints S.
00:09:11.888 - 00:09:14.414, Speaker C: And T. Now if the tor had.
00:09:14.452 - 00:09:50.826, Speaker A: Zero cost, then all the edges in this st path have to have zero cost. But remember, the only edges that have zero cost are the ones that were present in the original graph capital G. So that corresponds to the magenta edges in this picture. All of the edges that were missing from the original graph G, corresponding here to the green edges, those have cost one. So if this st path you get after removing the two edges from the tour, if it has zero cost, it must be using only the magenta edges and none of the green edges. But all of those magenta edges were in the original graph capital G. So this must be necessarily Hamiltonian path in.
00:09:50.848 - 00:09:55.722, Speaker C: The original graph capital G. So what does this mean?
00:09:55.776 - 00:10:40.148, Speaker A: This means that if the Tsp subroutine happens to hand us a tor with total cause zero, we're done. We just know immediately how to extract from in a Hamiltonian path of the input graph capital G. So now again, for the correctness proof, we need two cases. One where we start with a graph that did have a Hamiltonian path, and then another case where it doesn't have a Hamiltonian path. Let's start with a case where G does in fact have a Hamiltonian path. The claim is that then the Tsp instance G prime that we construct it does indeed have a zero cost tour. Namely, you just take the Hamiltonian path and you add to it these two scion edges.
00:10:40.148 - 00:11:06.252, Speaker A: So you connect S and T both to v zero. You started with a Hamiltonian path and now you made it into a tour and you only used zero cost edges of G prime. You only used original edges of the graph, the magenta edges plus the two psion edges, all of which have cost zero. So that's great. So if G is a Hamiltonian path, we know G prime is going to have a zero cost tour. We were given this perfect subroutine for computing the minimum cost tour. So it'll hand us a zero cost tour.
00:11:06.252 - 00:11:35.236, Speaker A: And as we saw, given a zero cost tour, we know what to do. We know how to extract a Hamiltonian path. So in the case one, the reduction will do the right thing. If there's a Hamiltonian path to be found, the reduction will in fact return such a path. The other case is even easier. So suppose the original instance G has no Hamiltonian path. Well, then we certainly know the Tsp instance G prime that we're constructing is not going to have a zero cost tor, right? Because from any zero cost tour, we can extract a Hamiltonian path.
00:11:35.236 - 00:11:36.696, Speaker A: But if no such path exists, then.
00:11:36.718 - 00:11:38.796, Speaker C: The zero cost tor can't exist either.
00:11:38.978 - 00:12:04.412, Speaker A: So we get a Tsp instance, G prime. The minimum tor cost is bigger than zero. When we invoke our assumed subroutine for Tsp, we'll learn that the minimum tor cost is bigger than zero. And then the reduction does the right thing. Right? It looks at this sort of expensive tour and it concludes correctly that the graph it was given, capital G, has no Hamiltonian path. So either way, either case doesn't matter. The reduction works in both cases.
00:12:04.412 - 00:12:27.848, Speaker A: So that completes the reduction from the undirected Hamiltonian path problem to the Tsp. Because the former is NP hard, so is the latter. So, traveling salesman problem. Indeed. You now know completely why that is NP hard. Coming up next, we have one more example. We want to show that problems involving only numbers can also be NP hard, such as the knapsack problem.
00:12:27.848 - 00:12:29.590, Speaker A: That's coming up next. See you then.
