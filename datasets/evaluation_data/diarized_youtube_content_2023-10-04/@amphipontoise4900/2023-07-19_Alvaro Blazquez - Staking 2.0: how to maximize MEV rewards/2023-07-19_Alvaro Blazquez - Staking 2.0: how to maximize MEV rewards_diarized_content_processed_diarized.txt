00:00:22.250 - 00:00:25.510, Speaker A: Everyone. So let's get going. It.
00:00:25.510 - 00:00:37.426, Speaker A: So let me get the timer. Staking 2.0 how to maximize mev Rewards so, my name is Alvaro, I'm part of the blockchain analytics team at Metrica.
00:00:37.426 - 00:00:56.862, Speaker A: In case you're not familiar with Metrica, we provide free alerts on dashboard on the Ethereum ecosystem. So anything around the consensus layer, withdrawals, mev, relays, all of that, we've got it. So head out to ETH Metrical Co and check them out.
00:00:56.862 - 00:01:16.390, Speaker A: You can also follow us on Twitter and join our discord if you're interested and like what you hear. So the agenda for the talk is pretty simple. We're going to talk about staking, we're going to talk about MEB, and then how the two of them come together and as a validator get more rewards.
00:01:16.390 - 00:01:29.226, Speaker A: So let's start with staking. Staking is essentially a way to participate in the Ethereum network as a validator. And the way you do it is essentially providing collateral 32 E.
00:01:29.226 - 00:01:41.020, Speaker A: Once the validator is activated, it performs the duties to secure the network. And if those duties are performed correctly, it will earn rewards. That's essentially what being a validator is.
00:01:41.020 - 00:02:02.590, Speaker A: Let's look a bit more into what the duties are. So, as you probably know already, every 12 seconds there's a new block in Ethereum. So without the mev boost Craziness, essentially every 12 seconds, a randomly chosen validator is going to look at the MEMP pool, pick the most profitable transactions and create a block.
00:02:02.590 - 00:02:13.122, Speaker A: Simple as that. Another duty of the validators is attestations. So every 334 seconds, or one epoch, validators vote for the view of the chain.
00:02:13.122 - 00:02:36.842, Speaker A: And this is critical for the consensus layer. So how do you stake three options? Mainly? First, one most hands on but also the most flexible, is using a self managed node, handle everything, software, hardware, keys, all of that. Second option using a staking as a service provider.
00:02:36.842 - 00:02:54.850, Speaker A: So instead of managing the node, you can externalize that for a cut of the rewards. And the third option is liquid staking provider, which is essentially staking through a smart contract and letting someone else do the actual validating. And you get a cut of the rewards.
00:02:54.850 - 00:03:21.610, Speaker A: So other than to actually secure the network, what you'll get as a validator is around 5% to 7% APY. And you can see a breakdown here of where those rewards come from. So a big chunk is attestations, then you see smaller chunk from block proposals, and then from those block proposals you get a cut of the execution layer.
00:03:21.610 - 00:03:48.882, Speaker A: And then we've added here a bit of penalty. Essentially it's just missing attestations, which happens every once in a while, and then you get to the final value. So in terms of adoption and market value, some surveys have estimated that almost two thirds of the or more than two thirds of the institutions are interested in staking for increased yield on their assets.
00:03:48.882 - 00:04:07.180, Speaker A: And JPMorgan estimated that the market is going to reach around 40 billion by 2025. But what if there was a way to increase those rewards maximal? Extractable value. You've probably heard of Mev before.
00:04:07.180 - 00:04:27.650, Speaker A: I haven't seen that many talks here, but you've probably heard about it. And what is mev? So mev is essentially maximizing the block value by including or reordering transactions. Here I'm showing the top strategies.
00:04:27.650 - 00:04:53.718, Speaker A: First one arbitration, which is essentially just taking advantage of the price difference of an asset in different exchanges. Showing here between a centralized and decentralized exchange, but could be between decentralized exchanges or a combination of both. Another top strategy is front and back running, which is essentially just targeting.
00:04:53.718 - 00:05:18.110, Speaker A: I'm showing it here in red the target transaction and making sure that your transaction, the one that gives you the profit, is either right before or right after the target one. And then the third one, which is probably the most controversial, is Sandwiching. Sandwiching is essentially taking profit from the slippage in trades.
00:05:18.110 - 00:05:54.506, Speaker A: So how it usually works is the searcher or whoever's going to profit from Mev is going to pump the value of the asset with one transaction, let the user run their trade and then liquidate and make the profit on the last transaction. So like I mentioned before, with block proposals, every 12 seconds, a validator is a single validator in the network has the power to propose whatever block they want. So in theory, if you're running that validator and propose a block, you could do any or all of these strategies.
00:05:54.506 - 00:06:16.790, Speaker A: But it does require some specialized knowledge and some specialized research that may not be available to everyone. So if you want to take advantage of Mev but don't have that research available, there's still an option. And that's through Mev boost flashbot's mev boost.
00:06:16.790 - 00:06:38.826, Speaker A: There are other clients, but this was the first one. And what mevboost does essentially is run as a sidecar to the consensus layer client, the validator in general, and provide access to that block building marketplace. The validator is still going to build a standard block as a backup just in case.
00:06:38.826 - 00:07:01.780, Speaker A: And that extra block building marketplace is going to give the validator an extra 1% to 3% APY. But let's look a bit more into how that block building marketplace actually looks and what's the supply chain like. So this is bit of a diagram of how the supply chain looks like right now.
00:07:01.780 - 00:07:15.346, Speaker A: So you've got on one side the searchers. Searchers are essentially just looking for those mev opportunities I talked about before. And then once they find them, they'll submit them to the block builders.
00:07:15.346 - 00:07:36.458, Speaker A: Block builders are essentially building blocks. They could add their own mev opportunities and then once they're, I guess happy with the block, they'll send it to the relays. Relays are essentially a third party trust layer between block builders and validators.
00:07:36.458 - 00:07:54.890, Speaker A: And their goal is essentially to make sure that both, both block builders and validators do what they're supposed to. And if you're not familiar. The way validators decide which block from block builders to select is through an auction.
00:07:54.890 - 00:08:20.370, Speaker A: So block builders are incentivized to share a bit of their rewards. So that's where the 1% APY essentially comes from. So up until this point, I've talked about how do you get rewards, but there are things that can happen that could minimize those rewards.
00:08:20.370 - 00:08:37.262, Speaker A: So ideally, if you're running a validator or interested in getting the maximum rewards, you also want to minimize those risks. And what are those risks? So we group them into three categories. First one is operational.
00:08:37.262 - 00:09:13.098, Speaker A: Anything that happens running the relay, the validator sorry, ethical, regulatory, and custodial. On the operational, like I mentioned, penalties if you miss an Attestation, if you miss a block proposal, if instead of proposing the AmiB boost block, you propose a regular one, things like that, essentially anything that drops those rewards, you can also get slashed. And this is basically if the validators is going against protocol rules, slashing is pretty big offense go from one to 32 E.
00:09:13.098 - 00:09:30.894, Speaker A: So yeah, don't do that. And then on the ethical regulatory side, with mev, boost came OFAC and compliance. If you're not familiar with OFAC, they're a US entity that essentially enforces sanctions.
00:09:30.894 - 00:10:04.160, Speaker A: So whether you want to be OFAC compliant or not and don't want to censor anything, I think if you're using MEB, this is something you need to be aware of. And then on the custodial side, you've got key management, you need to have a good policy, and things can happen with the keys, who's got access to them, all of that. And then if you're staking through a liquid staking provider, there's also the smart contract risk, which you at least need to be aware of.
00:10:04.160 - 00:10:25.322, Speaker A: So on the professional side, the average validator is taking home 96% of the max total rewards. So it's a pretty good number on average. But there are things and some things I have in the past that make that drop.
00:10:25.322 - 00:10:45.034, Speaker A: I'll go over two of them. One of them, if you're not familiar, a few months ago in April, there was an incident with the relays, and then a month after that, theorem had some trouble finalizing. So I'll go over the two of them.
00:10:45.034 - 00:11:10.078, Speaker A: So the mev relay incident was essentially caused by changes in how the relays propagated their proposed blocks and what that cost. As you can see in both charts, number of forks to the left, missed proposals to the right caused a spike in both of them. And to be fair, this was only a spike on MEB boost proposed blocks.
00:11:10.078 - 00:11:33.930, Speaker A: So if you were a validator and decided to turn off MEB boost or weren't even running it during this time and proposed a block, you were fine. So the other one was the finality incident a few months ago. So finality, if you're not familiar, comes from the Attestations I talked about earlier.
00:11:33.930 - 00:11:52.970, Speaker A: So like I mentioned, every validator of epoch votes on their view of the chain. And essentially what that does is make or help the chain reach consensus. So if two thirds of the validators agree on the vote, the checkpoints finalize and justify get upgraded.
00:11:52.970 - 00:12:25.770, Speaker A: But if less than two thirds of the networks agree, then they don't get upgraded. And that's exactly what happened. You can see here on the charts on the big one on the back votes over time, green line network success rate that's essentially percentage of validators that are voting and you can see it drop during the incident and whenever it drops below the 66% line, kind of in the middle of the chart, that's when you know the network is not going to finalize.
00:12:25.770 - 00:13:07.400, Speaker A: During the incident we also saw an increase in missed proposals which was essentially caused by the validators kind of going offline. So at the tail end of the incident you can see the votes going up and then going up the 66% mark and then that's when you know the network is going to finalize. And to be clear, like finalizing does not mean the network stops or anything like that, but it does mean that in some use cases you're going to have to wait a little bit more.
00:13:07.400 - 00:13:27.066, Speaker A: So let me summarize a little bit real quick. So on the mev relay incident, we saw around three times the average missed block and that we estimate a cost of loss in around 0.5 APY plus the missed mev opportunities which are kind of impossible to determine.
00:13:27.066 - 00:13:52.710, Speaker A: And then on the finality incident, so ethereum usually finalizes in two epochs. In this case there was a delay because this was actually two incidents and it took four and nine epochs to finalize and we saw a loss of attestations and block proposals during that time and we estimate a loss of around 0.5.8 of that five to 7% APY I mentioned at the beginning.
00:13:52.710 - 00:14:23.546, Speaker A: So on the Meview boost side, there are also some risks with the relays shown here, bits missed by relay. And what we categorize as a missed bit is essentially a validator having registered with a relay and then the relay for whatever reason not providing that bit that block. So if you're using mev boost and are subscribed to one of these relays at this time, well, you're not going to get a block.
00:14:23.546 - 00:14:43.942, Speaker A: So essentially what this chart tells us is don't just subscribe to one, subscribe to as many as you feel comfortable with, there's no harm in that. So don't put your eggs on one basket. Another type of risk is the ethical compliance one.
00:14:43.942 - 00:15:02.190, Speaker A: So I'm listing here all the relays currently available and I've split them by their intent to be OFAC compliant. So essentially not include transactions that are on the OFAC list in blocks that they relay. But this is just their intent.
00:15:02.190 - 00:15:23.170, Speaker A: Having that intent does not mean bad things don't happen. So we took a look at few months worth of blocks from all relays and you can see them here in pink. Even with the intent to be compliant, well, they're still letting through some ofa compliant, non compliant blocks.
00:15:23.170 - 00:15:51.150, Speaker A: So even if you subscribe and you want to be compliant and subscribe to ofa compliant relays, you need to still check yourself. Trust but verify, as we usually say. So in a nutshell, how to minimize some of these risks we've seen on the personal side, main one is to monitor an alert.
00:15:51.150 - 00:16:08.050, Speaker A: Don't just let it sit. You want to be alerted as quick as possible because in most cases, if you act quick, you'll minimize that risk and don't really lose any rewards. And then second one is to diversify.
00:16:08.050 - 00:16:21.142, Speaker A: Like I mentioned, don't just subscribe to one, really subscribe to as many as you feel comfortable with. Same with the clients and the setup. If you're running multiple Validators, don't just take Prism and get and replicate all over.
00:16:21.142 - 00:16:36.250, Speaker A: Use different clients. The finality incident, for example, only affected two clients. So if you were running only Prism if you were running Prism and Lighthouse, only half of your Validators would have been affected.
00:16:36.250 - 00:16:55.970, Speaker A: But not just clients. If you're using cloud providers, if you're running on cloud providers, different locations, diversify that as well. We'll know almost 30% of the nodes run on USD, and you'll probably get a bit more rewards with that.
00:16:55.970 - 00:17:16.530, Speaker A: But if USD goes offline, you're out. So a third option, and this is probably not yet possible, is to use DVT. You've probably heard about it before, but essentially distributed Validator technology allows you to split the key of a Validator into multiple nodes.
00:17:16.530 - 00:17:42.490, Speaker A: So even if one single node doesn't do its duties, you still get other nodes as backup, so you shouldn't lose any rewards. And then on the ethical regulatory side, like I showed, you need to monitor it's not just enough to trust the relays in most cases. Another option for mev boost, if you're not aware, is minBit.
00:17:42.490 - 00:18:10.666, Speaker A: minBit is a parameter you can set an mev boost, and I believe in Vouch, you can set it by relay. That essentially allows you to only take blocks, mev blocks over the amount you set. So if it's either you want to not censor the network below x value, or you want to only take mev boost blocks over x value because that's the risk you're willing to take.
00:18:10.666 - 00:18:28.142, Speaker A: Whichever one, you need to be aware of it. We've got a table that splits the rewards by relay and aggregate it by percentile. So, to give you an example, for example, if you take the last line, percentile 25.
00:18:28.142 - 00:18:53.350, Speaker A: If you set it at that value, zero three eve, you would only discard the bottom 25% of mev boost blocks. You can go higher than that, obviously, but that's up to you. And then on the custodial side, key policy, whoever has access to the keys has access and essentially can do whatever they want With The Validator, so Don't Just Leave Them there.
00:18:53.350 - 00:19:14.160, Speaker A: And then on the smart contract side, be aware of what's happening. Any upgrades, any dow votes, things like that that might change how the staking providers is operating. So to recap staking is not set and forget, but things we've seen happen.
00:19:14.160 - 00:19:39.878, Speaker A: So monitor and get alerted when they do because that will probably minimize the rewards you lose, if any. And then thirdly, be aware and like I said, mitigate Those risks. And then if you want to know more, like I mentioned at the beginning, we've got free community dashboards and alerts at Ethometrica Co.
00:19:39.878 - 00:19:54.220, Speaker A: So if you don't know or haven't seen us before, definitely go check it out. And if you're interested, we've also got a white paper for institutions taking for institutions. So if you're interested, reach out.
00:19:54.220 - 00:19:57.320, Speaker A: Thank you. And I think might have time for questions.
