00:00:00.890 - 00:00:52.350, Speaker A: Welcome to Uncommon Core where we explore the big ideas in crypto from first principles. For today's episode, I sat down with Su Zu to learn all about perpetual swaps. There's probably not a person in this space who has more authority on this topic than him. The first half of the episode serves as a general introduction to perpetual swaps, while in the second half we explore how perpetual swaps are coming to DeFi and why they are the single biggest primitive that is still missing from the DeFi puzzle. While the episode can get pretty technical at times, we try to follow a logical buildup, so no prior knowledge should be required. Please note that I put some links to definitions and follow up reading into the show notes. Enjoy the episode.
00:00:52.350 - 00:01:00.800, Speaker A: To start out the discussion. Sue, what is a perpetual swap and how does it work?
00:01:01.250 - 00:01:59.870, Speaker B: Perpetual swap is the idea that the buyer is buying the synthetic exposure to an asset and the seller is selling or shorting exposure to that same asset. So the word perpetual there has an important meaning, which is that it has no expiration. Unlike a futures contract, where it'll have a predetermined date at which the derivative no longer exists and gets settled, a perpetual swap seeks to maintain the exposure for the buyer and seller. Perpetually that is in a gist. What a perpetual swap is. There's a lot of different ways that it can be traded and there's a lot of different ways that it's structured, but fundamentally it's a way for participants in a market to come together and exchange risk.
00:02:00.210 - 00:02:34.560, Speaker A: Yeah, so maybe just slightly rephrase what you said. So for regular futures, the price of a contract tends to gradually converge with the spot price or the index price as expiry comes closer. Right. But this is not the case in a perpetual swap because it never settles. So can you explain maybe how it is done in perpetual swaps? How the perpetual contract can successfully track the underlying index price?
00:02:35.410 - 00:03:45.880, Speaker B: Sure. So the arbitrage mechanism of a future is, as you alluded to well defined, right? Because the contract will essentially define the index at which the derivative will necessarily settle on its expiry date. So if it's a cash settled future that settles on, let's say, the T wop of four spot exchanges, then on that date everyone knows that that will be the price that these derivatives end at. So from there, people can buy the spot, sell the future, and vice versa to replicate the risk that they're getting with a perpetual swap. Because there's no expiry, there has to be some other incentive for buyers and sellers to meet the natural demand of the market. So if the market generally wants to be long, then you expect perpetual swaps to need to incentivize sellers to come in, in order for that market to happen. So there's a few ways that perpetual swaps can do this.
00:03:45.880 - 00:04:49.306, Speaker B: The most popular way in cryptocurrency is to have a scheduled funding payment between buyers and sellers. So in that example, if people are bullish, then swaps will be generally paying positive funding payments, whether every 8 hours, such as in the case of BitMax, Okx and Webb, or every hour in the case of FTX and Kraken futures and then continuously in the case of derebit. But just in general, the idea that the buyers are going to have to pay the sellers some amount of money every period in order for the seller to stay in that position. So that creates an arbitrage opportunity for the seller. Right, because the seller can come in and short these perpetuals buy the spot. And now they have essentially a crypto dollar, right? They've regenerated the exposure of $1 and they're collecting interest while doing so. And if they collect an interest rate that's attractive to them, then they're happy to be in that position.
00:04:49.306 - 00:05:04.190, Speaker B: And if they're not, then they'll unwind it. So that in a gist is kind of how professional swaps became very popular because you could buy or sell perpetual swap and know that your exposure never disappears.
00:05:06.210 - 00:05:29.240, Speaker A: Right? So you're talking for example, about the case where I deposit BTC on a derivatives exchange, so I'm long my collateral and then I sell the perpetual swap contract for the same position size as my collateral and thereby neutralize my long exposure and create a crypto dollar, correct?
00:05:30.010 - 00:05:31.222, Speaker B: Yeah, exactly.
00:05:31.356 - 00:06:02.560, Speaker A: Okay, so for the funding rates. So a mental model that has worked well for me was to not actually see these as perpetual at all, but just imagine that. So let's say in the example where you have a funding rate every 8 hours to just see these as distinct futures contracts that settle every 8 hours and then you're automatically rolled over into a new future. Do you think that's a sound model?
00:06:04.530 - 00:07:06.790, Speaker B: It's not quite the model I would use. I get what you're trying to get at, but I think a main difference is that in the case of a cash settled future, you know that the swap will converge to the index price, whereas in the case of a perpetual, you don't know that the raw price will converge to the index. In fact, when the market is very bullish or very bearish, that price will not converge, but you will get paid something in lieu of conversions. So in these formulas they've been generally made quite aggressively to pay arbitragers because they want to protect the integrity of their market and the trust that people have that it will track the index, that it will track the underlying. So these payments are large enough that they seem like they've essentially paid for the difference between the swap price, the observed swap price and the observed index price. So I think you're right, but I think there is some nuance there where it doesn't have to converge.
00:07:07.290 - 00:07:39.230, Speaker A: Got you. So there is this persistent myth that I also subscribe to for some time before learning what's actually true, that perpetual swap contracts were invented in the cryptocurrency space, but you actually taught me that it's not true. So can you maybe give us a quick overview about the history of the perpetual swap contract?
00:07:39.970 - 00:08:13.740, Speaker B: Sure. It generally depends on how specific we want to be on what is perpetual swap. Right. Some people might say, well, perpetual swap in its modern sense was invented in crypto. Some people might say, well, it has a predecessor or it has an ancestor, which is the idea of an index swap or equity link swap. Basically the idea that two counterparties meet in the market and decide to sign a paperwork to exchange cash flows. Right.
00:08:13.740 - 00:09:31.250, Speaker B: That's pretty much all a perpetual swap is. So if you take that sort of philosophical view of what swap is, then obviously they've been around for probably 30, 40, 50 years right, because since the beginning of the modern financial markets, there's been a lot of demand for sophisticated counterparties to make their risk exposure synthetic rather than actual. And these reasons range from tax efficiency to capital efficiency to more broad offshoring of risk. There's a whole host of reasons why participants wanted this in the ODC market, but the reality became that the vast majority of, for instance, equity exposure of European funds into Asian equities is not via owning Asian stocks, it's via owning equity swaps. So these swaps will be collecting and receiving payments based on some criteria and the buyer gets exposure to the index, the seller gets exposure to negative index. So the sellers are typically banks, right, investment banks. They'll sell these swaps and then they'll buy the underlying markets.
00:09:31.910 - 00:09:32.610, Speaker A: Okay?
00:09:32.760 - 00:10:57.662, Speaker B: And the most common benchmark is the MSCI index, the Morgan Stanley composite, you know, there's trillions of dollars in these indices and these swaps are essentially perpetual swaps because there's a funding payment, it's benchmarked to libor plus minus something, and there's also an index. This concept is not new. This concept is not new. Right. The main reason participants like this is because there's no need to roll it, right? There's simply a payment. So the problem with futures is that participants need to constantly remeaat in the market and roll their position and that creates a lot of uncertainty because what if that market shifts very quickly? What if that role is not available? And so as a result, you tended to see in the retail market as well, a key predecessor would be the contract for Difference or the CFD. And this is a very popular market in the UK and Australia, pretty much in markets where CFDs also get a preferential tax treatment because they're considered bets and gambling is sort of lionized in the Anglo sphere, basically.
00:10:57.716 - 00:10:59.966, Speaker A: It's not taxed and confirmed that. Right?
00:11:00.148 - 00:12:09.000, Speaker B: Yeah. So the idea being that if you're a sports, better shouldn't be taxed on winnings because you're negative duty anyways. Right, but then as a result, when you invest in stocks you do get taxed because governments tend to think that when people make money from investing they should pay some of that back. So it's kind of an arbitrage because now if you say well I'm not investing, I'm betting that the number will go up, then they say okay, well yeah, then what do I do? So as a result, CSD is very popular in these countries and same concept, there's an overnight funding rate. One key difference is that usually these are not peer to peer but these are peer to dealer, customer to dealer. So the dealer sets the funding rates, the dealer takes a bit of spread on that funding rate and it's not a peer to peer market. In the Japanese market, perpetual swaps are also very popular, also known as CFDs in that market because again, there's no expiry and you could consider the entire FX market to be a perpetual swap market as well because there's funding payments exchanged every day.
00:12:09.000 - 00:13:33.166, Speaker B: They're called the tomorrow next swaps, tom next swaps, basically the payment that you receive or pay to be long, let's say dollar versus yen, euro versus USD. These are all payments that are analogous to funding rate payments. And if you're in the inner bank market then it is almost like a peer to peer market, right? Where there's no bid ask, you can exchange it at the same price, you can buy and sell the same price and your exposures are carried forward through time. I think that being the backdrop. I think the explosion of crypto perpetual swaps was made possible by a few things happening at the same time. I think one was that spot markets became close enough in line that you could start constructing indices of them to benchmark a swap against because that wasn't always the case, right? There used to be 5% arbitrages between spot exchanges and it'd be very difficult to construct such an index that you'd want to benchmark to I think when BitMEX launched their swap they had to change their index radically several times. Like first they had Bitfinix in it, then they took it out, they had OKCoin, then they took it out, then they made it just coinbase and they made it just at that time it was very hard to figure out what that should be.
00:13:33.166 - 00:14:33.870, Speaker B: I think also professional swaps became a strictly better product than what at that time was the weekly futures on Okx. So before perpetual swaps everyone traded the weekly OK coin or Okx futures and as well as their quarterlies. But the problem with the weeklies is that retail clients often forget to roll their positions. So if you don't remember to, let's say, sell your expiring one week and buy the next one week, then on Friday evening you'll log in and you realize you're not long anymore, you've already gotten expired. So quite often then the market maker would actually analyze this and then say, hey, 30% of open interest is not getting rolled. The price action will often be that it gets dumped into the expiry print. So anyone who doesn't roll and if you're long, let's say you're synthetically saying that you're going to sell your position at any price, right, because you didn't roll.
00:14:33.870 - 00:14:34.306, Speaker B: Yeah.
00:14:34.328 - 00:14:36.658, Speaker A: You're a forced buyer or forced seller.
00:14:36.834 - 00:15:01.370, Speaker B: Yeah. Basically when you don't roll, it's not that you're doing nothing. You're giving the market a market order. That's what you're doing. So you see basically the market tank into the expiry print and then moon right afterward. There's a very common pattern at that time because the market makers realized that this is how you make a ton of money, right. You slam it down and in theory, they should be defending Spot, right.
00:15:01.370 - 00:15:28.078, Speaker B: Because if you're letting your long expire, basically if you're market neutral, you're saying the market that you're going to now bid Spot to replicate your exposure back to get your long back, right. So if you don't defend Spot, then the guy who has the opposite position to you, he's going to essentially smash the print in his favor against your position. Right. He's basically selling your position as low as possible so that you're synthetically selling that print.
00:15:28.254 - 00:15:43.290, Speaker A: Okay. A lot of people in crypto talk about trading around these expiries of, I guess, weekly or monthly futures on CME. So is that basically what you described?
00:15:43.790 - 00:16:22.200, Speaker B: Yeah. So it's mean the CME print definitely very important, I think, not just psychologically, but also from a flow's point of view, just in terms of if people don't roll futures, right, and sometimes people don't. What they're saying is that they don't want to have it anymore, they don't want to be long anymore, or they don't want to be short anymore. And that's treated as a market order that hits the market. So sometimes this can be very big, sometimes it can be very small, and sometimes people can see this and then anticipate it. So there's different game theories. You can't just say because of this, then that market is dynamic, right.
00:16:22.200 - 00:17:08.394, Speaker B: But there's a lot of important things happening on that print. Essentially, there's a lot of risk being exchanged or not exchanged based on that print. Just to give an example of how it's hard to interpret sometimes, right? Let's say someone is long a lot of futures on CME and then they seem to be expiring them. So they didn't roll them to the next month, but they could be now buying spot during the TWAP window instead as a passive client. So that's actually what some of these guys, like Paul Tudor Jones and some other macro fund managers supposedly did, which is that they wanted to get in fast because they thought Bitcoin was going to moon. So they first bought CME futures because that's the easiest way to access these. And then later they said, well, I want to actually get the bitcoin spot.
00:17:08.394 - 00:18:06.982, Speaker B: How do I get that? There's a couple of choices, right? One is you could find someone to trade the future versus spot with you because you already, let's say, long, I don't know, $200 million worth of bitcoin through futures. It's a bit annoying to transfer that into Spot, right? Well, it's not actually that annoying because all you have to do is let your futures expire and then in the expiry window, in the expiry definition, you then buy Spot bitcoin every minute to get your exposure back and you have no slippage, right? Because the price that you buy Spot at is the same as the price that your futures are defined to expire at. In a way, that mechanism is very powerful. And so when someone expires their longs, it could mean that they don't want to be long anymore or it could mean that they're going to switch it into Spot, which is also very bullish. So just to give an example got you.
00:18:07.116 - 00:18:18.970, Speaker A: So do you think that the perpetual swap contract is strictly better than monthly or weekly futures and as a result, is it going to completely crowd out that form of contract?
00:18:20.370 - 00:18:56.274, Speaker B: I think it's not strictly better. I think it's definitely an improvement versus weekly futures. For retail, I think it's a very good retail product. I think for institutional players or for more sophisticated players, they also need month end futures. They also need quarterly futures. Good example would be to hedge options flows, right? So options typically concentrate around the month end and the quarterlies. And if you're an options market maker, you definitely need to trade a future that is in line with your options expiry.
00:18:56.274 - 00:20:04.058, Speaker B: Because if you just trade perpetual swap against it, you're going to be in big trouble if the funding changes a lot because you have to price in how much swap funding you expect to pay or receive over the interval of your options life, right. That process of pricing it in, you're going to want to see how the actual month end future were to be traded to price. It that's one and then two is that if you're, let's say, a miner, if you're, let's say a spread trader, you generally want to lock in the duration of your positions in line with your actual cash flows, right? So let's say you think you're going to mine this much VDC over three months. You probably just want to sell a future and be done with it. You don't want to sell a swap and then have to deal with checking if the funding is in line with what you expect. You kind of just want to do the simplest trade. So there's always going to be a lot of demand for quarterlies.
00:20:04.058 - 00:20:39.686, Speaker B: The quarterly open interest on the Chinese exchanges is very high on Huobi and Okx, if you sum those up, it's usually higher than BitMIx swap. And even after introducing swaps, the quarterly open interest is still much higher than from swaps on those exchanges. So there is clear long term demand for trading quarterlies. I think the weeklies have been generally dominated by swaps and I heard some rumors that they even wanted to delist with weeklies because they just thought it's bifurcating liquidity and there's no point to them anymore.
00:20:39.878 - 00:21:05.586, Speaker A: Yeah, okay, yeah, that makes total sense. Whereas the feature of the perpetual swap is basically that you're automatically rolled over or that it never expires. A feature of the weekly or monthly is that it does expire when you want it to. And so in both cases you save mental and financial transaction costs. It only depends on what you actually want.
00:21:05.688 - 00:21:07.106, Speaker B: Okay, yes, exactly.
00:21:07.208 - 00:21:42.160, Speaker A: Interesting. So I want to go back to one thing you said earlier about the early days of BitMax and how they had to reconstruct their index multiple times and so on. So a lot of people say that in Blockchains and DeFi in particular, the Oracle problem is an intractable problem that can never be solved. But isn't the problem of index construction exactly the same as the Oracle problem?
00:21:43.170 - 00:23:16.390, Speaker B: It's exactly the same. And so I think to say the Oracle problem can't be solved is clearly, I think, a very either theoretical statement or a very ignorant statement. Because I think the Oracle problem is simply how do you bring the needful information from observations to settle financial contracts, right? This is already being done in the centralized finance space for quite a long time. And the fact that there can be issues with this does not imply that it cannot be done relatively correctly and usefully for people. I think for a long time there was the idea that, well, the Oracle problem is intractable, therefore DeFi cannot exist. But if you just zoomed out, you could make the same statement and say CFI could not exist, but clearly it does exist. There's some kind of strange it's simply a question of how do you map the trustworthiness of index composition in the real world into crypto or into blockchains? And I would point out that for me, I'm aware of many inefficiencies that have occurred on CFI index constructions.
00:23:16.390 - 00:24:13.178, Speaker B: Right. When I was at Deutsche Bank as a trader, as a prop trader, there are people sitting around all day trying to think about how do we arbitrage index construction? Right? There's entire desk that will say, okay, we're going to bet on what things will go into the index. We're going to abuse the fact that this stock is more likely to enter it and by pushing it up, it is even more likely to enter the index. All these games, right? And you even saw it recently with some of these Chinese companies where they know how MSCI and Footsie do their definitions. So they create a shell company, and then they basically do everything that's needed to get it into some of these small cap indices, then into mid cap and then a large cap, and then I forget the name of the stock. But there was some stock where they managed to get this into one of the biggest indices, and no one had done due diligence. If this is a real company, right? That they had actual stuff going on and the stock went down 99% in a day.
00:24:13.178 - 00:25:01.074, Speaker B: Sorry. The index provider said, we're going to look into this if this is a real thing or not, and they're going to look into it. It immediately went down 99%. And the fascinating thing about that was that that was the week before it was about to get included in a very big index, like an even bigger one. And so there were some funds that were betting on that inclusion and because that flow would have been very big, because people will be forced to buy the stock if it gets included, then people were betting that this would get included because it fit all the criteria. But then somehow before that happened, DNX came out and said, nope, we've changed our mind, we don't want it. So CFI indices, they're just trying to achieve a goal, same as DeFi Oracles, they're trying to achieve a goal of saying, we're going to bring in this information and it's going to be useful for settling these contracts.
00:25:01.074 - 00:25:17.410, Speaker B: And people generally understand how it's going to go down and what the goals are, but there's always a requirement to zoom out and ask, have we achieved the goal? And if they haven't, then there's always room for humans.
00:25:17.910 - 00:26:11.460, Speaker A: Yeah, I agree. I think that's probably going to be the future of Oracles as well. Right, so you have a definition of what an index or an Oracle are supposed to do. Then you have a human looking at data and cleaning the data so it fits the goals and then they submit the data on chain or in whatever way it is supposed to be used. So to end this section on, I guess, the history of perpetual swaps, I'd like to move into DeFi. So in the past in crypto, I guess you could say the perpetual swap is the killer product so far in the crypto space. Would you agree with that?
00:26:11.830 - 00:26:13.220, Speaker B: Yeah, I think so.
00:26:13.590 - 00:26:50.670, Speaker A: And I think nothing else has seen this kind of adoption, especially from retail, but it has been surprisingly quiet around perpetual swaps in DeFi and today we want to explore a little bit if that's going to change, how that's going to change what you can look forward to. So what different approaches exist to create perpetual swaps in DeFi and what projects maybe are about to launch in these categories?
00:26:51.650 - 00:27:57.238, Speaker B: Sure. So I think DeFi swap projects, they generally can be divided into two distinct types. The first being central limit, order book driven, and the second being automated market maker or AMM driven. And it's a bit of a mouthful, but central limit just means that some participants are posting bids and offers and amending them as the underlying markets move continuously. So this would be venues like dYdX, upcoming Zariva, Dex, a few others in that kind of vein. And the idea there is you're almost mapping the centralized exchange experience into DeFi, right? So when you trade on BitMax or Derive or FTX, that is exactly what's happening. There is no automated market maker, there are just real people putting in bids and offers all day long.
00:27:57.238 - 00:29:26.254, Speaker B: And through that process, when the bid of one participant is higher than the offer of another, a trade occurs, right? The matching engine sees that and submits a trade ticket, submits a fill to each side and life goes on. So this approach has some strengths and weaknesses for DeFi. I think the main strength is that it's simple. You're just trying to say, I'm going to be decentralized BitMEX, I'm going to let people exchange risk in this way and that's quite simple. I think that the downside of that is that you're now taking a workflow from you're taking a workflow from centralized markets and you're trying to put it in DeFi and say that it'll somehow be more useful to people because it's decentralized, right? But you're giving up a lot in the process. You're giving up the fact that for one, possibly all these orders are being seen on chain, so they could be front run, right? You're also giving up a lot of latency, you're also giving up a lot of performance, right? A centralized exchange matching engine might be able to handle a million requests in a second, whereas there's no blockchain that can handle that. So that'll be the main challenge.
00:29:26.254 - 00:31:05.154, Speaker B: So for the ones that are going this approach, they're thinking very heavily about how do we scale, right? How do we scale, how do we do off chain matching in a way that people still trust, that still DeFi enough. So that approach, I think, is fundamentally a bet that the scaling will be sufficient to create the experience that is good enough that users that don't want to use KYC, users that want to be able to just use a web wallet, get in and out, they'll be familiar with that. And so the advantages is that they'll be familiar with how it works in Centralization already. So serum would be another one that's in that category, right? The serum will be based on Solana and they're backed by FTX, which would also bring that expertise from Central limit order book trading in as well. But again, you have to create a user experience where they're saying, this is actually really good and really useful versus what I can already do on SX, on a centralized exchange. So the AMM approach there's a few projects in that space future swap, perpetual protocol, synthetics itself. And these are saying, okay, well, why don't we take the DeFi primitive of the AMM, the automated market maker, and say, people, when they come into our order book and they want to buy or sell, they don't need to wait for the other side to be there.
00:31:05.154 - 00:31:38.374, Speaker B: There will be a pool of capital waiting for them. Right. And that pool will trade against the client, and there will be token holders who are backing this pool, and then they can hedge themselves in any number of ways. So this approach is trying to more explicitly tease out the advantages that DeFi might have over CFI right. Which is that it could missionlessly create this big pool of capital that sits as the market maker.
00:31:38.502 - 00:32:12.710, Speaker A: Yeah. I want to get into the advantages of what perpetual swaps could do in DeFi versus CFI also a little bit later. Sure. Maybe for our listeners. So, in a previous episode where you gave me an introduction to DFI in general, you made the distinction between peer to peer contracts or peer to peer trading. And peer to pool trading, p to P is the central limit order book. Right.
00:32:12.710 - 00:32:17.926, Speaker A: And peer to pool is exactly this AMM model, correct?
00:32:18.108 - 00:32:20.520, Speaker B: Yes, absolutely. Okay.
00:32:23.150 - 00:32:58.450, Speaker A: I guess not a lot of people, including me, have thought about how you actually use the AMM model for perpetual swaps. Because I'm trying to think how you would like in a regular pool where you swap assets, you have this you basically have a pool of two different or even more different assets in a pool. And then people can put in one asset and take out another. And the ratio in which they can trade these with the pool changes. So I'm kind of struggling to envision how this would work for swap contracts.
00:32:58.790 - 00:33:43.970, Speaker B: Yeah, I mean, without getting too technical, the easiest way to think about it is imagine that you and I and some other people, we opened a BitMEX account and we deposited our money together, right. And we said this strategy will be whenever someone comes to buy, we sell to them. And then we can all log in and see what the risk of our position is. And we also can calculate what percentage of this account we contributed. And from there you can imply what your risk is. Right. So let's say the account, let's say it's just you and me, and we shorted 1 million of BTC USD swaps.
00:33:43.970 - 00:34:32.306, Speaker B: Then you would say, okay, well, you're now short five hundred k and I'm short five hundred k. And if you wanted to hedge, you would then go and buy a spot yourself. And you could say, okay, now I am hedged and I have replicated that risk. That approach clearly works because the people in the pool are arbitraris fundamentally, and they're getting their fills automatically rather than having to post liquidity in the order book. You can think of it as a virtual AMM. It's not a real AMM in the sense that it's not like uniswap where the aggressor into the order book is actually removing some assets. And contributing others.
00:34:32.306 - 00:35:07.518, Speaker B: Right. There are no real assets being exchanged. Instead there are positions that generate P L that are getting given to accounts, that are being given to participants. Whether they like it or not, these positions get given to you. Synthetics really is a virtual AMM, right? Because as a mentor in the system, you have no control over what people will do. You kind of know what people generally do, but at any point in time someone could do something totally weird and your exposure is changing before your very eyes. Right.
00:35:07.518 - 00:36:01.594, Speaker B: So that means that the biggest minters, I mean, we're one of the biggest minters on synthetics. The biggest minters, they're calculating what the pool is doing and what the risk of that pool is and then hedging it. Right. And seeing are there incentives to mint the opposite risk to neutralize the overall risk of the pool? Because some of these protocols will be paying incentives for you to bet against other people that have come in. Right. So let's say there's only buyers, right? Well, then probably all these AMM protocols will have a way to incentivize you to come in and say, okay, we're going to actually pay you to short on our AMM. Because if the AMM can attract an equal amount of buyers and sellers, then it actually has no capital at risk.
00:36:01.594 - 00:36:28.710, Speaker B: Right. It's done a middleman. It's effectively become the peer to peer. It's negotiated peer to peer. Right. It's intermediating a peer to peer transaction. So that's kind of the dream of all these virtual AMMS, which is that it can, through incentives, balance that risk so that the minters or the contributors to this AMM pool have the least amount of risk.
00:36:29.530 - 00:37:38.682, Speaker A: Yeah. Okay. So I've long, I guess, waited for time to ask some questions about synthetics because I've never really looked into it, but so the way that I understand it is it's not directly peer to peer in the BitMax sense, where a long and a short meet and then the contract is created. Right? So it all starts out with an exchange and correct me in a bit if I'm wrong, it starts out with an exchange where you can trade these virtual tokens that represent the PNL. Basically, via that exchange and via the price discovery, the the market can signal that it wants, like it, it wants to buy like long tokens or short tokens. And then this other group, the Minters, can go deposit collateral and mint against that collateral, the token that is demanded by the market and then sell it. And to tell if that makes sense for them, they would have to basically see at what price they can hedge the exposure.
00:37:38.682 - 00:37:40.750, Speaker A: Is that roughly accurate?
00:37:41.650 - 00:38:45.826, Speaker B: It's got the main strokes. Right. The mechanism that is used is a bit different. Basically what it is, is as an SNX holder, you then can mint SUSD, right? SUSD is the baseline of the ecosystem. When you mint SUSD, you are now taking on your prorata proportion of the global pool of all assets minted. So if everyone else has minted S USD and then immediately bought synthetic ether with their SUSD, then if you just mint SUSD, you are now short ether because as the price of ether goes up, your debt to the system will go up. So if you mint SUSD and then you immediately convert to what everyone else on aggregate holds, then you have no risk because you have converted to those assets.
00:38:45.826 - 00:39:37.730, Speaker B: Right? So that design is essentially making it so that most people end up minting ether or not minting. They end up buying synthetic ether because they're bullish on ether, also because everyone else is minting it. So that also creates some problems for people who, let's say, are only trying to mint. They want to mint SUST, but then they want to use it in some other way. Right? So in synthetics, there's initiatives where they want to encourage people to come in and mint inverse ether or mint inverse BTC, because there's also a lot of SBTC that is being traded.
00:39:38.630 - 00:39:48.040, Speaker A: And before you go into that, for every S East that exists, there must also exist some inverse se.
00:39:48.590 - 00:40:45.690, Speaker B: No, there doesn't exist this. And then, because it's getting a little bit convoluted, I guess the simplest way I can explain it is if you imagine a pool, this pool is not balanced by nature. Who is underwriting the performance of these synthetic assets? Well, it is the people who own SNX. In order for them to claim their weekly fees, they have to get their collateral ratio in line. Right? Now it's a 600% collateral ratio, for instance. So that means that if their debt goes higher than a certain ratio against the value of their SNX, then they can no longer claim rewards. Right? And when they are in this system, they're betting against everyone who is minting synthetic.
00:40:49.870 - 00:41:03.310, Speaker A: The basically the other side is not tokenized. Yeah, you could say it's virtual or whatever. It's implicitly taken by the SNX collateral holders, the mint.
00:41:04.130 - 00:41:22.040, Speaker B: Okay, yes, that's right. It's a virtual AMM system that's not leveraged. So it's not a perpetual swap system. Yet they've announced that they want to go into leverage as well. And so that'll be another big product in the market.
00:41:22.650 - 00:41:49.120, Speaker A: Something that I like a lot about DeFi is the ability to tokenize any position that you have with any particular depth and then use it in a different one. So do all of these upcoming systems that you described allow you to tokenize your perpetual swap position and withdraw it and use it somewhere else?
00:41:50.610 - 00:43:35.742, Speaker B: I think they'll all want to, for sure, because the biggest upside that DeFi perpetuals have is that they can interact with all the stuff that's already in DFI, right? Whether that's swap pools, balancer pools, you could imagine stuff where if there's a 50 50 pool of ether and a short ETH perp, then that's actually now a crypto dollar, right? That pool token is now equivalent to a dollar. Or you can imagine on WiFi, right? You could imagine that an ETH vault could be a vault where the strategy is to sell ETH to USDC, or sell it to YUSD, and then yield farm with that YUSD, and then also buy ETH perp to maintain that ETH exposure. And as the market goes down, they would automatically take their YUSD and use it to remarch in their ETH perp so they don't get liquidated. There's all sorts of things that you can imagine happening. And so I think that's part of the reason why we've been very bullish on DeFi perps as a key primitive, because it really can eat a lot of the things that people currently think of as being indispensable in DeFi. I think the idea is, okay, if people want leverage on their ETH, if they want to be able to borrow against it, well, one way they do it is they put up their ETH and then they borrow dollars. But another way is they could sell their ETH all to dollars and then buy a perp.
00:43:35.742 - 00:44:37.298, Speaker B: Right? And that's actually what CFI traders do. A lot of CFI traders, they mostly hold dollars or stable coins and then they buy perps. I think one of the big reasons why FTX did so well is that they recognize this. They recognize that, hey, actually in crypto, not everyone wants to hold BDC as collateral. They want to hold their own coin, or they want to hold dollars as collateral and they just want to here, here you're giving people that same upside where they can hold whatever collateral they want, they can put on whatever positions they want very efficiently. And so I think in general, the ones that are going to be able to benefit more from composability will likely get product market fit much earlier. The ones that are going less composable, more scalable, because there's an obvious composability scalability trade off at the moment in the way that Ethereum has been developing.
00:44:37.298 - 00:44:54.970, Speaker B: I think those will take a different route to adoption, but that may also bear fruit in its own way if they're able to create an experience that is really rock solid for users, that makes it competitive with centralized exchanges.
00:44:56.110 - 00:46:18.390, Speaker A: Yeah, I would love to go a bit deeper into this idea of creating stablecoins or crypto dollars. So I have a couple of friends who receive payment in BTC, and instead of selling it, I recommend it to them to instead deposit it on BitMax or derivate and convert it into a high yield crypto dollar, basically doing the trade that we discussed earlier. And I think this has insane potential if we can get this in DeFi. So I would like to explore a bit like how exactly it would work. So in my mind, for example, you would have repbtc and then you would have a short BTC token that represents basically a short position on one of these perpetual swap exchanges. And you could then wrap these two into a new token that is basically a tokenized crypto dollar, right? Then you could go even further and lend out the original long BTC to earn even more yield. So you would have basically the yield from the short position.
00:46:18.390 - 00:46:44.830, Speaker A: If the market is bullish, you get paid positive funding and you get paid yield from supplying it on Ave or compound, and you have a stablecoin and it's in one token and it exists on chain. I think that is, in my view, a killer use case. So do you think that this is going to crowd out, to a degree, existing stable coins, given that this is also trust minimized? Right. There's no central issuer.
00:46:46.530 - 00:47:55.790, Speaker B: Yeah, I think it's not going to crowd out because, as I mentioned before in a different podcast, there is a huge demand for stable coins that can be converted to fiat very easily, USDT or USDC. So it's not a winner take all game in any way. But I do think that these stable coins are very cool and they could make it less appealing to hold, shall we say, algorithmically balanced stablecoins. There's less of a need for an algorithmically balanced stablecoin with a network effect because there's just no need. Right. You can easily create a meta stablecoin that is earning the best yield across many things. And I think that gets back to aggregation theory, right? Which is that even with all these perp swaps, then you can imagine, once these are all out, an aggregator that comes on top and says, if you want to short BTC, USD or ETH USD, I will automatically rebalance your short across five different perp exchanges.
00:47:55.790 - 00:48:14.314, Speaker B: I will find where it's the most attractive, and then with your long leg, I will find the leg that is the best, and then I will then wrap it for you in a stable coin. So then when people are seeing this, they may just deposit a stable coin. This may be a Y vault, right? It may be a vault, yes.
00:48:14.352 - 00:48:19.050, Speaker A: I was just going to say that. Yeah, it's basically Y token for perpetual swaps.
00:48:22.030 - 00:48:33.878, Speaker B: There's a lot of cool stuff that can be done. And really what it's doing is it's automating what people already do in CFI. But it's making it accessible, it's making it very simple to understand and it's.
00:48:33.914 - 00:48:46.900, Speaker A: Trust minimized, and mostly people can withdraw it from the exchange, which they could never do. Right. They can transact it. You can create a crypto dollar on BitMEX, but you can't send it to someone else.
00:48:47.270 - 00:48:59.574, Speaker B: Exactly. You can't send your account to someone else. Right. You have to take the coin out. You can't give someone your position in BitMax, but you could do that in DeFi. You could give someone your perpetual swap. Right.
00:48:59.692 - 00:49:05.238, Speaker A: Do you think that BitMax and derribit and so on, will have to enable this.
00:49:05.404 - 00:50:20.662, Speaker B: I'm not a believer that DeFi will kill all applications of CFI. I think that there is a lot of value to what's happening in CFI from the point of view of they're already mapping what's happening in traditional finance, but in a very agile and very regulatory arbitrage way. So in a sense, they have 1 million orders per second. They create that experience where you can trade huge sizes against other counterparties, you can trade huge sizes against retail. That kind of experience, I don't think is disrupted by DeFi, actually, because that experience is ultimately optimizing for different things. Right? So there will be parts of the CFI experience that are highly attackable by DeFi. And I think we've already seen that, right? I think altcoin trading is highly attackable by DeFi because these altcoins are already illiquid as hell on centralized exchange.
00:50:20.662 - 00:51:07.054, Speaker B: They're not even that much more illiquid in DeFi. They're probably less illiquid because there's all these people putting it in pools to try to earn some money. So you kind of already have beaten many altcoin exchanges, and I think that's why you're seeing suddenly all the top exchanges list all the DeFi tokens as fast as possible without any fees, because they're terrified of the idea that people don't even bother depositing. And in fact, people withdraw from centralized exchanges to try to buy DeFi tokens. It's a pull factor to DeFi, right, where all the uniswap tokens going up a lot. People start saying, why am I even trading on centralized exchange where these tokens suck? And the ones on DeFi are awesome? So I think that part of CFI is heavily challenged. I think staking assets as well, and governance based assets as well.
00:51:07.054 - 00:52:06.082, Speaker B: If you put it on an exchange, you're losing tons of the functionality. Right. If you hold certain assets on an exchange, you don't get the rewards, you don't get the right reward rate, you don't get the right governance rate. And all these newer DeFi projects, they're making it explicit that they want you to participate in the governance, they want you to participate in what's happening, and they reward the ones that don't, and they inflate away the ones who don't care. And through that process, I think it makes them stronger because it compels the community to care about what's happening and not just bet on number go up or number go down. So I think, yeah, those parts of DeFi are very threatening to what's happening in CFI. I think that in the perp space, the capital that's currently in cash and carry trades, that's in these kind of things, those can also migrate to DeFi as well.
00:52:06.082 - 00:53:06.440, Speaker B: And people will, in general, get a cheaper cost of leverage than they get right now because their desire to be long will be matched with people who just want to own stable coins. Right. In theory, anyone who's long stable, who just owns stable coins anywhere they could be a provider of leverage to someone who wants to be long ether or long bitcoin, right? Because that dollar can be used to create, to be swapped into a risky asset for them. So I think it bridges that vast expanse between the trillions of fiat and dollars in the market and the demand for leverage. So I think that the frontier would be the ones where you're trying to compete on scalability with centralized exchanges, with these very fast market data, these very fast colocated servers. I think that game is a game that will be the last, if ever.
00:53:07.210 - 00:54:10.960, Speaker A: That DeFi would come for something you said earlier, I thought that was super interesting because I never realized, but DeFi tokens tend to have an ongoing proof of work for the user. It's not just the moment they are mined initially or created initially that there's a proof of work. But if you're a holder of these tokens and you don't want to get diluted, then you have to perform a constant proof of work basically for the entire duration of the asset. Just kind of crazy. So about another trade off between DeFi perps and CFI perps. So we saw Derebit announce KYC, saw BitMax announce KYC and well, isn't that one of the major benefits of DeFi and one of the major pull factors in the future?
00:54:11.570 - 00:55:26.726, Speaker B: I think for a lot of users that want the centralized exchange experience, but without KYC, there's going to be a lot of value in the DeFi perps that take the first approach that I mentioned, which is essential, limited. That means that they can market make, they can work a bid, they can work an offer, they can get that same experience that they get elsewhere. Right. I think there is a big set of that. I think that the exchanges where I think one thing that is interesting is people are quite okay KYC if they think it's worth it and it's trustworthy. So I think when FTX did their token and you had to KYC to be able to get the token, all of a sudden people are like, oh, obviously I'll KYC for this, it's easy money, right? I think that, yes, there is the demand to not KYC, but at the same time people don't value their KYC very much in dollars. It's kind of ultimately still about comfort, still about trust, and still about cost.
00:55:26.726 - 00:56:27.030, Speaker B: So that's why I think centralized exchanges, they compete from the fact that for one, they have specific client bases. Some of them are more experienced with what's happened in the traditional CFD space, right? For instance, an exchange like bybit their DNA is much more from the traditional retail FX space. So they understand the affiliate marketing, they understand that kind of a flywheel. There's a plurality of business models I think, that can exist in this ecosystem. And I don't see many reasons why it's winner take all in any case. But I do think that there will be some parts of trading that will be heavily challenged. I think one interesting example of this is just copy trading, right? Or asset management.
00:56:27.030 - 00:57:24.026, Speaker B: I think a really cool thing you can do now with perf swaps is let's say some guy tweets that he's a really good trader and all this kind of stuff. Well now in theory he could create a portfolio even cooler if it's a shielded portfolio where he is putting his positions out online and people can shadow him. And let's say if he's good, the track record is all on chain and people could then invest in something where they get the signal at the same time that he does. So they get the same fill, right? All these kinds of things they can't really happen very easily in a centralized chain experience. You have to give the guy the API keys, you'd have to hook up his algo to your thing and you have to trust that it's going to work. I think that asset management on chain is going to be pretty big. I think that yvolts are kind of an example of that.
00:57:24.026 - 00:58:10.826, Speaker B: But there will be a lot of other types. I'm more excited about the sort of non zero sum convex opportunities that will be created by the explosion of design space from DeFi as opposed to know what things in CFI will be dominated, strictly dominated by these. I think net improves the whole experience of both DeFi and CFI. Another example of that would be in CFI, right? Now your collateral earns nothing but when you integrate I could imagine a CFI exchange integrating a DeFi perp, right? It could include it in the aggregation. There could be a market maker that brings that mean you don't even need.
00:58:10.848 - 00:58:17.686, Speaker A: To do that, right? You can just supply the hook into compound and ave and supply the collateral.
00:58:17.878 - 00:59:29.060, Speaker B: Yeah, you could absolutely do that and then you could take one step further and kind of do more sophisticated strategies or do more sophisticated bridging of liquidity. So there's always going to be like a meeting in the middle then, if you will. Because essentially exchanges, what they have as a strength is a captive flow, right? They have people that want to trade there because they trust the brand, they understand the user experience, the client experience, they know that it's safe. They want to be KYC'd, right? They don't want people to be able to randomly withdraw through a web wallet. They want there to be a very hard withdrawal process if it's an institution on some exchanges, we have protocols where I have to get called, people have to get called for that withdrawal to go through has to be a video call. So I think that many participants when they're handling large amounts of money, they prefer this kind of thing and other participants, if they just want to click around, they honestly might go fully to a DeFi solution, and there's no whole range in between.
00:59:30.950 - 01:00:26.862, Speaker A: Okay. So, by the way, I also explored some of the ways that centralized exchanges can hook into DeFi protocols, such as compound in an article called The Great Race to Crypto Banking. I'll be putting that link in the show notes. So I have a final topic that I'd like to explore. We both have in the past argued that the BitMax insurance fund was too large, and I'd have two questions about that. So first, earlier in March this year, there was this huge day where Bitcoin crashed, like two, three and a half K on BitMax. And some analysts have suggested that the insurance fund would have been drained in this single day had BitMEX not internalized the toxic flow.
01:00:26.862 - 01:00:28.740, Speaker A: You remember that event, right?
01:00:29.190 - 01:00:29.940, Speaker B: Yes.
01:00:30.410 - 01:00:38.040, Speaker A: And did that change your mind about the optimal size of the insurance fund?
01:00:40.410 - 01:01:37.050, Speaker B: It definitely made me think that it's not the worst thing in the world for one of the biggest exchanges to have a bit more of a larger one. Right. I think that the way that Bimex works with its Cascading liquidations, how do you say? It definitely benefits large participants to know that there is a big insurance fund backing it. But I think that the market will come to more capital efficient ways to solve this problem. Right. I don't think that having a gigantic pool that just sits there, I don't know that this is the best approach. I actually think a tokenized approach ultimately is better, where you can tokenize the future revenues of the system, something like that.
01:01:37.050 - 01:01:58.690, Speaker B: But in any case, I think that if BitMIx had partial liquidation, if they had some kind of a non Cascading function, I think it wouldn't even have gone down that much because it was really all BitMax Led after a certain point. Right. I think below 4.6, it was entirely BitMax Led. BitMIx went over $1,000 below everywhere else. And it was all arbitrary people just.
01:01:58.840 - 01:02:01.470, Speaker A: Selling others, what's, 100% BitMax?
01:02:01.630 - 01:02:42.542, Speaker B: Yeah. I mean, we were very fortunate that day because of the way that we were positioned, but there were people trying to trade market neutral that got blown out because they were long Bitmic short elsewhere, and then they get wiped out on that leg. It definitely gives shorts on that day. They feel good knowing that the insurance fund is there. But on the other hand, if you look at every other exchange that day, they didn't have any problems with their insurance fund or any huge problems. And I think part of the reason is that they liquidated it in a slightly different way, and the prices were more orderly, the move down. Right, yeah.
01:02:42.542 - 01:03:35.170, Speaker B: So I think that BIMx definitely took a big hit after that day in terms of client trust, in terms of having their market go so low and stay so low for so long. I think that big insurance funds, I don't anticipate there being another one, I think that mimics being the first, they managed to accumulate this when clients sort of didn't really care or didn't really calculate how much they were losing to the slippage. And now that there's a lot of other ways, people now know they can get partially liquidated on FTX where they don't lose their entire position just because it starts going into margin call. I think people are realizing that this is real money that they're putting out there that they're losing. So I think that I don't expect big growth in any other insurance funds.
01:03:35.750 - 01:04:11.200, Speaker A: Yeah, and to shill our own book here once more, so we also had an article on the design space for insurance funds and liquidation mechanisms. And I'll also be putting that in the show note. So my second question is and that's something we did not explore in the article, but that is nonetheless very interesting to me, is how does DeFi change the design space for insurance funds and liquidation mechanisms? Is there anything that we can do now in DeFi that maybe we couldn't do that hasn't been tried in the CFI space?
01:04:11.970 - 01:04:37.286, Speaker B: Yeah. So there's a few things you can do right, that create an embedded backstop to the system while being more capital efficient. I think one is you could mint new exchange tokens whenever insurance fund goes negative. That's kind of a cool concept, right, because you're using totally cash flows and meanwhile, everyone else who's trading pays a cheaper price, right?
01:04:37.388 - 01:04:40.582, Speaker A: And one protocol that does this is maker, right?
01:04:40.636 - 01:05:48.486, Speaker B: Yeah, maker, exactly. They do this. I think another good way is through staking, right? People who stake the exchange token, they bear the risk of the insurance fund going bad, but they earn more of the fees. So in a way, they're kind of like the deep equity holders. I think there's a lot of interesting ways you can handle that problem. Ultimately, what you're trying to do is you're trying to do a risk insurance, right? You're trying to insure against a move that wipes out participants to the point that you cannot pay some other participants. And that gets us back to the AMM discussion, which is how do you ultimately ensure that the flow is relatively balanced and that the people who are needed to be able to back up the payments can actually make those payments? So I can imagine there being some synergy with insurance protocols, right, where there's people that put money in passive pools that say, I also want to do credit delegation, or I also want to do some kind of a delegation where I want to earn a higher yield.
01:05:48.486 - 01:06:30.858, Speaker B: And I'm okay being slashed. If this exchange goes down or this exchange's pool goes down. I think a really cool development we just saw was I think Ave proposed a yearn improvement proposal, which was to allow credit delegation in. Could imagine, you could imagine in the future other types of credit delegation regarding insurance funds for perpetual protocols being very much about how do we access that vast pool of capital that's sitting there and wants to earn more money. Right. Because that capital is relatively risk seeking. Right.
01:06:30.858 - 01:06:51.200, Speaker B: It's apparently shown the interest in farming random coins. Right. 500 million of this stuff goes into random projects that are unaudited, like, every week. So clearly there's risk tolerance here, and hopefully some of that risk can be harnessed in a sort of market efficiency way that is a win win.
01:06:52.050 - 01:07:12.678, Speaker A: Right. So it doesn't just go into the next decentralized Ponzi scheme, but instead it goes into the also risky and high yielding insurance fund of exactly. Swap protocol, but that also yields something for the greater good, for the DeFi space as a whole.
01:07:12.764 - 01:07:13.062, Speaker B: Yeah.
01:07:13.116 - 01:07:18.790, Speaker A: Makes a lot of sense. Yeah. So thank you for this amazing discussion.
01:07:19.770 - 01:07:21.140, Speaker B: Thanks for the talk. This is a lot of fun.
