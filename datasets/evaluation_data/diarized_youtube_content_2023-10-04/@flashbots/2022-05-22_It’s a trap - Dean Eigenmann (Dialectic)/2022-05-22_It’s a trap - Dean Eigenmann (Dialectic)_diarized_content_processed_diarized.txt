00:00:00.570 - 00:00:29.430, Speaker A: Oddly short talk. I prepared this this morning and was kind of stuck on trying to figure out how much I can say without saying too much. Obviously I want to be able to provide you guys with a bit of alpha, but I obviously can't too much alpha because that would put all my hard work to shit.
00:00:29.430 - 00:00:40.060, Speaker A: So, just to get started, who am I? My name is Dean. I've been in crypto relatively long. Some of you might have worked with me before or seen some of the stuff I do.
00:00:40.060 - 00:01:11.730, Speaker A: I recently co founded a team together with Edgar, who you might know, he was previously at Flashbots, was the source of a huge dilemma last year when he proposed a client where you could reorg miners that caused a bit of a stir in crypto. And I like when people cause a bit of a stir. And so I reached out to him and we decided to put together a team, which is now a team of four people, where we mainly focus on doing an Mev internally.
00:01:11.730 - 00:01:28.760, Speaker A: Yeah. So all of you have probably heard of the Sandwich Attack. What is a sandwich attack? It's when you front run and back run a transaction so that you can take profit before the transaction or before the transaction that you're squeezing, and then the last one as well.
00:01:28.760 - 00:02:16.070, Speaker A: And so some of the traps that we're going to look at are related to this, but also just arbitrage transactions in general. And some of the issues that we've run into when you're doing generalized arbitrage on chains like BSc or Phantom that have a lot of experimental coins, a lot of Ponzi schemes and just a lot of shitcoins in general. So on BSE, currently we detect roughly 744,000 pairs on uniswap like exchanges, right? So we have built a tool where we index anything that looks like a uniswap pair and automatically add it to an index so we can arbitrage really any pair automatically.
00:02:16.070 - 00:02:50.850, Speaker A: This obviously opens up a lot of problems because as previously said, a lot of the coins that we see are low liquidity, they're random scam coins, they have weird nuances in the transfer function so that you can't do weird trades with them and things like that. And so that means that we run into very interesting things where we try to do an arbitrage and then somehow sit on millions of dollars of a token and we have to figure out why. Which has led us to some very interesting nights of debugging.
00:02:50.850 - 00:03:04.360, Speaker A: One of the last ones was in Switzerland where we bought a token, luckily not too much, I think like $50,000, and then couldn't liquidate anymore. And so we see that quite often. Actually.
00:03:04.360 - 00:03:25.760, Speaker A: This was one of them, right? So we were arbing on the way up and then suddenly the price went to zero and we were sitting on this entire token and we're like, oh shit, what the fuck happened? And this is what happened. So this token was incredibly interesting. This took us a while to debug until we realized what it was.
00:03:25.760 - 00:03:57.254, Speaker A: How many of you are familiar with a PGA priority gas auction? Right? So that happens when we see someone else arbing a trade and we get in a competition with them to get a higher gas price. When we simulate a transaction or when we simulate a trade, what we do is we simulate it with a default gas price. And then when you get in the PGA, you no longer simulate that transaction even though you're upping the gas price, right? The reason why we don't do that is because in the PGA, we just need to be fast.
00:03:57.254 - 00:04:17.982, Speaker A: It doesn't matter anymore what the computation is, we just need to be fast as fuck to ensure that our transaction gets on the network faster at a higher gas price. And what this token did was kind of slimy. As you can see on line 369, it stores what your current gas price is.
00:04:17.982 - 00:04:56.090, Speaker A: And then on line 372, if your gas price is higher than some default gas price variable which they had set, which was I think like 80 GWe or something, they put you into that random map which says is status equals to true. And at one point if you're inside of that map, the transaction just reverts. And so that's something that we never ended up detecting because in the simulation it looked completely fine, even though at one point they just revert you on line 377 in that if statement.
00:04:56.090 - 00:05:26.520, Speaker A: So they detect if you're doing a swap and if you're doing a swap and your gas price is over their default price, they're just going to revert you. And that's something that's super hard to detect in a simulation, right? Like we've built some pretty advanced simulators, but even those can't detect those, especially when we're trying to be fast, right? We have these decision trees on when we add different parameters to the simulation to try and test things out. But when you're being fast in a PGA, you just can't do that.
00:05:26.520 - 00:05:47.274, Speaker A: Then there's other ones which we've seen as well. So this is a nice transfer function which stores the state in some random other contract. And so we were able to detect the bytecode that happens in this function, but it then does a call to some other random function.
00:05:47.274 - 00:06:02.350, Speaker A: And so you're not actually ever seeing the bytecode. And it's really hard in the simulation again to be able to detect what the accounting did. And the accounting did something similar to the previous transaction where it did random checks if you're doing some kind of swap.
00:06:02.350 - 00:06:32.890, Speaker A: So how do we fix these things? One of the things we've started doing is we avoid transactions that use certain opcodes, right? So we don't trade tokens where the transfer function calls a block hash opcode, a gas price opcode, or a coinbase opcode. We've seen that quite a bit on BSc. There's like weird scam coins that you can only trade when some validator is the coinbase.
00:06:32.890 - 00:06:56.740, Speaker A: The gas price thing there as well that I previously mentioned and the block hash thing as well that we've seen. Yeah, there's a bunch of really weird stuff on BSc. We've been playing around with some experiments on how to simulate these better, but the easiest way to avoid getting trapped right now for us is heuristics right.
00:06:56.740 - 00:07:10.834, Speaker A: So what does that mean? We do certain things like filtering out pairs that have less than N in liquidity. N is an arbitrary number. Right now, I think we do anything that's under a million dollars worth of liquidity on a specific exchange.
00:07:10.834 - 00:07:24.090, Speaker A: We're usually like, that's probably a bit weird, not going to touch that one for a while. Another one that we see often is 60% of LP tokens that are owned by an EOA. That's usually a little bit shady.
00:07:24.090 - 00:07:44.542, Speaker A: If you see an LP token that's like 60% owned by a smart contract, that's usually fine. That's usually like, oh, a lot of this is locked into some staking contract. 60% locked by an EOA is usually like some weird ponzi scheme that you just don't want to be caught with.
00:07:44.542 - 00:08:08.360, Speaker A: One of the other things we do now is we categorize for a lot of the ARBs that we do. And so we have different limits, right? Like if certain heuristics match will ARB up to $50,000, if other heuristics match will ARB 50 to 10 million, and then if other heuristics match, it's open ended. And we've seen that kind of reduce the losses that we have.
00:08:08.360 - 00:08:24.960, Speaker A: Our bot right now we've seen to be one of the most successful. So what a lot of people underestimate is how little you have to be successful on mev to make money. Most bots are unsuccessful, like 90% to 95% of the time.
00:08:24.960 - 00:08:40.418, Speaker A: We're seeing success rates now of about or we're seeing unsuccessful rates of about 80%. And so our bots get ARBs through actually a lot more often than others. It's not optimal yet, it's really good.
00:08:40.418 - 00:08:55.126, Speaker A: I'm hoping that we can get it down to 50%, but that's like more of an ego goal than it is a goal that is ever going to come to life. That's pretty much it. I'm sorry that I couldn't provide more examples, but we found another one this morning.
00:08:55.126 - 00:09:14.880, Speaker A: But that one we really don't want to provide because it gives searchers another opportunity to throw us out of the game. So I'm not going to show that one, but I think maybe in a couple of weeks or at the next conference I'll be able to reveal that one. But yeah, happy to take any questions.
00:09:14.880 - 00:09:48.606, Speaker A: How do you manage the money? Assuming how do you manage how do we manage the security of our hot wallet? Most of our money we throw into a smart contract. Nosa safe wallet, that's not in the hot wallet. The hot wallet architecture is a bit weird because it's me VM.
00:09:48.606 - 00:09:53.734, Speaker A: We have to be fast. It's essentially going to be a private key. Right? There's nothing we can do about that.
00:09:53.734 - 00:10:08.082, Speaker A: We just limit how much is in there. Most of our private keys don't hold more than I think it's $10 million. And the ones most of the money is in the ARB smart contract.
00:10:08.082 - 00:10:19.310, Speaker A: And those ARB smart contracts are owned by a multi SIG as well. So the amount of money that's actually in an EOA is relatively low. The stuff that's in an EOA is usually to pay for the gas for the transaction to the smart contract.
00:10:19.310 - 00:10:23.920, Speaker A: Anything else?
00:10:26.890 - 00:10:27.778, Speaker B: Simple. What's?
00:10:27.794 - 00:10:34.330, Speaker A: An EOA? End user account. Just an end user account. Something that's not a smart contract wallet.
00:10:34.330 - 00:10:39.066, Speaker A: Okay, perfect. There's no more questions.
00:10:39.168 - 00:10:42.414, Speaker B: Just one? Yeah. I'm here on the left.
00:10:42.532 - 00:10:43.486, Speaker A: On the left.
00:10:43.668 - 00:10:45.760, Speaker B: How many strategies do you have?
00:10:47.170 - 00:11:02.206, Speaker A: So we have around three to six. We discovered a new one this morning which requires a bit more liquidity and so we're pooling funds for that. The thing is, a lot of the strategies that we do, we have deployed on different chains.
00:11:02.206 - 00:11:15.554, Speaker A: So we have around three to six, but we deploy them on three chains. So most of the strategies we do, we can throw onto different chains and then it's just optimization from there. Most of the strategies we do are not that advanced.
00:11:15.554 - 00:11:38.878, Speaker A: They're pretty similar to everyone else's. As said on the panel, it's mainly an infrastructure issue, right? Like, we don't do anything on Ethereum just because it's too competitive for us. I don't like competing and Flashbots really kind of democratized mev on Ethereum a bit too far that it doesn't make sense for us to compete there.
00:11:38.878 - 00:11:56.200, Speaker A: I said I like to be on chains that I would never personally use, which are chains that are centralized and kind of shit, but make me a lot of money. Yeah. Anyone else?
00:12:02.810 - 00:12:14.810, Speaker C: Thank you. Do you update the parameters? For instance, if 60% of liquidity tokens is owned during the actual transaction or you update it temporarily?
00:12:15.790 - 00:12:44.494, Speaker A: So because it's 444,000 pairs, what we do is we generate a JSON file on the fly every couple of minutes. That is then indexed in the code, which contains a lot of information for us, and we base it off of that and then we filter out. But usually you don't have to update it that much because the rate at which pairs show up is maybe hourly.
00:12:44.494 - 00:12:55.490, Speaker A: And so every 24 hours is usually enough because we just don't do anything that isn't new or that isn't new. Right. So like, if a new pair pops up, that's a scam.
00:12:55.490 - 00:12:57.846, Speaker A: It's not in our index anyway, so we're not looking at it.
00:12:57.868 - 00:13:04.554, Speaker C: Yeah, but so if your competitors know the heuristics, they can use that to compete with you?
00:13:04.752 - 00:13:15.870, Speaker A: In theory, but they don't know our heuristics. Like, these are very few and they're not even accurate. Okay, I was careful.
00:13:15.870 - 00:13:34.626, Speaker A: Anyone else? Hi. Do you have any general tips or tricks for people starting out in Mev? New searchers? Work with a friend. Don't burn yourself out.
00:13:34.626 - 00:14:02.410, Speaker A: Okay? That's mainly advice, not a tip or a trick. If you're a small fish, there's interesting things to start looking at that other people aren't looking at. I think the edge of a new person or of a smaller fish is that you can dig deeper and be more in random communities and things to find different opportunities.
00:14:02.410 - 00:14:29.478, Speaker A: There's a lot of nuanced protocols that people aren't like me aren't touching because the profit just isn't high enough. But the profit for someone who's just starting out probably makes more sense than it does for me. I personally wouldn't compete on things like uniswap, like exchanges as a single person just because, as said on BSc, for example, where we're doing, it's an infrastructure problem, right? Everyone knows how to sandwich at this point.
00:14:29.478 - 00:14:50.134, Speaker A: Everyone knows how to do a JIT attack at this point. The problem is just an infrastructure problem, right? And so the thing you're optimizing for is no longer your strategy, it is for essentially getting a transaction out to the network. And that requires a whole different skill set than it does to find very nuanced strategies.
00:14:50.134 - 00:15:12.718, Speaker A: So it depends what you want to look at. If you think that you're good enough at knowing geth and working off of that, then I say go ahead and do stuff like that. It's just like you're now optimizing for the millisecond rather than optimizing for finding interesting game theoretic and financial things that you can do to make profit.
00:15:12.718 - 00:15:13.860, Speaker A: Thank you.
00:15:20.730 - 00:15:30.170, Speaker B: Thanks. How quick do these opportunities on the newer chains actually stay around? How quick do these do they disappear?
00:15:30.830 - 00:15:34.762, Speaker A: Do you mean like how quick do general strategies disappear? Yeah.
00:15:34.816 - 00:15:36.810, Speaker B: So your new strategies?
00:15:37.950 - 00:15:43.546, Speaker A: Well, as said, the things we're doing are very basic. Like, a lot of the stuff we're doing is Arbitrage. Arbitrage never disappears.
00:15:43.546 - 00:16:01.682, Speaker A: You have it in traditional markets as like, the Arbitrage becomes slimmer on something like BSc. It hasn't slimmed down enough to demotivate us just because there's so many pairs, there's so many illiquid pairs and things like that. Even on ethereum, Arbitrage is still there.
00:16:01.682 - 00:16:19.500, Speaker A: We're just not doing it because there's so many other people doing it there. And there's no competitive edge that you can have with Flashbots except of optimizing bytecode to the smallest amount so that you can get into the gas auction that Flashbots does, which isn't that fun to me.
00:16:28.510 - 00:16:45.230, Speaker D: Hi, Dan, thanks for the talk. What are some of your heuristics for identifying a new strategy as viable? Do you look for things that aren't competitive, or do you look for something do you identify through analytics somewhere where someone is competing and think, we can do that better? Yeah, I'd love to hear your thoughts on that.
00:16:45.300 - 00:16:59.362, Speaker A: It's a bit of everything right now. Most of the strategies that we've had, we've seen some bot do something smart and figure out a way to do it better. The team is relatively new.
00:16:59.362 - 00:17:17.674, Speaker A: It's been around for six months. And the way we did it for the first four or five months is everyone came up with a smart idea and started building their own bot. And at one point, the people on the team converged and started working on two, three ideas and realized that a lot of the infrastructure things that we were working on, one bot can be used in another bot and things like that.
00:17:17.674 - 00:17:28.346, Speaker A: Right. And so it's really just a matter of fuck around and find out. I think you can probably be very organized about it.
00:17:28.346 - 00:17:42.900, Speaker A: It's about finding out where liquidity is, where volume is, and then trying to see if there's strategies related to that. Yeah, we just we look where the money like, the smartest analytics that we can do is looking where the money is.
00:17:43.750 - 00:17:44.980, Speaker D: Great. Thank you.
00:17:58.150 - 00:18:06.470, Speaker E: Kind of a different question, but I was wondering, what is your preferred crypto to store wealth in for an indeterminate time horizon?
00:18:08.650 - 00:18:10.530, Speaker A: I don't give financial advice.
00:18:10.610 - 00:18:13.458, Speaker E: No, not financial advice. Personal opinion.
00:18:13.634 - 00:18:15.234, Speaker A: I don't give financial advice.
00:18:15.282 - 00:18:16.440, Speaker E: All right, thank you.
00:18:20.880 - 00:18:28.810, Speaker A: All right, if there's no more questions, then thank you. Thank.
