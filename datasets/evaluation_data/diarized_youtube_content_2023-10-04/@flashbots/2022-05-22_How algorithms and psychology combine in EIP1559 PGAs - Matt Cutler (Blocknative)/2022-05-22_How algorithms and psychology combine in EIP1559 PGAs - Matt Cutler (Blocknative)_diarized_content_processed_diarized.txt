00:00:10.010 - 00:00:42.838, Speaker A: Hey, good afternoon, everybody. My name is Matt, I'm from Block Native, and we're here to talk about gas prices. There's been a lot of discussion today around the impact of gas prices, and we were asked to come share some of our research into the public Mempool gatsby marketplace. So there's a lot to go through here. I'll jam through it. Everybody has access to the slides, and hopefully at the end we'll have time for questions. We operate a streaming mempool data as a service platform, but we really view pre chain transparency as a public good to try to level the playing field for everybody in the ecosystems that we service.
00:00:42.838 - 00:01:20.846, Speaker A: But in doing so, you can't just say, here's mempool data. It's really incumbent upon us as providing public good to enrich and extend that data, because the raw data itself is not that useful. And one of the things that we do as part of that is gas prediction. And so a lot of what I'll be talking about is what we do in gas prediction, what we see and what's happening moving forward. You may have used our gas estimator, but that's pretty simple. It's based on this underlying series of models that are doing next block prediction. So we spend a lot of time trying to predict, based on the contents of the public mempool, what is likely to occur in the next block, and then draw inferences and basically let people make better decisions, help you be a better searcher as a result of knowing that.
00:01:20.846 - 00:01:41.802, Speaker A: So this is what we'll go through today, a little bit about fee prediction. We'll talk about PGAs under 1559 and then we'll look ahead at some of the new stuff. We just today released some base fee prediction, which is kind of cool and touch on the merge briefly. So there's been a lot of talk about the good old days. Here the nostalgia of the past. It was a simpler day and era. So previously gas fees were really quite simple.
00:01:41.802 - 00:02:22.578, Speaker A: It was a first price auction model. Block sizes were fixed, you picked one number, miners included you, and that was the whole thing. But this had a whole bunch of problems and negative externalities, as we've already heard about today. But in particular, it had this tendency to have these PGAs erupt, these sudden changes in gas price where the network would be humming along and then suddenly bots would go to war. An NFT launch would happen, gas prices would skyrocket, users would have negative experiences, and it was really hard to figure out what to do next and how to behave appropriately within this. And so what we built this was back in this era, was the first set of gas fee predictions. And so what we basically said was, hey, we have the whole contents of the mempool.
00:02:22.578 - 00:03:12.138, Speaker A: We can look at that and we can say, well, these are the transactions that are likely to be in the next block. And based on that, we can start to build some confidence levels and build neural nets to sort of say, hey, look, we can basically provide advice about what it's going to take to get into the next block. So a lot of the research that we've been doing as it relates to this aspect of our business is what are the likely contents of the next block, and if you want to get into the next block in specific order, what do you need to do and why? And so there's a whole bunch of stuff underneath the covers that makes that happen. And then we produce these payloads which are publicly available, or you can get commercial plans for us for this as that sort of show all these various confidence levels and how your gas needs to be set as a part of all of that. We benchmark this against reality all the time. So we're constantly calibrating everything to make sure that our models accurately reflect reality, because when we don't, bad things happen. And then EIP 1559 comes along.
00:03:12.138 - 00:03:44.798, Speaker A: So, as everyone is aware, EIP 1559 was a fundamental reinvention of the fee marketplace on Ethereum, designed specifically to try to make it a more equitable market and make it a little bit more balanced. But what it did was take one gas number, which was pretty easy to understand, and decompose it into these three. So of course we have the base fee, we have the priority fee, and then the max fee, which is disorienting for folks. The base fee is algorithmic. The network determines it. So the network becomes self aware about what the gas fee marketplace looks like and it adjusts up and down. We're going to target these 50% full blocks.
00:03:44.798 - 00:04:32.370, Speaker A: The priority fee is up to the user optional, quote, unquote, and is the tip. And then the max fee is a super disorienting thing for users because you got to anticipate future base fee increases and you have to overestimate your max fee so you don't get underpriced. And this has proven to be super disorienting. But practically speaking, the base fee is determined by an algorithm and the priority fee is determined by user psychology. And these begin to interact in interesting and unexpected ways. And we'll be talking about that now. And now what we're working on, and I'll talk about this as well, sort of providing a lot more clarity into the base fee multiple blocks into the future so that we can make more accurate and more conservative estimates or sort of lower estimates of the max fee.
00:04:32.370 - 00:04:55.594, Speaker A: So here's the base fee algorithm. We won't go through that too much today, but it results in things like this. So here's a NFT launch from earlier this year. It was the AO art all NFT launch. And you see the networks are humming along. Base fee is pretty stable. And then the NFT launch hits and the blocks start to get full and EIP 1559 base fee algorithm does its thing, 12.5%
00:04:55.594 - 00:05:22.494, Speaker A: per block and it starts to ramp up as fast as it can and it reaches some sort of maximum point. Demand drops off and we see a corresponding decrease. Now, significantly under 1559, the base fee tends to increase faster than it decreases. And where it started and where it ends, it tends to take hours to get down to where it was. We can talk about that a little bit. Now, that's just the base fee for this launch. Here is what the priority fee was doing during this launch.
00:05:22.494 - 00:05:51.918, Speaker A: So most of the time the priority fee is relatively small, a couple of way maybe, but under periods of network congestion, the user psychology kicks in. People want to get in on these NFT launches, for instance, and you see this sudden surge in just a small number of blocks. The minimum priority fee to be included surges to above 800 GWe. Now, you'll notice it's sort of up there and then tails down. But of course this is only half of it. It's base fee plus priority fee. And so this is the overlap of those.
00:05:51.918 - 00:06:32.586, Speaker A: This is all to zero. But if we add them together, what do we have here? We have a PGA. So during periods of network congestion, during periods of high demand, the priority fee dominates. The user psychology kicks in and you have the exact same sort of cliff effect or tabletop effect that we had before where you have this sudden increase in fees to get on chain and then a decrease thereafter. Now, what's interesting about this interplay is there seems to be this interaction between the priority fee and the base fee. I e. As the priority fee is low, sorry, as the base fee is low, the priority fee is quite high.
00:06:32.586 - 00:07:15.830, Speaker A: But as the base fee starts to catch up, the minimum priority fee starts to shrink. And so the priority fee, which is set by psychology, seems to be responsive to the state of the base fee. And curiously, it would seem that users sort of who are participating in these launches sort of have some shelling point collusion, if you will, where they sort of all agree for this NFT launch, here's probably what the floor is going to be and that's what the transactions come into the memcool as. And so it varies over time. But there's interesting effects. As the base fee responds, the priority fee adjusts and users make decisions in real time about how they're going to participate. We also have this overshoot effect where you say here you can see the base fee is coming up.
00:07:15.830 - 00:08:01.746, Speaker A: The priority fee is now a declining percentage, but there is a window for a few blocks where you could actually probably have gotten in if the minimum priority fee was lower. But the buyer behavior of this NFT drop sort of accelerates beyond and you see the sort of bump up before. Now these are pretty common, this is just a couple of other ones, these sort of tabletop effects where you see the base fee in blue, priority fee in red, and this sort of jump up minimum block inclusion. And what we're seeing in the data is this overshoot effect seems to becoming more common and more extreme. So here's the arcade land NFT sale orange. Here is the priority fee and you can see a significant overshoot up to 2000 guay over the base fee. Similarly, here's the relief.
00:08:01.746 - 00:09:14.190, Speaker A: Ukraine NFT sale this time peaked all the way to 2500, but you can see jumped way up, demand wasn't supported and then came down pretty quickly once folks realized that that wasn't going to be sustained. Here's the Benji bananas past NFT sale, this spike was at 6000 weight, minimum base fee in the block was at 6000. Massive increases here and what we're seeing as well, we sort of did some gross analysis here to average out the PGA profile by month and if you look in October, sorry, August of 2021, just when EIP 1559 launched, pretty much what we'd expect this tabletop effect. But as we click forward by the months we see this overshoot effect becoming more pronounced and we see as more common. And so this is sort of a summary of that, but this is sort of monthly data, the average peak of the base fee versus the priority fee. And what do we see here? That the average peak of the base fee is declining over time, while the average peak of the priority fee is increasing. So the psychological impact seems to be growing as it relates to the gas fee marketplace.
00:09:14.190 - 00:10:14.126, Speaker A: And this creates all sorts of interesting problems because when you have these massive surges now you got to be really careful about your max fee because you set your max fee in such a way to make sure that you can get included in a coming block. But as these spikes continue to happen more regularly, you got to be a lot more careful about this sort of stuff. So this is the typical max fee setting, the max fee algorithm which was set up at the beginning, which is basically pretty simple, you double the base fee and then you add your priority fee. The challenge here of course is that it sets very high numbers and users get concerned about that. And for many traditional users or regular users of Ethereum, this is a scary number. And so what we've been working on is trying to predict into the future where the base fee is going to go 1234 and now five blocks out into the future so that we can provide more accurate base fee predictions and more accurate max fee calculations. The good news is it looks like it's working.
00:10:14.126 - 00:11:01.934, Speaker A: So we similarly have released a multilayer quantile regression neural network that does this. And what we're seeing, at least since we've deployed that is about a 16% average reduction in MaxV calculation. So again, getting a lot more precise and a lot more sophisticated in terms of how we can look into the data set predict into the future and make more informed decisions both as regular users and as searchers around all things gas. Of course, the further we go into the future we get higher error rates. So we're really confident one block ahead and then we're a little less confident two blocks ahead and we today are publishing five blocks ahead and you can see the error bars start to stretch out. But it seems pretty clear that this is a very practical thing to do and a useful thing to do for users of the network. These are in our payloads today, by the way.
00:11:01.934 - 00:11:33.594, Speaker A: So if you go to our stuff you can start to inspect this. It's on the bottom of every payload so that's out in production. We issued a blog post on this today too. And then sort of the final thing I'll say on all this stuff is looking ahead to the merge. So the merge will be 1559, of course, where things change just a little bit. But there is this significant effect, we believe, which is that under proof of work you have variable block time, under proof of stake you have a fixed block time. So blocks will be every 12 seconds exactly.
00:11:33.594 - 00:12:24.230, Speaker A: That basically means there's certain milliseconds post block confirmation that are less valuable than milliseconds closer to block confirmation or block construction. And we think that this will impact intra block transaction velocity. Whereas today across the public mempool, you see a pretty steady state rate of new transactions whereas post merge it'll probably start to pulse where there'll be certain seconds where there'll be less transaction velocity and there'll be other seconds where you'll see more transaction velocity. And that will create all sorts of new and interesting challenges both for user psychology to figure this stuff out as well as for searchers who need to make bundles based on time. So this is something we're paying attention to and we think will be super interesting to see the behavior as it emerges post merge. And so anyways, that was really quick. But hey, in the past gas fees mattered.
00:12:24.230 - 00:12:47.860, Speaker A: In the present, right now, gas fees matter. And we certainly believe in the future gas fees are going to matter as well. And we're super excited to be part of this ecosystem and super excited to be here and share some of this research. And again, just like Ethereums and Boomers have one thing in common which is we all like to complain about gas prices. And that's what I had to talk about today. So it's great to be here and I'm happy to take questions if there's any questions.
00:13:04.920 - 00:13:17.400, Speaker B: Do you have any thoughts on changing EIP 1559 parameters such as the base fee escalation rate, how that would impact users or for instance, moving from two x 1559 to three x or five x in terms of the elasticity.
00:13:18.220 - 00:13:59.620, Speaker A: We do work with the EF on this topic and it certainly seems that there is room for further optimization of some of the assumptions that are made in 1559. And Barnaby was here before and he's really driving a lot of that stuff forward. So we do think that there is definitely room for refinement to what's there. I mean, it was a big step in the right direction, but there's more that can be done. Obviously, the big conversation right now is multidimensional EIP 1559, which is awesome on one level because it's much more efficient, it's challenging on the other level because it will just create additional complexity for everybody. But I think that we're way away from the end of the road as it comes to gas optimization on these public blockchain networks.
00:14:00.120 - 00:14:16.504, Speaker B: Do you have any thoughts on EIP 25 93, otherwise known as Escalator algorithm? Or in other terms, what do you think could combat or what would the UX for users be if we were able to reduce sort of the priority fee climbing and the first price auction occurrences?
00:14:16.632 - 00:15:07.432, Speaker A: So I'm not familiar with that EIP, but we are seeing a lot of interesting work on the usability of wallets and sort of how wallets present this information to folks. And so that seems to be an area that's sort of ripe for innovation. I'm not sure if you guys have seen the tally. Wallet has a pretty interesting and different way of presenting gas and gas price, and we're working with those guys as well. It seems pretty clear that users are challenged by this, that the slow, medium, fast, the the distinctions, the time, the mental model among most users doesn't really reflect the reality of how the networks work. And we're constantly responding to questions about how this stuff actually goes. So it seems to me that there's a pretty big gap between how things actually work, how the wallets present this stuff to users, and what users understand.
00:15:07.432 - 00:15:40.010, Speaker A: And we're excited to be a part of simplifying that moving forward. We actually do a bunch of front end work as well. We have a Web Three onboard library that's going to be incorporating a lot of stuff too, to help simplify that. But again, I think we're early in that process. There's still a lot of work to do. Any other questions? Awesome. I'll be out if anyone has any questions.
00:15:40.010 - 00:15:43.190, Speaker A: Again, thanks so much and have a good rest of your time in Amsterdam. Cheers.
