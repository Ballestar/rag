00:00:11.370 - 00:00:20.042, Speaker A: Quick word about me. I'm hatu I strategy at flashpot. I'm also a strategic advisor to Lido.
00:00:20.042 - 00:00:48.810, Speaker A: I've been thinking and writing about blockspace market and what me be for over three years now. This time I've seen a lot of things and in this talk I want to share my insight why you can't get around if you're developing a blockchain. Whether it's layer one solution side chain or it's layer two, you want to build a block based market that allows for efficient NVX section.
00:00:48.810 - 00:01:22.230, Speaker A: So to see why, let's look at what a blockchain actually is from first principle. Every blockchain has three components first, a virtual machine that is replicated on thousands if not millions of computers at the same time a consensus mechanism that keeps them all synchronized with each other and the consensus actually breaks down into two parts. First is sequencing, just selecting the next selection to go into the block.
00:01:22.230 - 00:02:10.440, Speaker A: In other words, propose a new fork of the chain that has one we block at the tip and then at the station that is attaching to the fork containing that we block at the tip giving it economic weight in the fork just rule and that weight in present day Ethereum is a proof of work. After the merge it will be proof of stake but in layer two context, for example, it can also be the absence of a fraud proof together with data availability or the presence of a zero knowledge proof or validity proof. And the last component that we need is a block based market and that is the topic of today's talk.
00:02:10.440 - 00:02:40.714, Speaker A: So why do you need a block space market? The question that almost everyone asks in the beginning the idea about crypto is why can't we have infinite block space? Why can't we just make blocks as large as we want and that will create a large amount of supply for users. So that's why I gave the definition of what a blockchain is. So every transaction is due, must be replayed and stored by oil node forever.
00:02:40.714 - 00:02:57.506, Speaker A: I put an asterisk here because it's not that strictly true. But in either case, oil nodes have to store what the current state is, and that can also get very large, very quick. To maximize the number of participants in a decentralized system.
00:02:57.506 - 00:03:22.090, Speaker A: We want to minimize the amount of resources that each of them has to consume in order to stay in sync with the network and also catch up with from scratch or from a last checkpoint. And that means you have to limit resource consumption to a point where people with consumer based hardware assets can also participate. So that's the reason why ethereum for example, has a gas limit among other reasons.
00:03:22.090 - 00:04:06.346, Speaker A: So if you are starting from the assumption you need finite box space, then the question is how do you allocate this box space efficiently? And different blockchains have tried different market mechanisms for that first Converse Soap or various forms of batch auctions, as we will see. So to look back around to the first slide, a transaction starts in the block space market, then it's picked up by a sequencer, then it's tested to a block and eventually makes it into the next update of the VM space. Designing block space markets used to be really easy.
00:04:06.346 - 00:04:21.130, Speaker A: So three years ago there were very few people thinking about block space market design. Why? Because it was not an interesting problem. The problem that people were thinking about at the time was gas price estimation.
00:04:21.130 - 00:04:42.406, Speaker A: So that was the only problem that people were dealing in real time so much to get your transaction included in the time that you want. And because gas price estimation was really poor, it led to a lot of underlying overbidding. Transactions stuck or people were overpaying or prices were swinging really hard.
00:04:42.406 - 00:05:12.880, Speaker A: And so some time ago we implemented ESC one five nine turning the market from fixed supply. So there used to be like a fixed limit on the amount of gas that can be in a block and then the price would float demand and ERT one five nine replaced that with a floating supply and the market calling you a fixed price. And this leads to the same amount of S being consumed, but it has way better us.
00:05:12.880 - 00:05:26.082, Speaker A: And this update has been so good that it has since been fixed by Sapphire virtually every smart contract blockchain that exists. So this has been a large success. You can consider the original problem of gas estimation.
00:05:26.082 - 00:05:55.850, Speaker A: Soil mev enters the room and as you can see, the model of Mev that is being extracted from public blockchains is going up. In sum, and what this means, basically, mev has made block based market design hard again. Why is that? Mev transactions have complex preferences for placement.
00:05:55.850 - 00:06:29.050, Speaker A: So an Mev transaction wants to be positioned at a very specific point in a block, also in relation to other target transactions. For example, if the mev transaction is doing inter block arbitrage, so arbitrage between two blocks are being mined, then it wants to be first in the block or very early. If the arbitrage is done within a block, then it wants to be positioned right after a target transaction.
00:06:29.050 - 00:06:52.080, Speaker A: For example, like a trade that unbalances a decks Dex pool, for example. If it's a liquidation, then this is a similar format. So you want to be positioned right after the Oracle update, so you can be the first to public charge away the opportunity.
00:06:52.080 - 00:07:09.762, Speaker A: And with the sandwich it gets even more complicated because you want to be right before and after a target transaction. And it doesn't even have to be just one. A sandwich can have in the middle an arbitrarily large number of trades as long as they're all going in the same direction.
00:07:09.762 - 00:07:27.434, Speaker A: So you might even want to say, I want to put three trades here in the order and then put mine in front of the back. So these are typical challenges that we're seeing. So what this means is if you have an unexpressive market I.
00:07:27.434 - 00:08:02.822, Speaker A: E. Market where that doesn't allow the bidders to express their complex preferences and you have bidders with complex preferences and these bidders have a large incentive to get their transaction exactly the point where they want, then the result is a lot of negative externalities for your blockchain. So if your market mechanism at least include all of the ones that we will go through in a second informs what mev extraction strategy, search house trading terms, et cetera will use.
00:08:02.822 - 00:08:27.280, Speaker A: And depending how expressive your market is and if it's optimized for media extraction, we will see various forms of negative extraction. So in the following slide we will now go to different market mechanisms and the mev 20 that it leads to negative tax analysis. So the first one that everyone should be familiar with is the transparent batch function.
00:08:27.280 - 00:09:01.846, Speaker A: That is what Ethereum is largely still using today and has been using for the last year. So what this means is transactions accumulate in a public mempool and then every on average 5 seconds a mining pool like a builder takes these transactions, manage them into a block and then the miners attach to it and it gets updated. And how do you compete in the strategy? So for one, you want to be the first to see new transactions that enter the public ramp code.
00:09:01.846 - 00:09:35.842, Speaker A: So you can be the first to issue a response and then you want to be so you have these two things right, so you want to have a good view of the ramp code and then you want to have latency. And what this leads to, it leads to a lot of failed transactions, it leads to no front running protection for users and it leads to block producer centralization because extracting the Stem deal is very hard. So you have an incentive for mining pools at miners to vertically integrate its trading curves.
00:09:35.842 - 00:09:59.350, Speaker A: And there's actually an interesting anecdote here. So until, I think, one and a half years ago, the dominant client that you might have used was actually different. In the sense that when it saw two transactions that arrived at the same gas price and it would decide randomly which one would include.
00:09:59.350 - 00:10:28.530, Speaker A: And so this had a different dominant searchers were like spamming the miners and the network with many transactions in order to ensure that they would win the lot. So then gap changed how their client sequences transactions and now the first index that is used, certain gas sets is the one that gets included and the others get discarded. And so this is how it changed from spam being a learning meg strategy to latency.
00:10:28.530 - 00:11:16.318, Speaker A: The dip that auction is the one that we have in Ethereum today via flashboard and other mev auction systems. So this has changed the game in a dramatic way, because now suratas have a lot better express what their transactions are supposed to do, where they are supposed to be in relation to target transactions. And this has shifted this game from being a latency war and war on rank review and on spamming the chain to one where the searchers compete on who can pay minus the most.
00:11:16.318 - 00:11:57.278, Speaker A: And this is largely a function of how low can you get your gas? How high can you get your gas efficiency? How little block space can you use? So this has very few of the original negative externalities. It has one new negative externalities externality, which is that now the block builder that is flashboard has a lot more like there's a new party that has a fair amount of power that didn't exist before and that is only going to go up as we had already seen in some talks and as we will see in more talks as, for example, cross domain. And we began busting picture.
00:11:57.278 - 00:12:05.394, Speaker A: So the builder role, it will only go up in quarters. That's really important. Then we will quickly go through some more.
00:12:05.394 - 00:12:24.106, Speaker A: So we have transferring better options with low ease and low latency. And this sort of has the same problems as the original mechanism. But it gets even worse as when the latency of the chain is really low.
00:12:24.106 - 00:12:53.534, Speaker A: So when the fees are really low, you encourage spam and when the latency has to be really low, then you encourage basically vertical integration between mining pools and searchers. So that's not the scenario that you want. So in this system, for example, you would not be able to have a system like Flashbots because Flashbots, even if it's an open system, would lose to one that is colocated with different groups.
00:12:53.534 - 00:13:56.342, Speaker A: So you would have to re architect what this next flashpot is from the ground up. So in the previous talk by Xinjuan we have seen why pair sequencing, pair ordering is extremely hard to do in a decentralized way and if you try it in all of these other ways then it leads to many of the same problems right? Because if you have the ordering based on first come, first team then you encourage again elected to work that in the end game becomes a colocation game and so you really do encourage all of the nodes in their ordering system to colocate with each other so they can more effectively option off a colocation right, with anything. So in either case system trends towards centralization as well and then finally you have to randomize the best option.
00:13:56.342 - 00:14:07.526, Speaker A: So this is something that some blockchains are experimenting with. For example, on polygon atlas. So polygon, if you're a polygon validator, you run actually two nodes.
00:14:07.526 - 00:14:24.414, Speaker A: One is they call it century node, that just accepts all of the transactions and then it forwards a random selection of them. So it's basically like as a vendor, you only see a randomized batch of options, but there are transactions. But there are various ways you can do this.
00:14:24.414 - 00:14:53.850, Speaker A: Like Neo for example has been thinking about doing a batch option where the batch is randomized after going on chain so you can have different ones. But the problem here is always the same. So the servers are in central spare and the miners who are the vendors who do want to extract the Mev, if they can't put the transactions in the place where they want then they are incentivized to approach the problem from the other side which is excluding all the transactions that they don't want.
00:14:53.850 - 00:15:17.338, Speaker A: So you really end up going to a system where researchers or the vendors or builders could submit all of the transactions that could mess up the order that they want to achieve. So you need a system where the parties are aligned in extracting the most possible. You will not be able to do another way that doesn't need to a lot of manufacturing.
00:15:17.338 - 00:15:27.150, Speaker A: And as a very smart man have said show me the incentives and I will show you the outcome. This is not something that I made up. These problems exist everywhere.
00:15:27.150 - 00:16:11.198, Speaker A: Here's example of airline extracted the value german zone Lufthansa said it would have to fly an additional 18,000 unnecessary flights through COVID Center to hold on to their landing slots. Yeah, if you design the system in a way that parties have to do particular things in order to get a license, then they will. So what are takeaways mev exists? And the way that you set up your block space market it shapes the dominant extraction strategy for structures and these extraction strategies create different negative externalities as well to your users and the sustainability and robustness of your blockchain.
00:16:11.198 - 00:16:50.254, Speaker A: So dear blockchain architect, your choices have long run consequences build mechanisms that acknowledge me, that acknowledge reality how it is today and doesn't assume that Mee doesn't exist. Second, every blockchain needs fees to prevent spam and allocate resources in the block space market. So every blockchain needs a block space market, every blockchain needs a way to express complex preferences to accommodate for NV extraction in order to completely wreck your user experience.
00:16:50.254 - 00:17:20.590, Speaker A: And competition on price is the least harmful and most efficient form of Me extraction that we know so far that might change, but today I would say it's definitely true. And finally, last slide with two bonus benefits. So if you run a market mechanism that maximizes competing for price then you will also maximize the revenue of your block producer or block producers or sequencer to a layer sheet.
00:17:20.590 - 00:18:14.614, Speaker A: So even if you have a single sequencer layer two and you think you could really efficiently run a first come, first serve kind of system, you should still consider the trade offs between using that and using an MEB auction where the searches compete on price. Because in the first compressor system most of the value will be extracted by searchers whereas here most of the value will be extracted by the block producer and can be reinvested into your ecosystem either by paying any defect to just or by using incentives to grow your blockchain or by reinvesting into public goods funding. And final point, by making the central market more efficient, you will also improve the liquidity and plumbing of your DeFi ecosystem.
00:18:14.614 - 00:18:35.120, Speaker A: So your DeFi applications will be grateful if they can rely on a robust social ecosystem where they can rely that the transactions in decentralized lending markets will be liquidated on time at the best price possible. And the same goes for arbitrage, decentralized exchanges and so on. Thank you.
00:18:35.120 - 00:19:26.380, Speaker A: I'm now taking questions because it's set up. You might probably have to somebody ask the question then from the end and repeat them to me here. Hi.
00:19:26.750 - 00:19:52.180, Speaker B: So I saw the way you said if you have a system with very fast transactions and very low cost to the transactions, something like a flashboards actually couldn't compete. And you have issues with spam and such, how does that interact with our drive towards having fast transactions and low fees in layer twos ZK roll ups and the like?
00:19:53.510 - 00:20:23.142, Speaker A: Great question. Yeah, I think it will require us to rearchitect what system like dashboard should look like on another chain. I think the end game is for all blockchains to have an efficient block like an efficient MEP market, but it's an ongoing topic of research for us and for other participants in the ecosystem, how that system can be created in a very low latency system.
00:20:23.142 - 00:20:53.622, Speaker A: I think it's actually quite possible that this system will also involve some degree of colocation. Because if you're not colocated with the block builder or the mining pool or the staking pool, then I think it will be impossible to compete with a decentralized system, with an open system against the sort of private verdict, integrated systems that we are trying to prevent. I can point you to.
00:20:53.622 - 00:21:16.410, Speaker A: So there are some systems that are trying to build right now I know that veto on Solana. I'm not 100% familiar how they work, but there are already some versions of variants of search for being built on other chains that have much lower latency. And so they could be maybe they are even here at this conference and would be down to chat.
00:21:16.410 - 00:21:17.900, Speaker A: Thank you.
00:21:19.230 - 00:21:37.620, Speaker C: Hi Hazu, I have a question on if you were to create a new sort of blockchain, is there a difference with regards to mev whether the validators are known? Let's say with tendermint there's only 21 versus where it's completely permissionless and no one necessarily knows who the validators are.
00:21:41.030 - 00:22:04.000, Speaker A: No, I don't think it makes a difference. I think that if you don't have a system like flashback, then I think it's probably like the fewer parties you have, the easier, the more likely it is that the system will collapse back to some even greater state of centralization. Because for example, if you're a starter, then you know exactly who to approach and who to strike deals with and so on.
00:22:04.000 - 00:22:15.242, Speaker A: But I think outside of that, no, I don't think there's a large difference. All right. Thank you, Hasu.
00:22:15.242 - 00:22:19.474, Speaker A: We have to move on to the next speaker. Thank you for your presentation. Yeah.
00:22:19.474 - 00:22:32.960, Speaker A: Should I announce Tom? Okay. Thank you very much.
